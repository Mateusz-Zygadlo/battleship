(()=>{"use strict";const e=e=>{const t=document.querySelector(".ships");t.textContent="";for(let a=0;a<e.length;a++)if(1==e[a].land)console.log("is land");else{const d=document.createElement("div");d.classList.add("ship"),d.dataset.id=e[a].id,d.classList.add(e[a].name),d.style.gridTemplateColumns=`repeat(${e[a].size}, 1fr)`,d.style.width=`calc(${e[a].id} * 50px)`,d.style.height="50px",d.style.backgroundColor="black",d.draggable=!0;for(let t=0;t<e[a].size;t++){const e=document.createElement("div");e.classList.add("square"),d.appendChild(e)}t.appendChild(d)}},t=[{name:"Destroyer",size:2,id:2,land:!1},{name:"Submarine",size:3,id:3,land:!1},{name:"Cruiser",size:3,id:3,land:!1},{name:"Battleship",size:4,id:4,land:!1},{name:"Carrier",size:5,id:5,land:!1}];let a;(()=>{const e=document.querySelector(".gameboard");for(let t=0;t<10;t++)for(let a=0;a<10;a++)if(0==t&&0==a){const d=document.createElement("div");d.classList.add("gameField"),d.dataset.row=t,d.dataset.column=a;const l=document.createElement("div");l.id="draggable",l.draggable=!0,l.dataset.row=t,l.dataset.column=a,d.appendChild(l),e.appendChild(d)}else{const d=document.createElement("div");d.classList.add("gameField"),d.dataset.row=t,d.dataset.column=a,e.appendChild(d)}})(),e(t);const d=[];let l=0;for(let e=0;e<10;e++){const e=[];for(let t=0;t<10;t++)e.push(l),l++;d.push(e)}document.addEventListener("dragstart",(e=>{a=e.target,e.target.style.opacity=.3}),!1),document.addEventListener("dragend",(e=>{e.target.style.opacity="",e.target.dataset.row=e.target.firstChild.dataset.row,e.target.dataset.column=e.target.firstChild.dataset.column}),!1),document.addEventListener("dragover",(e=>{e.preventDefault()}),!1),document.addEventListener("dragenter",(e=>{"gameField"==e.target.className&&(e.target.style.background="yellow")}),!1),document.addEventListener("dragleave",(e=>{"gameField"==e.target.className&&(e.target.style.background="")}),!1),document.addEventListener("drop",(l=>{if(l.preventDefault(),"gameField"==l.target.className){l.target.style.background="",l.target.appendChild(a);let s=!1,r=l.target.dataset.row+l.target.dataset.column,n=Number(r);r.split("")[0],r.split("")[1];for(let e=0;e<r.split("").length;e++)0==r.split("")[0]&&(r=r.split("")[1]);const i=l.target.firstChild.className.split(" ")[1];let o,c;for(let e=0;e<t.length;e++)t[e].name==i&&(o=t[e].size,c=e);const g=n,m=n+o-1,u=[];for(let e=g;e<=m;e++)u.push(e);const p=(e,a,d,l)=>{for(let l=0;l<e.length;l++)if(e[l].includes(a))return!!e[l].includes(d)&&(!0,t[c].land=!0,true)};p(d,g,m,s)?(l.target.style.background="",a.parentNode.removeChild(a),l.target.appendChild(a)):(a.parentNode.removeChild(a),l.target.style.background="",e(t),t[c].land=!1),e(t)}}),!1)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQWdCd0IsR0FBR1IsTUFBUWtDLElBQzFCQyxFQUFhbkQsRUFBZ0J3QixHQUFHTCxLQUNoQ2lDLEVBQVc1QixHQUduQixNQUFNNkIsRUFBZ0JOLEVBQ2hCTyxFQUFtQlAsRUFBY0ksRUFBYSxFQUM5Q0ksRUFBa0IsR0FFeEIsSUFBSSxJQUFJQyxFQUFJSCxFQUFlRyxHQUFLRixFQUFrQkUsSUFDOUNELEVBQWdCbkIsS0FBS29CLEdBR3pCLE1BQU1DLEVBQVMsQ0FBQ3hCLEVBQWVvQixFQUFlQyxFQUFrQlQsS0FDNUQsSUFBSSxJQUFJYSxFQUFJLEVBQUdBLEVBQUl6QixFQUFjM0IsT0FBUW9ELElBQ3JDLEdBQUd6QixFQUFjeUIsR0FBR0MsU0FBU04sR0FDekIsUUFBR3BCLEVBQWN5QixHQUFHQyxTQUFTTCxNQUNSLEVBQ2pCdEQsRUFBZ0JvRCxHQUFVN0MsTUFBTyxFQURoQixPQVc3QmtELEVBQU94QixFQUFlb0IsRUFBZUMsRUFBa0JULElBTXZEUCxFQUFFQyxPQUFPdEIsTUFBTTJCLFdBQWEsR0FDNUJqQixFQUFRaUMsV0FBV0MsWUFBWWxDLEdBQy9CVyxFQUFFQyxPQUFPYixZQUFZQyxLQVByQkEsRUFBUWlDLFdBQVdDLFlBQVlsQyxHQUMvQlcsRUFBRUMsT0FBT3RCLE1BQU0yQixXQUFhLEdBQzVCLEVBQVc1QyxHQUNYQSxFQUFnQm9ELEdBQVU3QyxNQUFPLEdBT3JDLEVBQVdQLE9BRWhCLEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2NvbXBvbmVudHMvZ2FtZUJvYXJkRmllbGRzLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvY29tcG9uZW50cy9jcmVhdGVTaGlwLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZ2FtZUJvYXJkRmllbGRzID0gKCkgPT4ge1xyXG4gICAgY29uc3QgZ2FtZUJvYXJkQ2xhc3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FtZWJvYXJkJyk7XHJcblxyXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IDEwOyBpKyspe1xyXG4gICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCAxMDsgaisrKXtcclxuICAgICAgICAgICAgaWYoaSA9PSAwICYmIGogPT0gMCl7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBnYW1lRmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5jbGFzc0xpc3QuYWRkKCdnYW1lRmllbGQnKTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5kYXRhc2V0LnJvdyA9IGk7XHJcbiAgICAgICAgICAgICAgICBnYW1lRmllbGQuZGF0YXNldC5jb2x1bW4gPSBqO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGRyYWdnYWJsZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgZHJhZ2dhYmxlRGl2LmlkID0gJ2RyYWdnYWJsZSc7XHJcbiAgICAgICAgICAgICAgICBkcmFnZ2FibGVEaXYuZHJhZ2dhYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGRyYWdnYWJsZURpdi5kYXRhc2V0LnJvdyA9IGk7XHJcbiAgICAgICAgICAgICAgICBkcmFnZ2FibGVEaXYuZGF0YXNldC5jb2x1bW4gPSBqO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICBnYW1lRmllbGQuYXBwZW5kQ2hpbGQoZHJhZ2dhYmxlRGl2KTtcclxuXHJcbiAgICAgICAgICAgICAgICBnYW1lQm9hcmRDbGFzcy5hcHBlbmRDaGlsZChnYW1lRmllbGQpO1xyXG5cclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBnYW1lRmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5jbGFzc0xpc3QuYWRkKCdnYW1lRmllbGQnKTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5kYXRhc2V0LnJvdyA9IGk7XHJcbiAgICAgICAgICAgICAgICBnYW1lRmllbGQuZGF0YXNldC5jb2x1bW4gPSBqO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBnYW1lQm9hcmRDbGFzcy5hcHBlbmRDaGlsZChnYW1lRmllbGQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBnYW1lQm9hcmRGaWVsZHM7IiwiY29uc3QgY3JlYXRlU2hpcCA9IChzaGlwTmFtZUFuZFNpemUpID0+IHtcclxuICAgIGNvbnN0IHNoaXBzQ2xhc3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2hpcHMnKTtcclxuXHJcbiAgICBzaGlwc0NsYXNzLnRleHRDb250ZW50ID0gJyc7XHJcblxyXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IHNoaXBOYW1lQW5kU2l6ZS5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgaWYoc2hpcE5hbWVBbmRTaXplW2ldLmxhbmQgPT0gdHJ1ZSl7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpcyBsYW5kJyk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGNvbnN0IHNoaXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgc2hpcC5jbGFzc0xpc3QuYWRkKCdzaGlwJyk7XHJcbiAgICAgICAgICAgIHNoaXAuZGF0YXNldC5pZCA9IHNoaXBOYW1lQW5kU2l6ZVtpXS5pZDtcclxuICAgICAgICAgICAgc2hpcC5jbGFzc0xpc3QuYWRkKHNoaXBOYW1lQW5kU2l6ZVtpXS5uYW1lKTtcclxuICAgICAgICAgICAgc2hpcC5zdHlsZS5ncmlkVGVtcGxhdGVDb2x1bW5zID0gYHJlcGVhdCgke3NoaXBOYW1lQW5kU2l6ZVtpXS5zaXplfSwgMWZyKWA7XHJcbiAgICAgICAgICAgIHNoaXAuc3R5bGUud2lkdGggPSBgY2FsYygke3NoaXBOYW1lQW5kU2l6ZVtpXS5pZH0gKiA1MHB4KWA7XHJcbiAgICAgICAgICAgIHNoaXAuc3R5bGUuaGVpZ2h0ID0gJzUwcHgnO1xyXG4gICAgICAgICAgICBzaGlwLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdibGFjayc7IFxyXG4gICAgICAgICAgICBzaGlwLmRyYWdnYWJsZSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgc2hpcE5hbWVBbmRTaXplW2ldLnNpemU7IGorKyl7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzcXVhcmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIHNxdWFyZS5jbGFzc0xpc3QuYWRkKCdzcXVhcmUnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzaGlwLmFwcGVuZENoaWxkKHNxdWFyZSk7XHJcbiAgICAgICAgICAgIH0gICBcclxuXHJcbiAgICAgICAgICAgIHNoaXBzQ2xhc3MuYXBwZW5kQ2hpbGQoc2hpcCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVTaGlwOyIsImltcG9ydCBnYW1lQm9hcmRGaWVsZHMgZnJvbSBcIi4vY29tcG9uZW50cy9nYW1lQm9hcmRGaWVsZHNcIjtcclxuaW1wb3J0IGNyZWF0ZVNoaXAgZnJvbSBcIi4vY29tcG9uZW50cy9jcmVhdGVTaGlwXCI7XHJcblxyXG5cclxuY29uc3Qgc2hpcE5hbWVBbmRTaXplID0gW1xyXG4gICAge25hbWU6ICdEZXN0cm95ZXInLCBzaXplOiAyLCBpZDogMiwgbGFuZDogZmFsc2V9LFxyXG4gICAge25hbWU6ICdTdWJtYXJpbmUnLCBzaXplOiAzLCBpZDogMywgbGFuZDogZmFsc2V9LFxyXG4gICAge25hbWU6ICdDcnVpc2VyJywgc2l6ZTogMywgaWQ6IDMsIGxhbmQ6IGZhbHNlfSxcclxuICAgIHtuYW1lOiAnQmF0dGxlc2hpcCcsIHNpemU6IDQsIGlkOiA0LCBsYW5kOiBmYWxzZX0sXHJcbiAgICB7bmFtZTogJ0NhcnJpZXInLCBzaXplOiA1LCBpZDogNSwgbGFuZDogZmFsc2V9LFxyXG5dXHJcblxyXG5jb25zdCBzaGlwID0gKGJvZHlMZW5ndGgsIHdoZXJlSGl0cywgc3VuaykgPT4ge1xyXG4gICAgXHJcbiAgICByZXR1cm57XHJcbiAgICAgICAgYm9keUxlbmd0aCxcclxuICAgICAgICB3aGVyZUhpdHMsXHJcbiAgICAgICAgc3VuayxcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgaGl0ID0gKGhpdFBvc2l0aW9uKSA9PiB7XHJcbiAgICBcclxuICAgIHJldHVybntcclxuICAgICAgICBoaXRQb3NpdGlvbixcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgaXNTdW5rID0gKGJvZHlMZW5ndGgpID0+IHtcclxuICAgIGNvbnN0IGhpdHMgPSBib2R5TGVuZ3RoIC0gc2hpcCgpLnN1bms7XHJcblxyXG4gICAgaWYoaGl0cyA9PSAwKXtcclxuICAgICAgICByZXR1cm4gJ3NoaXAgaXMgc3Vuayc7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGhpdHM7XHJcbn1cclxuXHJcbmdhbWVCb2FyZEZpZWxkcygpO1xyXG5jcmVhdGVTaGlwKHNoaXBOYW1lQW5kU2l6ZSk7XHJcblxyXG5sZXQgZHJhZ2dlZDtcclxuXHJcbmNvbnN0IGdhbWVGaWVsZHNBcnIgPSBbXTtcclxubGV0IGNvdW50ID0gMDtcclxuXHJcbmZvcihsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKXtcclxuICAgIGNvbnN0IG5ld0FyciA9IFtdO1xyXG5cclxuICAgIGZvcihsZXQgaiA9IDA7IGogPCAxMDsgaisrKXtcclxuICAgICAgICBuZXdBcnIucHVzaChjb3VudCk7XHJcbiAgICAgICAgY291bnQrKztcclxuICAgIH1cclxuICAgIGdhbWVGaWVsZHNBcnIucHVzaChuZXdBcnIpO1xyXG59XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ3N0YXJ0XCIsIChlKSA9PiB7XHJcbiAgICBkcmFnZ2VkID0gZS50YXJnZXQ7XHJcblxyXG4gICAgZS50YXJnZXQuc3R5bGUub3BhY2l0eSA9IC4zO1xyXG5cclxufSwgZmFsc2UpO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdlbmRcIiwgKGUpID0+IHtcclxuICAgIGUudGFyZ2V0LnN0eWxlLm9wYWNpdHkgPSBcIlwiO1xyXG4gICAgZS50YXJnZXQuZGF0YXNldC5yb3cgPSBlLnRhcmdldC5maXJzdENoaWxkLmRhdGFzZXQucm93O1xyXG4gICAgZS50YXJnZXQuZGF0YXNldC5jb2x1bW4gPSBlLnRhcmdldC5maXJzdENoaWxkLmRhdGFzZXQuY29sdW1uO1xyXG59LCBmYWxzZSk7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ292ZXJcIiwgKGUpID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxufSwgZmFsc2UpO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdlbnRlclwiLCAoZSkgPT4ge1xyXG4gICAgaWYoZS50YXJnZXQuY2xhc3NOYW1lID09IFwiZ2FtZUZpZWxkXCIpe1xyXG4gICAgICAgIGUudGFyZ2V0LnN0eWxlLmJhY2tncm91bmQgPSBcInllbGxvd1wiO1xyXG4gICAgfVxyXG59LCBmYWxzZSk7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ2xlYXZlXCIsIChlKSA9PiB7XHJcblxyXG4gICAgaWYgKGUudGFyZ2V0LmNsYXNzTmFtZSA9PSBcImdhbWVGaWVsZFwiKXtcclxuICAgICAgICBlLnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kID0gXCJcIjtcclxuICAgIH1cclxufSwgZmFsc2UpO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyb3BcIiwgKGUpID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICBpZihlLnRhcmdldC5jbGFzc05hbWUgPT0gJ2dhbWVGaWVsZCcpe1xyXG4gICAgICAgIGUudGFyZ2V0LnN0eWxlLmJhY2tncm91bmQgPSBcIlwiO1xyXG4gICAgICAgIGUudGFyZ2V0LmFwcGVuZENoaWxkKGRyYWdnZWQpO1xyXG5cclxuICAgICAgICBsZXQgc2hpcElzR29vZFNpemUgPSBmYWxzZTtcclxuIFxyXG4gICAgICAgIGxldCByZXN1bHRQb3NpdGlvbiA9IGUudGFyZ2V0LmRhdGFzZXQucm93ICsgZS50YXJnZXQuZGF0YXNldC5jb2x1bW47XHJcblxyXG4gICAgICAgIGxldCBzdHJpbmdUb0ludCA9IE51bWJlcihyZXN1bHRQb3NpdGlvbik7XHJcblxyXG4gICAgICAgIGxldCByb3cgPSByZXN1bHRQb3NpdGlvbi5zcGxpdCgnJylbMF07XHJcbiAgICAgICAgbGV0IGNvbHVtbiA9IHJlc3VsdFBvc2l0aW9uLnNwbGl0KCcnKVsxXTtcclxuICAgIFxyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCByZXN1bHRQb3NpdGlvbi5zcGxpdCgnJykubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICBpZihyZXN1bHRQb3NpdGlvbi5zcGxpdCgnJylbMF0gPT0gMCl7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRQb3NpdGlvbiA9IHJlc3VsdFBvc2l0aW9uLnNwbGl0KCcnKVsxXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gICBcclxuXHJcbiAgICAgICAgY29uc3QgbmFtZVNoaXAgPSBlLnRhcmdldC5maXJzdENoaWxkLmNsYXNzTmFtZS5zcGxpdCgnICcpWzFdO1xyXG4gICAgICAgIGxldCBsZW5ndGhTaGlwO1xyXG5cclxuICAgICAgICBsZXQgaW5kZXhPYmo7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IHNoaXBOYW1lQW5kU2l6ZS5sZW5ndGg7IGorKyl7XHJcbiAgICAgICAgICAgIGlmKHNoaXBOYW1lQW5kU2l6ZVtqXS5uYW1lID09IG5hbWVTaGlwKXtcclxuICAgICAgICAgICAgICAgIGxlbmd0aFNoaXAgPSBzaGlwTmFtZUFuZFNpemVbal0uc2l6ZTtcclxuICAgICAgICAgICAgICAgIGluZGV4T2JqID0galxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGZpcnN0UG9zaXRpb24gPSBzdHJpbmdUb0ludDtcclxuICAgICAgICBjb25zdCBsYXN0U2hpcFBvc2l0aW9uID0gc3RyaW5nVG9JbnQgKyBsZW5ndGhTaGlwIC0gMTtcclxuICAgICAgICBjb25zdCBzaGlwQXJyUG9zaXRpb24gPSBbXTtcclxuXHJcbiAgICAgICAgZm9yKGxldCB4ID0gZmlyc3RQb3NpdGlvbjsgeCA8PSBsYXN0U2hpcFBvc2l0aW9uOyB4Kyspe1xyXG4gICAgICAgICAgICBzaGlwQXJyUG9zaXRpb24ucHVzaCh4KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGlzVHJ1ZSA9IChnYW1lRmllbGRzQXJyLCBmaXJzdFBvc2l0aW9uLCBsYXN0U2hpcFBvc2l0aW9uLCBzaGlwSXNHb29kU2l6ZSkgPT4ge1xyXG4gICAgICAgICAgICBmb3IobGV0IG4gPSAwOyBuIDwgZ2FtZUZpZWxkc0Fyci5sZW5ndGg7IG4rKyl7XHJcbiAgICAgICAgICAgICAgICBpZihnYW1lRmllbGRzQXJyW25dLmluY2x1ZGVzKGZpcnN0UG9zaXRpb24pKXtcclxuICAgICAgICAgICAgICAgICAgICBpZihnYW1lRmllbGRzQXJyW25dLmluY2x1ZGVzKGxhc3RTaGlwUG9zaXRpb24pKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hpcElzR29vZFNpemUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGlwTmFtZUFuZFNpemVbaW5kZXhPYmpdLmxhbmQgPSB0cnVlO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzaGlwSXNHb29kU2l6ZTtcclxuICAgICAgICAgICAgICAgICAgICB9OyBcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzaGlwSXNHb29kU2l6ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZighaXNUcnVlKGdhbWVGaWVsZHNBcnIsIGZpcnN0UG9zaXRpb24sIGxhc3RTaGlwUG9zaXRpb24sIHNoaXBJc0dvb2RTaXplKSl7XHJcbiAgICAgICAgICAgIGRyYWdnZWQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkcmFnZ2VkKTtcclxuICAgICAgICAgICAgZS50YXJnZXQuc3R5bGUuYmFja2dyb3VuZCA9IFwiXCI7XHJcbiAgICAgICAgICAgIGNyZWF0ZVNoaXAoc2hpcE5hbWVBbmRTaXplKTtcclxuICAgICAgICAgICAgc2hpcE5hbWVBbmRTaXplW2luZGV4T2JqXS5sYW5kID0gZmFsc2U7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGUudGFyZ2V0LnN0eWxlLmJhY2tncm91bmQgPSBcIlwiO1xyXG4gICAgICAgICAgICBkcmFnZ2VkLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZHJhZ2dlZCk7XHJcbiAgICAgICAgICAgIGUudGFyZ2V0LmFwcGVuZENoaWxkKGRyYWdnZWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY3JlYXRlU2hpcChzaGlwTmFtZUFuZFNpemUpOyAgXHJcbiAgICB9XHJcbn0sIGZhbHNlKTsiXSwibmFtZXMiOlsic2hpcE5hbWVBbmRTaXplIiwic2hpcHNDbGFzcyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInRleHRDb250ZW50IiwiaSIsImxlbmd0aCIsImxhbmQiLCJjb25zb2xlIiwibG9nIiwic2hpcCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJkYXRhc2V0IiwiaWQiLCJuYW1lIiwic3R5bGUiLCJncmlkVGVtcGxhdGVDb2x1bW5zIiwic2l6ZSIsIndpZHRoIiwiaGVpZ2h0IiwiYmFja2dyb3VuZENvbG9yIiwiZHJhZ2dhYmxlIiwiaiIsInNxdWFyZSIsImFwcGVuZENoaWxkIiwiZHJhZ2dlZCIsImdhbWVCb2FyZENsYXNzIiwiZ2FtZUZpZWxkIiwicm93IiwiY29sdW1uIiwiZHJhZ2dhYmxlRGl2IiwiZ2FtZUZpZWxkc0FyciIsImNvdW50IiwibmV3QXJyIiwicHVzaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwidGFyZ2V0Iiwib3BhY2l0eSIsImZpcnN0Q2hpbGQiLCJwcmV2ZW50RGVmYXVsdCIsImNsYXNzTmFtZSIsImJhY2tncm91bmQiLCJzaGlwSXNHb29kU2l6ZSIsInJlc3VsdFBvc2l0aW9uIiwic3RyaW5nVG9JbnQiLCJOdW1iZXIiLCJzcGxpdCIsIm5hbWVTaGlwIiwibGVuZ3RoU2hpcCIsImluZGV4T2JqIiwiZmlyc3RQb3NpdGlvbiIsImxhc3RTaGlwUG9zaXRpb24iLCJzaGlwQXJyUG9zaXRpb24iLCJ4IiwiaXNUcnVlIiwibiIsImluY2x1ZGVzIiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIl0sInNvdXJjZVJvb3QiOiIifQ==