(()=>{"use strict";const t=t=>{const e=document.querySelector(".gameboard");e.textContent="";for(let o=0;o<10;o++)for(let n=0;n<10;n++)if("x"==t[o][n]){const t=document.createElement("div");t.classList.add("checked"),t.dataset.row=o,t.dataset.column=n,e.appendChild(t)}else if("y"==t[o][n]){const t=document.createElement("div");t.classList.add("blocked"),t.dataset.row=o,t.dataset.column=n,e.appendChild(t)}else{const t=document.createElement("div");t.classList.add("gameField"),t.dataset.row=o,t.dataset.column=n,e.appendChild(t)}},e=t=>{const e=document.querySelector(".ships");e.textContent="";for(let o=0;o<t.length;o++)if(1==t[o].land);else{const n=document.createElement("div");n.classList.add("ship"),n.dataset.id=t[o].id,n.classList.add(t[o].name),n.style.gridTemplateColumns=`repeat(${t[o].size}, 1fr)`,n.style.width=`calc(${t[o].id} * 50px)`,n.style.height="50px",n.style.backgroundColor="black",n.draggable=!0;for(let e=0;e<t[o].size;e++){const t=document.createElement("div");t.classList.add("square"),n.appendChild(t)}e.appendChild(n)}},o=t=>{const e=document.querySelector(".computerGameBoard");e.textContent="";for(let o=0;o<10;o++)for(let n=0;n<10;n++)if("X"==t[o][n]){const t=document.createElement("div");t.classList.add("plays"),t.dataset.row=o,t.dataset.column=n,e.appendChild(t)}else{const t=document.createElement("div");t.classList.add("field"),t.dataset.row=o,t.dataset.column=n,e.appendChild(t)}},n=()=>({rowChoice:Math.floor(9*Math.random()),columnChoice:Math.floor(99*Math.random())}),l=[];let i=0;for(let t=0;t<10;t++){const t=[];for(let e=0;e<10;e++)t.push(i),i++;l.push(t)}const s=[{name:"Destroyer",size:2,id:2,land:!1,position:[]},{name:"Submarine",size:3,id:3,land:!1,position:[]},{name:"Cruiser",size:3,id:3,land:!1,position:[]},{name:"Battleship",size:4,id:4,land:!1,position:[]},{name:"Carrier",size:5,id:5,land:!1,position:[]}],r=[{name:"Destroyer",size:2,position:[]},{name:"Submarine",size:3,position:[]},{name:"Cruiser",size:3,position:[]},{name:"Battleship",size:4,position:[]},{name:"Carrier",size:5,position:[]}];let a=[];const d=t=>{for(let e=0;e<100;e++)t.push(e)};d([]),d(a);const c=t=>"X"!==t;let p=[];for(let t=0;t<10;t++){const t=[];for(let e=0;e<10;e++)t.push(i),i++;p.push(t)}(()=>{n().rowChoice,n().columnChoice,p.length=0;let t=0;for(let e=0;e<10;e++){const e=[];for(let o=0;o<10;o++)e.push(t),t++;p.push(e)}let e=0;o(p);for(let t=0;t<1e3;t++){for(let t=0;t<r.length;t++)r[t].position.every(c)||(r[t].position.length=0);if(r[0].position.length&&r[1].position.length&&r[2].position.length&&r[3].position.length&&r[4].position.length){for(let t=0;t<10;t++)p[t].filter((t=>"X"==t))&&(e+=p[t].filter((t=>"X"==t)).length);return console.log(e),{computerArr:p,shipNameAndSizeComputer:r}}for(let t=0;t<r.length;t++)if(r[t].position.length>1);else{const e=(l=t,Math.floor(94*Math.random())+r[l].size);let o,n;1==e.toString().length?(o=0,n=Number(e.toString().split("")[0])):(o=Number(e.toString().split("")[0]),n=Number(e.toString().split("")[1]));const i=p[o].findIndex((t=>t==e));if(i>0&&i-r[t].size>=0)for(let e=0;e<r[t].size;e++)r[t].position.push(p[o][i-e]),p[o][i-e]="X"}}var l})();const g=[];let h=0;for(let t=0;t<10;t++){const t=[];for(let e=0;e<10;e++)t.push(h),h++;g.push(t)}let u,m=0;(()=>{for(let t=0;t<r.length;t++)for(let e=0;e<r[t].position.length;e++){let o,n;1==r[t].position[e].toString().split("").length?(o=0,n=Number(r[t].position[e].toString().split("")[0])):(o=r[t].position[e].toString().split("")[0],n=r[t].position[e].toString().split("")[1]),m++,g[o][n]="X"}})(),console.log(g,m),o(g),t(l),e(s),document.addEventListener("dragstart",(t=>{u=t.target,t.target.style.opacity=.3}),!1),document.addEventListener("dragend",(t=>{t.target.style.opacity="",t.target.dataset.row=t.target.firstChild.dataset.row,t.target.dataset.column=t.target.firstChild.dataset.column}),!1),document.addEventListener("dragover",(t=>{t.preventDefault()}),!1),document.addEventListener("dragenter",(t=>{"gameField"==t.target.className&&(t.target.style.background="yellow")}),!1),document.addEventListener("dragleave",(t=>{"gameField"==t.target.className&&(t.target.style.background="")}),!1),document.addEventListener("drop",(o=>{if(o.preventDefault(),"gameField"==o.target.className){o.target.style.background="",o.target.appendChild(u);let n=!1,i=o.target.dataset.row+o.target.dataset.column,r=Number(i);for(let t=0;t<i.split("").length;t++)0==i.split("")[0]&&(i=i.split("")[1]);const a=o.target.firstChild.className.split(" ")[1];let d,c;for(let t=0;t<s.length;t++)s[t].name==a&&(d=s[t].size,c=t);const p=r,g=r+d-1,h=[];for(let t=p;t<=g;t++)h.push(t);const m=(t,e,o,n)=>{for(let n=0;n<t.length;n++)if(t[n].includes(e))return!!t[n].includes(o)&&(!0,s[c].land=!0,true)};if(e(s),m(l,p,g,n)){o.target.style.background="",u.parentNode.removeChild(u),o.target.appendChild(u);for(let t=0;t<l.length;t++)for(let e=0;e<l[t].length;e++)if(l[t][e]==p)if(0==l[t][e]){for(let o=0;o<d;o++)s[c].position.push(l[t][e+o]),l[t][e+o]="x";l[t+1][e]="y";for(let o=0;o<d;o++)l[t+1][e+o]="y";l[t][e+d]="y"}else if(l[t][e]==l[0][e]){for(let o=0;o<d;o++)s[c].position.push(l[t][e+o]),l[t][e+o]="x";l[t+1][e]="y";for(let o=0;o<d;o++)l[t+1][e+o]="y";l[t][p-1]="y",l[t][g+1]="y"}else if(l[t][e]==l[9][e]&&0!=e){for(let o=0;o<d;o++)s[c].position.push(l[t][e+o]),l[t][e+o]="x";for(let o=0;o<d;o++)l[t-1][e+o]="y";l[t][d+e]="y",l[t][e-1]="y"}else if(l[t][e]==l[9][e]){for(let o=0;o<d;o++)s[c].position.push(l[t][e+o]),l[t][e+o]="x";for(let o=0;o<d;o++)l[t-1][e+o]="y";l[t][d]="y"}else{for(let o=0;o<d;o++)s[c].position.push(l[t][e+o]),l[t][e+o]="x";l[t+1][e]="y",l[t-1][e]="y",l[t][e-1]="y",l[t][e+d]="y";for(let o=0;o<d;o++)l[t+1][e+o]="y",l[t-1][e+o]="y"}u.parentNode.removeChild(u)}else u.parentNode.removeChild(u),o.target.style.background="",e(s),s[c].land=!1,t(l);e(s)}t(l),(t=>{let e=0;for(let o=0;o<t.length;o++)t[o].position.length&&e++;return 5==e})(s)&&f()}),!1);const f=()=>{const t=document.querySelector(".ships");t.parentNode.removeChild(t),[...document.querySelector(".computerGameBoard").childNodes].forEach((t=>{t.addEventListener("click",(t=>{if(t.target.classList.contains("plays")){let e=[];const o=Number(String(t.target.dataset.row)+String(t.target.dataset.column));for(let t=0;t<r.length;t++)for(let e=0;e<r[t].position.length;e++)r[t].position[e]==o&&r[t].position.splice(e,1);t.target.classList.add("field"),t.target.classList.remove("plays");for(let t=0;t<r.length;t++)0==r[t].position.length&&e.push("true");if(5==e.length)return void C("you, [player]")}y(),console.log(a.length),console.log(s)}))}))},y=()=>{for(let t=0;t<1e3;t++){const t=Math.floor(99*Math.random());if(a.findIndex((e=>e==t))>-1){let e,o,n=a.findIndex((e=>e==t));1==t.toString().split("").length?(e=0,o=Number(t.toString().split("")[0])):(e=Number(t.toString().split("")[0]),o=Number(t.toString().split("")[1]));let l=a.splice(n,1);if(l){for(let t=0;t<s.length;t++)for(let e=0;e<s[t].position.length;e++)if(s[t].position[e]==l){s[t].position.splice(e,1),console.log("Computer blow",a.length);let o=[];for(let t=0;t<s.length;t++)0==s[t].position.length&&o.push("true");return 5==o.length?void C("computer"):void 0}let t=[];for(let e=0;e<s.length;e++)for(let o=0;o<s[e].position.length;o++)t.push(s[e].position[o]);return void console.log("You not blow",a.length,t.length)}}}},C=t=>{const e=document.querySelector(".game"),o=document.createElement("div");o.classList.add("fixedWinnerPage");const n=document.createElement("h1");n.textContent=`The winner is [${t}]`,o.appendChild(n),e.appendChild(o)}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFBSSxJQUFJOUMsRUFBSSxFQUFHQSxFQUFJcEMsRUFBZ0JFLE9BQVFrQyxJQUNFLEdBQXRDcEMsRUFBZ0JvQyxHQUFHWCxTQUFTdkIsUUFDM0JnRixFQUFlMUQsS0FBSyxRQUk1QixPQUE0QixHQUF6QjBELEVBQWVoRixZQUNkcUYsRUFBVyxpQkFJZixFQUtaLElBQUlLLEVBQW9CLEdBRXhCLElBQUksSUFBSTNELEVBQUksRUFBR0EsRUFBSWpDLEVBQWdCRSxPQUFRK0IsSUFDdkMsSUFBSSxJQUFJNEQsRUFBSSxFQUFHQSxFQUFJN0YsRUFBZ0JpQyxHQUFHUixTQUFTdkIsT0FBUTJGLElBQ25ERCxFQUFrQnBFLEtBQUt4QixFQUFnQmlDLEdBQUdSLFNBQVNvRSxJQU0zRCxZQUZBdkQsUUFBUUMsSUFBSSxlQUFnQlosRUFBb0J6QixPQUFRMEYsRUFBa0IxRixZQVFwRnFGLEVBQWNPLElBQ2hCLE1BQU1DLEVBQU81RyxTQUFTQyxjQUFjLFNBRTlCNEcsRUFBa0I3RyxTQUFTTSxjQUFjLE9BQy9DdUcsRUFBZ0J0RyxVQUFVQyxJQUFJLG1CQUU5QixNQUFNc0csRUFBSzlHLFNBQVNNLGNBQWMsTUFDbEN3RyxFQUFHNUcsWUFBYyxrQkFBa0J5RyxLQUVuQ0UsRUFBZ0JqRyxZQUFZa0csR0FFNUJGLEVBQUtoRyxZQUFZaUcsSyIsInNvdXJjZXMiOlsid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvY29tcG9uZW50cy9nYW1lQm9hcmRGaWVsZHMuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9jb21wb25lbnRzL2NyZWF0ZVNoaXAuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9jb21wb25lbnRzL2NvbXB1dGVyR2FtZUJvYXJkRmllbGQuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9jb21wb25lbnRzL2NvbXB1dGVyQ2hvaWNlLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZ2FtZUJvYXJkRmllbGRzID0gKGdhbWVGaWVsZHNBcnIpID0+IHtcclxuICAgIGNvbnN0IGdhbWVCb2FyZENsYXNzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdhbWVib2FyZCcpO1xyXG5cclxuICAgIGdhbWVCb2FyZENsYXNzLnRleHRDb250ZW50ID0gJyc7XHJcblxyXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IDEwOyBpKyspe1xyXG4gICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCAxMDsgaisrKXtcclxuICAgICAgICAgICAgaWYoZ2FtZUZpZWxkc0FycltpXVtqXSA9PSAneCcpe1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZ2FtZUZpZWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBnYW1lRmllbGQuY2xhc3NMaXN0LmFkZCgnY2hlY2tlZCcpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmRhdGFzZXQucm93ID0gaTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5kYXRhc2V0LmNvbHVtbiA9IGo7XHJcblxyXG4gICAgICAgICAgICAgICAgZ2FtZUJvYXJkQ2xhc3MuYXBwZW5kQ2hpbGQoZ2FtZUZpZWxkKTtcclxuICAgICAgICAgICAgfWVsc2UgaWYoZ2FtZUZpZWxkc0FycltpXVtqXSA9PSAneScpe1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZ2FtZUZpZWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBnYW1lRmllbGQuY2xhc3NMaXN0LmFkZCgnYmxvY2tlZCcpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmRhdGFzZXQucm93ID0gaTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5kYXRhc2V0LmNvbHVtbiA9IGo7XHJcblxyXG4gICAgICAgICAgICAgICAgZ2FtZUJvYXJkQ2xhc3MuYXBwZW5kQ2hpbGQoZ2FtZUZpZWxkKTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBnYW1lRmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5jbGFzc0xpc3QuYWRkKCdnYW1lRmllbGQnKTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5kYXRhc2V0LnJvdyA9IGk7XHJcbiAgICAgICAgICAgICAgICBnYW1lRmllbGQuZGF0YXNldC5jb2x1bW4gPSBqO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBnYW1lQm9hcmRDbGFzcy5hcHBlbmRDaGlsZChnYW1lRmllbGQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBnYW1lQm9hcmRGaWVsZHM7IiwiY29uc3QgY3JlYXRlU2hpcCA9IChzaGlwTmFtZUFuZFNpemUpID0+IHtcclxuICAgIGNvbnN0IHNoaXBzQ2xhc3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2hpcHMnKTtcclxuXHJcbiAgICBzaGlwc0NsYXNzLnRleHRDb250ZW50ID0gJyc7XHJcblxyXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IHNoaXBOYW1lQW5kU2l6ZS5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgaWYoc2hpcE5hbWVBbmRTaXplW2ldLmxhbmQgPT0gdHJ1ZSl7XHJcblxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBjb25zdCBzaGlwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIHNoaXAuY2xhc3NMaXN0LmFkZCgnc2hpcCcpO1xyXG4gICAgICAgICAgICBzaGlwLmRhdGFzZXQuaWQgPSBzaGlwTmFtZUFuZFNpemVbaV0uaWQ7XHJcbiAgICAgICAgICAgIHNoaXAuY2xhc3NMaXN0LmFkZChzaGlwTmFtZUFuZFNpemVbaV0ubmFtZSk7XHJcbiAgICAgICAgICAgIHNoaXAuc3R5bGUuZ3JpZFRlbXBsYXRlQ29sdW1ucyA9IGByZXBlYXQoJHtzaGlwTmFtZUFuZFNpemVbaV0uc2l6ZX0sIDFmcilgO1xyXG4gICAgICAgICAgICBzaGlwLnN0eWxlLndpZHRoID0gYGNhbGMoJHtzaGlwTmFtZUFuZFNpemVbaV0uaWR9ICogNTBweClgO1xyXG4gICAgICAgICAgICBzaGlwLnN0eWxlLmhlaWdodCA9ICc1MHB4JztcclxuICAgICAgICAgICAgc2hpcC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnYmxhY2snOyBcclxuICAgICAgICAgICAgc2hpcC5kcmFnZ2FibGUgPSB0cnVlO1xyXG5cclxuXHJcbiAgICAgICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCBzaGlwTmFtZUFuZFNpemVbaV0uc2l6ZTsgaisrKXtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNxdWFyZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgc3F1YXJlLmNsYXNzTGlzdC5hZGQoJ3NxdWFyZScpO1xyXG5cclxuICAgICAgICAgICAgICAgIHNoaXAuYXBwZW5kQ2hpbGQoc3F1YXJlKTtcclxuICAgICAgICAgICAgfSAgIFxyXG5cclxuICAgICAgICAgICAgc2hpcHNDbGFzcy5hcHBlbmRDaGlsZChzaGlwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZVNoaXA7IiwiY29uc3QgY29tcHV0ZXJHYW1lQm9hcmRGaWVsZCA9IChjb21wdXRlckFycikgPT4ge1xyXG4gICAgXHJcbiAgICBjb25zdCBjb21wdXRlckdhbWVib2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb21wdXRlckdhbWVCb2FyZCcpO1xyXG4gICAgY29tcHV0ZXJHYW1lYm9hcmQudGV4dENvbnRlbnQgPSAnJztcclxuXHJcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgMTA7IGkrKyl7XHJcbiAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IDEwOyBqKyspe1xyXG4gICAgICAgICAgICBpZihjb21wdXRlckFycltpXVtqXSA9PSAnWCcpe1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZ2FtZUZpZWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBnYW1lRmllbGQuY2xhc3NMaXN0LmFkZCgncGxheXMnKTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5kYXRhc2V0LnJvdyA9IGk7XHJcbiAgICAgICAgICAgICAgICBnYW1lRmllbGQuZGF0YXNldC5jb2x1bW4gPSBqO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb21wdXRlckdhbWVib2FyZC5hcHBlbmRDaGlsZChnYW1lRmllbGQpO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGdhbWVGaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmNsYXNzTGlzdC5hZGQoJ2ZpZWxkJyk7XHJcbiAgICAgICAgICAgICAgICBnYW1lRmllbGQuZGF0YXNldC5yb3cgPSBpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmRhdGFzZXQuY29sdW1uID0gajtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29tcHV0ZXJHYW1lYm9hcmQuYXBwZW5kQ2hpbGQoZ2FtZUZpZWxkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY29tcHV0ZXJHYW1lQm9hcmRGaWVsZDsiLCJjb25zdCBjb21wdGVyQ2hvaWNlID0gKCkgPT4ge1xyXG4gICAgY29uc3Qgcm93Q2hvaWNlID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogOSk7XHJcbiAgICBjb25zdCBjb2x1bW5DaG9pY2UgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA5OSk7XHJcblxyXG4gICAgcmV0dXJue1xyXG4gICAgICAgIHJvd0Nob2ljZSxcclxuICAgICAgICBjb2x1bW5DaG9pY2UsXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNvbXB0ZXJDaG9pY2U7IiwiaW1wb3J0IGdhbWVCb2FyZEZpZWxkcyBmcm9tIFwiLi9jb21wb25lbnRzL2dhbWVCb2FyZEZpZWxkc1wiO1xyXG5pbXBvcnQgY3JlYXRlU2hpcCBmcm9tIFwiLi9jb21wb25lbnRzL2NyZWF0ZVNoaXBcIjtcclxuaW1wb3J0IGNvbXB1dGVyR2FtZUJvYXJkRmllbGQgZnJvbSBcIi4vY29tcG9uZW50cy9jb21wdXRlckdhbWVCb2FyZEZpZWxkXCI7XHJcbmltcG9ydCBjb21wdGVyQ2hvaWNlIGZyb20gJy4vY29tcG9uZW50cy9jb21wdXRlckNob2ljZSc7XHJcblxyXG5jb25zdCBnYW1lRmllbGRzQXJyID0gW107XHJcbmxldCBjb3VudCA9IDA7XHJcblxyXG5mb3IobGV0IGkgPSAwOyBpIDwgMTA7IGkrKyl7XHJcbiAgICBjb25zdCBuZXdBcnIgPSBbXTtcclxuXHJcbiAgICBmb3IobGV0IGogPSAwOyBqIDwgMTA7IGorKyl7XHJcbiAgICAgICAgbmV3QXJyLnB1c2goY291bnQpO1xyXG4gICAgICAgIGNvdW50Kys7XHJcbiAgICB9XHJcbiAgICBnYW1lRmllbGRzQXJyLnB1c2gobmV3QXJyKTtcclxufVxyXG5cclxuY29uc3Qgc2hpcE5hbWVBbmRTaXplID0gW1xyXG4gICAge25hbWU6ICdEZXN0cm95ZXInLCBzaXplOiAyLCBpZDogMiwgbGFuZDogZmFsc2UsIHBvc2l0aW9uOiBbXX0sXHJcbiAgICB7bmFtZTogJ1N1Ym1hcmluZScsIHNpemU6IDMsIGlkOiAzLCBsYW5kOiBmYWxzZSwgcG9zaXRpb246IFtdfSxcclxuICAgIHtuYW1lOiAnQ3J1aXNlcicsIHNpemU6IDMsIGlkOiAzLCBsYW5kOiBmYWxzZSwgcG9zaXRpb246IFtdfSxcclxuICAgIHtuYW1lOiAnQmF0dGxlc2hpcCcsIHNpemU6IDQsIGlkOiA0LCBsYW5kOiBmYWxzZSwgcG9zaXRpb246IFtdfSxcclxuICAgIHtuYW1lOiAnQ2FycmllcicsIHNpemU6IDUsIGlkOiA1LCBsYW5kOiBmYWxzZSwgcG9zaXRpb246IFtdfSxcclxuXVxyXG5cclxuY29uc3Qgc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXIgPSBbXHJcbiAgICB7bmFtZTogJ0Rlc3Ryb3llcicsIHNpemU6IDIsIHBvc2l0aW9uOiBbXX0sXHJcbiAgICB7bmFtZTogJ1N1Ym1hcmluZScsIHNpemU6IDMsIHBvc2l0aW9uOiBbXX0sXHJcbiAgICB7bmFtZTogJ0NydWlzZXInLCBzaXplOiAzLCBwb3NpdGlvbjogW119LFxyXG4gICAge25hbWU6ICdCYXR0bGVzaGlwJywgc2l6ZTogNCwgcG9zaXRpb246IFtdfSxcclxuICAgIHtuYW1lOiAnQ2FycmllcicsIHNpemU6IDUsIHBvc2l0aW9uOiBbXX0sXHJcbl1cclxuXHJcbmxldCBjb21wdXRlclBsYXlzUmFuZG9tID0gW107XHJcbmxldCBwbGF5ZXJJbmRleFBsYXlzID0gW107XHJcblxyXG5jb25zdCBhZGRIdW5kcmVkTnVtYmVycyA9IChhcnIpID0+IHtcclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCAxMDA7IGkrKyl7XHJcbiAgICAgICAgYXJyLnB1c2goaSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmFkZEh1bmRyZWROdW1iZXJzKHBsYXllckluZGV4UGxheXMpO1xyXG5hZGRIdW5kcmVkTnVtYmVycyhjb21wdXRlclBsYXlzUmFuZG9tKTtcclxuXHJcbmNvbnN0IHRydWVPckZhbHNlID0gKGl0ZW0pID0+IHtcclxuICAgIHJldHVybiBpdGVtICE9PSAnWCc7XHJcbn1cclxuXHJcbmxldCBjb21wdXRlckFyciA9IFtdO1xyXG5cclxuZm9yKGxldCBpID0gMDsgaSA8IDEwOyBpKyspe1xyXG4gICAgY29uc3QgbmV3QXJyID0gW107XHJcblxyXG4gICAgZm9yKGxldCBqID0gMDsgaiA8IDEwOyBqKyspe1xyXG4gICAgICAgIG5ld0Fyci5wdXNoKGNvdW50KTtcclxuICAgICAgICBjb3VudCsrO1xyXG4gICAgfVxyXG4gICAgY29tcHV0ZXJBcnIucHVzaChuZXdBcnIpO1xyXG59XHJcblxyXG5jb25zdCBjb21wdXRlciA9ICgpID0+IHtcclxuICAgIGNvbnN0IHJvdyA9IGNvbXB0ZXJDaG9pY2UoKS5yb3dDaG9pY2U7XHJcbiAgICBjb25zdCBjb2x1bW4gPSBjb21wdGVyQ2hvaWNlKCkuY29sdW1uQ2hvaWNlO1xyXG4gICAgY29tcHV0ZXJBcnIubGVuZ3RoID0gMDtcclxuXHJcbiAgICBjb25zdCByYW5kb21Qb3NpdGlvbiA9IChudW0pID0+IHtcclxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogOTQpICsgc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbbnVtXS5zaXplO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBjb3VudCA9IDA7XHJcblxyXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IDEwOyBpKyspe1xyXG4gICAgICAgIGNvbnN0IG5ld0FyciA9IFtdO1xyXG4gICAgXHJcbiAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IDEwOyBqKyspe1xyXG4gICAgICAgICAgICBuZXdBcnIucHVzaChjb3VudCk7XHJcbiAgICAgICAgICAgIGNvdW50Kys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbXB1dGVyQXJyLnB1c2gobmV3QXJyKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgY291bnRBcnIgPSAwO1xyXG5cclxuICAgIGNvbXB1dGVyR2FtZUJvYXJkRmllbGQoY29tcHV0ZXJBcnIpO1xyXG5cclxuICAgIGZvcihsZXQgYiA9IDA7IGIgPCAxMDAwOyBiKyspe1xyXG4gICAgICAgIGZvcihsZXQgeCA9IDA7IHggPCBzaGlwTmFtZUFuZFNpemVDb21wdXRlci5sZW5ndGg7IHgrKyl7XHJcbiAgICAgICAgICAgIGlmKHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW3hdLnBvc2l0aW9uLmV2ZXJ5KHRydWVPckZhbHNlKSl7XHJcblxyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW3hdLnBvc2l0aW9uLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyWzBdLnBvc2l0aW9uLmxlbmd0aCAmJiBzaGlwTmFtZUFuZFNpemVDb21wdXRlclsxXS5wb3NpdGlvbi5sZW5ndGggJiYgc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbMl0ucG9zaXRpb24ubGVuZ3RoICYmIHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyWzNdLnBvc2l0aW9uLmxlbmd0aCAmJiBzaGlwTmFtZUFuZFNpemVDb21wdXRlcls0XS5wb3NpdGlvbi5sZW5ndGgpe1xyXG4gICAgICAgICAgICBmb3IobGV0IG8gPSAwOyBvIDwgMTA7IG8rKyl7XHJcbiAgICAgICAgICAgICAgICBpZihjb21wdXRlckFycltvXS5maWx0ZXIoaXRlbSA9PiAgaXRlbSA9PSAnWCcpKXtcclxuICAgICAgICAgICAgICAgICAgICBjb3VudEFyciArPSBjb21wdXRlckFycltvXS5maWx0ZXIoaXRlbSA9PiBpdGVtID09ICdYJykubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhjb3VudEFycik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgY29tcHV0ZXJBcnIsXHJcbiAgICAgICAgICAgICAgICBzaGlwTmFtZUFuZFNpemVDb21wdXRlcixcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgIGlmKHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW2ldLnBvc2l0aW9uLmxlbmd0aCA+IDEpe1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHJhbmRvbVBvc2l0aW9uKGkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCByb3c7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNvbHVtbjtcclxuICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmKHZhbHVlLnRvU3RyaW5nKCkubGVuZ3RoID09IDEpe1xyXG4gICAgICAgICAgICAgICAgICAgIHJvdyA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gTnVtYmVyKHZhbHVlLnRvU3RyaW5nKCkuc3BsaXQoJycpWzBdKTtcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIHJvdyA9IE51bWJlcih2YWx1ZS50b1N0cmluZygpLnNwbGl0KCcnKVswXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gTnVtYmVyKHZhbHVlLnRvU3RyaW5nKCkuc3BsaXQoJycpWzFdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpbmRJbmRleENvbXB1dGVyID0gY29tcHV0ZXJBcnJbcm93XS5maW5kSW5kZXgoaXRlbSA9PiBpdGVtID09IHZhbHVlKTtcclxuICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmKGZpbmRJbmRleENvbXB1dGVyID4gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZmluZEluZGV4Q29tcHV0ZXIgLSBzaGlwTmFtZUFuZFNpemVDb21wdXRlcltpXS5zaXplID49IDApeyAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW2ldLnNpemU7IGorKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGlwTmFtZUFuZFNpemVDb21wdXRlcltpXS5wb3NpdGlvbi5wdXNoKGNvbXB1dGVyQXJyW3Jvd11bZmluZEluZGV4Q29tcHV0ZXIgLSBqXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wdXRlckFycltyb3ddW2ZpbmRJbmRleENvbXB1dGVyIC0gal0gPSAnWCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuY29tcHV0ZXIoKTtcclxuXHJcbmNvbnN0IGNvcHB5Q29tcHV0ZXJBcnIgPSBbXTtcclxuXHJcbmxldCBjb3VudENvbXBvdGVyID0gMDtcclxuXHJcbmZvcihsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKXtcclxuICAgIGNvbnN0IG5ld0FyciA9IFtdO1xyXG5cclxuICAgIGZvcihsZXQgaiA9IDA7IGogPCAxMDsgaisrKXtcclxuICAgICAgICBuZXdBcnIucHVzaChjb3VudENvbXBvdGVyKTtcclxuICAgICAgICBjb3VudENvbXBvdGVyKys7XHJcbiAgICB9XHJcbiAgICBjb3BweUNvbXB1dGVyQXJyLnB1c2gobmV3QXJyKTtcclxufVxyXG5cclxubGV0IGNvdW50Q29tcHV0ZXJDb3BweSA9IDA7XHJcblxyXG5jb25zdCBjb21wdXRlckFyclR3byA9ICgpID0+IHtcclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBzaGlwTmFtZUFuZFNpemVDb21wdXRlci5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW2ldLnBvc2l0aW9uLmxlbmd0aDsgaisrKXtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGxldCByb3c7XHJcbiAgICAgICAgICAgIGxldCBjb2x1bW47XHJcbiAgICBcclxuICAgICAgICAgICAgaWYoc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbaV0ucG9zaXRpb25bal0udG9TdHJpbmcoKS5zcGxpdCgnJykubGVuZ3RoID09IDEpe1xyXG4gICAgICAgICAgICAgICAgcm93ID0gMDtcclxuICAgICAgICAgICAgICAgIGNvbHVtbiA9IE51bWJlcihzaGlwTmFtZUFuZFNpemVDb21wdXRlcltpXS5wb3NpdGlvbltqXS50b1N0cmluZygpLnNwbGl0KCcnKVswXSk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgcm93ID0gc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbaV0ucG9zaXRpb25bal0udG9TdHJpbmcoKS5zcGxpdCgnJylbMF07XHJcbiAgICAgICAgICAgICAgICBjb2x1bW4gPSBzaGlwTmFtZUFuZFNpemVDb21wdXRlcltpXS5wb3NpdGlvbltqXS50b1N0cmluZygpLnNwbGl0KCcnKVsxXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIGNvdW50Q29tcHV0ZXJDb3BweSsrO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGNvcHB5Q29tcHV0ZXJBcnJbcm93XVtjb2x1bW5dID0gJ1gnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuY29tcHV0ZXJBcnJUd28oKTtcclxuXHJcbmNvbnNvbGUubG9nKGNvcHB5Q29tcHV0ZXJBcnIsIGNvdW50Q29tcHV0ZXJDb3BweSk7XHJcblxyXG5cclxuY29tcHV0ZXJHYW1lQm9hcmRGaWVsZChjb3BweUNvbXB1dGVyQXJyKTtcclxuXHJcbmNvbnN0IHNoaXAgPSAoYm9keUxlbmd0aCwgd2hlcmVIaXRzLCBzdW5rKSA9PiB7XHJcbiAgICBcclxuICAgIHJldHVybntcclxuICAgICAgICBib2R5TGVuZ3RoLFxyXG4gICAgICAgIHdoZXJlSGl0cyxcclxuICAgICAgICBzdW5rLFxyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBoaXQgPSAoaGl0UG9zaXRpb24pID0+IHtcclxuICAgIFxyXG4gICAgcmV0dXJue1xyXG4gICAgICAgIGhpdFBvc2l0aW9uLFxyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBpc1N1bmsgPSAoYm9keUxlbmd0aCkgPT4ge1xyXG4gICAgY29uc3QgaGl0cyA9IGJvZHlMZW5ndGggLSBzaGlwKCkuc3VuaztcclxuXHJcbiAgICBpZihoaXRzID09IDApe1xyXG4gICAgICAgIHJldHVybiAnc2hpcCBpcyBzdW5rJztcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gaGl0cztcclxufVxyXG5cclxubGV0IGRyYWdnZWQ7XHJcblxyXG5nYW1lQm9hcmRGaWVsZHMoZ2FtZUZpZWxkc0Fycik7XHJcbmNyZWF0ZVNoaXAoc2hpcE5hbWVBbmRTaXplKTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnc3RhcnRcIiwgKGUpID0+IHtcclxuICAgIGRyYWdnZWQgPSBlLnRhcmdldDtcclxuXHJcbiAgICBlLnRhcmdldC5zdHlsZS5vcGFjaXR5ID0gLjM7XHJcblxyXG59LCBmYWxzZSk7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ2VuZFwiLCAoZSkgPT4ge1xyXG4gICAgZS50YXJnZXQuc3R5bGUub3BhY2l0eSA9IFwiXCI7XHJcbiAgICBlLnRhcmdldC5kYXRhc2V0LnJvdyA9IGUudGFyZ2V0LmZpcnN0Q2hpbGQuZGF0YXNldC5yb3c7XHJcbiAgICBlLnRhcmdldC5kYXRhc2V0LmNvbHVtbiA9IGUudGFyZ2V0LmZpcnN0Q2hpbGQuZGF0YXNldC5jb2x1bW47XHJcbn0sIGZhbHNlKTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnb3ZlclwiLCAoZSkgPT4ge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG59LCBmYWxzZSk7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ2VudGVyXCIsIChlKSA9PiB7XHJcbiAgICBpZihlLnRhcmdldC5jbGFzc05hbWUgPT0gXCJnYW1lRmllbGRcIil7XHJcbiAgICAgICAgZS50YXJnZXQuc3R5bGUuYmFja2dyb3VuZCA9IFwieWVsbG93XCI7XHJcbiAgICB9XHJcbn0sIGZhbHNlKTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnbGVhdmVcIiwgKGUpID0+IHtcclxuXHJcbiAgICBpZiAoZS50YXJnZXQuY2xhc3NOYW1lID09IFwiZ2FtZUZpZWxkXCIpe1xyXG4gICAgICAgIGUudGFyZ2V0LnN0eWxlLmJhY2tncm91bmQgPSBcIlwiO1xyXG4gICAgfVxyXG59LCBmYWxzZSk7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZHJvcFwiLCAoZSkgPT4ge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgIGlmKGUudGFyZ2V0LmNsYXNzTmFtZSA9PSAnZ2FtZUZpZWxkJyl7XHJcbiAgICAgICAgZS50YXJnZXQuc3R5bGUuYmFja2dyb3VuZCA9IFwiXCI7XHJcbiAgICAgICAgZS50YXJnZXQuYXBwZW5kQ2hpbGQoZHJhZ2dlZCk7XHJcblxyXG4gICAgICAgIGxldCBzaGlwSXNHb29kU2l6ZSA9IGZhbHNlO1xyXG4gXHJcbiAgICAgICAgbGV0IHJlc3VsdFBvc2l0aW9uID0gZS50YXJnZXQuZGF0YXNldC5yb3cgKyBlLnRhcmdldC5kYXRhc2V0LmNvbHVtbjtcclxuXHJcbiAgICAgICAgbGV0IHN0cmluZ1RvSW50ID0gTnVtYmVyKHJlc3VsdFBvc2l0aW9uKTtcclxuICAgIFxyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCByZXN1bHRQb3NpdGlvbi5zcGxpdCgnJykubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICBpZihyZXN1bHRQb3NpdGlvbi5zcGxpdCgnJylbMF0gPT0gMCl7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRQb3NpdGlvbiA9IHJlc3VsdFBvc2l0aW9uLnNwbGl0KCcnKVsxXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gICBcclxuXHJcbiAgICAgICAgY29uc3QgbmFtZVNoaXAgPSBlLnRhcmdldC5maXJzdENoaWxkLmNsYXNzTmFtZS5zcGxpdCgnICcpWzFdO1xyXG4gICAgICAgIGxldCBsZW5ndGhTaGlwO1xyXG5cclxuICAgICAgICBsZXQgaW5kZXhPYmo7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IHNoaXBOYW1lQW5kU2l6ZS5sZW5ndGg7IGorKyl7XHJcbiAgICAgICAgICAgIGlmKHNoaXBOYW1lQW5kU2l6ZVtqXS5uYW1lID09IG5hbWVTaGlwKXtcclxuICAgICAgICAgICAgICAgIGxlbmd0aFNoaXAgPSBzaGlwTmFtZUFuZFNpemVbal0uc2l6ZTtcclxuICAgICAgICAgICAgICAgIGluZGV4T2JqID0galxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGZpcnN0UG9zaXRpb24gPSBzdHJpbmdUb0ludDtcclxuICAgICAgICBjb25zdCBsYXN0U2hpcFBvc2l0aW9uID0gc3RyaW5nVG9JbnQgKyBsZW5ndGhTaGlwIC0gMTtcclxuICAgICAgICBjb25zdCBzaGlwQXJyUG9zaXRpb24gPSBbXTtcclxuXHJcbiAgICAgICAgZm9yKGxldCB4ID0gZmlyc3RQb3NpdGlvbjsgeCA8PSBsYXN0U2hpcFBvc2l0aW9uOyB4Kyspe1xyXG4gICAgICAgICAgICBzaGlwQXJyUG9zaXRpb24ucHVzaCh4KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGlzVHJ1ZSA9IChnYW1lRmllbGRzQXJyLCBmaXJzdFBvc2l0aW9uLCBsYXN0U2hpcFBvc2l0aW9uLCBzaGlwSXNHb29kU2l6ZSkgPT4ge1xyXG4gICAgICAgICAgICBmb3IobGV0IG4gPSAwOyBuIDwgZ2FtZUZpZWxkc0Fyci5sZW5ndGg7IG4rKyl7XHJcbiAgICAgICAgICAgICAgICBpZihnYW1lRmllbGRzQXJyW25dLmluY2x1ZGVzKGZpcnN0UG9zaXRpb24pKXtcclxuICAgICAgICAgICAgICAgICAgICBpZihnYW1lRmllbGRzQXJyW25dLmluY2x1ZGVzKGxhc3RTaGlwUG9zaXRpb24pKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hpcElzR29vZFNpemUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGlwTmFtZUFuZFNpemVbaW5kZXhPYmpdLmxhbmQgPSB0cnVlO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzaGlwSXNHb29kU2l6ZTtcclxuICAgICAgICAgICAgICAgICAgICB9OyBcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzaGlwSXNHb29kU2l6ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjcmVhdGVTaGlwKHNoaXBOYW1lQW5kU2l6ZSk7XHJcblxyXG4gICAgICAgIGlmKCFpc1RydWUoZ2FtZUZpZWxkc0FyciwgZmlyc3RQb3NpdGlvbiwgbGFzdFNoaXBQb3NpdGlvbiwgc2hpcElzR29vZFNpemUpKXtcclxuICAgICAgICAgICAgZHJhZ2dlZC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGRyYWdnZWQpO1xyXG4gICAgICAgICAgICBlLnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kID0gXCJcIjtcclxuICAgICAgICAgICAgY3JlYXRlU2hpcChzaGlwTmFtZUFuZFNpemUpO1xyXG4gICAgICAgICAgICBzaGlwTmFtZUFuZFNpemVbaW5kZXhPYmpdLmxhbmQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGdhbWVCb2FyZEZpZWxkcyhnYW1lRmllbGRzQXJyKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgZS50YXJnZXQuc3R5bGUuYmFja2dyb3VuZCA9IFwiXCI7XHJcbiAgICAgICAgICAgIGRyYWdnZWQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkcmFnZ2VkKTtcclxuICAgICAgICAgICAgZS50YXJnZXQuYXBwZW5kQ2hpbGQoZHJhZ2dlZCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgZ2FtZUZpZWxkc0Fyci5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgZ2FtZUZpZWxkc0FycltpXS5sZW5ndGg7IGorKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZ2FtZUZpZWxkc0FycltpXVtqXSA9PSBmaXJzdFBvc2l0aW9uKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoZ2FtZUZpZWxkc0FycltpXVtqXSA9PSAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgayA9IDA7IGsgPCBsZW5ndGhTaGlwOyBrKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoaXBOYW1lQW5kU2l6ZVtpbmRleE9ial0ucG9zaXRpb24ucHVzaChnYW1lRmllbGRzQXJyW2ldW2ogKyBrXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtqICsga10gPSAneCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2kgKyAxXVtqXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgcCA9IDA7IHAgPCBsZW5ndGhTaGlwOyBwKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaSArIDFdW2ogKyBwXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaV1baiArIGxlbmd0aFNoaXBdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihnYW1lRmllbGRzQXJyW2ldW2pdID09IGdhbWVGaWVsZHNBcnJbMF1bal0pe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBrID0gMDsgayA8IGxlbmd0aFNoaXA7IGsrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hpcE5hbWVBbmRTaXplW2luZGV4T2JqXS5wb3NpdGlvbi5wdXNoKGdhbWVGaWVsZHNBcnJbaV1baiArIGtdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2ldW2ogKyBrXSA9ICd4JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaSArIDFdW2pdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBwID0gMDsgcCA8IGxlbmd0aFNoaXA7IHArKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpICsgMV1baiArIHBdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtmaXJzdFBvc2l0aW9uIC0gMV0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2ldW2xhc3RTaGlwUG9zaXRpb24gKyAxXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoZ2FtZUZpZWxkc0FycltpXVtqXSA9PSBnYW1lRmllbGRzQXJyWzldW2pdICYmIGogIT0gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGsgPSAwOyBrIDwgbGVuZ3RoU2hpcDsgaysrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGlwTmFtZUFuZFNpemVbaW5kZXhPYmpdLnBvc2l0aW9uLnB1c2goZ2FtZUZpZWxkc0FycltpXVtqICsga10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaV1baiArIGtdID0gJ3gnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBwID0gMDsgcCA8IGxlbmd0aFNoaXA7IHArKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpIC0gMV1baiArIHBdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtsZW5ndGhTaGlwICsgal0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2ldW2ogLSAxXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoZ2FtZUZpZWxkc0FycltpXVtqXSA9PSBnYW1lRmllbGRzQXJyWzldW2pdKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgayA9IDA7IGsgPCBsZW5ndGhTaGlwOyBrKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoaXBOYW1lQW5kU2l6ZVtpbmRleE9ial0ucG9zaXRpb24ucHVzaChnYW1lRmllbGRzQXJyW2ldW2ogKyBrXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtqICsga10gPSAneCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IHAgPSAwOyBwIDwgbGVuZ3RoU2hpcDsgcCsrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2kgLSAxXVtqICsgcF0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2ldW2xlbmd0aFNoaXBdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgayA9IDA7IGsgPCBsZW5ndGhTaGlwOyBrKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoaXBOYW1lQW5kU2l6ZVtpbmRleE9ial0ucG9zaXRpb24ucHVzaChnYW1lRmllbGRzQXJyW2ldW2ogKyBrXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtqICsga10gPSAneCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2kgKyAxXVtqXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaSAtIDFdW2pdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtqIC0gMV0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2ldW2ogKyBsZW5ndGhTaGlwXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgcCA9IDA7IHAgPCBsZW5ndGhTaGlwOyBwKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaSArIDFdW2ogKyBwXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2kgLSAxXVtqICsgcF0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZHJhZ2dlZC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGRyYWdnZWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjcmVhdGVTaGlwKHNoaXBOYW1lQW5kU2l6ZSk7ICBcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBpc1Bvc2l0aW9uVHJ1ZSA9IChzaGlwTmFtZUFuZFNpemUpID0+IHtcclxuICAgICAgICBsZXQgY291bnQgPSAwO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBzaGlwTmFtZUFuZFNpemUubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICBpZihzaGlwTmFtZUFuZFNpemVbaV0ucG9zaXRpb24ubGVuZ3RoKXtcclxuICAgICAgICAgICAgICAgIGNvdW50Kys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKGNvdW50ID09IDUpe1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgZ2FtZUJvYXJkRmllbGRzKGdhbWVGaWVsZHNBcnIpO1xyXG5cclxuICAgIGlmKGlzUG9zaXRpb25UcnVlKHNoaXBOYW1lQW5kU2l6ZSkpe1xyXG4gICAgICAgIHN0YXJ0R2FtZSgpO1xyXG5cclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbn0sIGZhbHNlKTtcclxuXHJcbmNvbnN0IHN0YXJ0R2FtZSA9ICgpID0+IHtcclxuICAgIGNvbnN0IHNoaXBzQ2xhc3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2hpcHMnKTtcclxuICAgIHNoaXBzQ2xhc3MucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzaGlwc0NsYXNzKTtcclxuXHJcbiAgICBjb25zdCBnYW1lYm9hcmRNYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbXB1dGVyR2FtZUJvYXJkJyk7XHJcbiAgICBjb25zdCB0ZXN0R2FtZUJvYXJkID0gWy4uLmdhbWVib2FyZE1haW4uY2hpbGROb2Rlc107XHJcblxyXG4gICAgdGVzdEdhbWVCb2FyZC5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4geyAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZihlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BsYXlzJykpe1xyXG4gICAgICAgICAgICAgICAgbGV0IGlzTGVuZ2h0VG9aZXJvID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBOdW1iZXIoU3RyaW5nKGUudGFyZ2V0LmRhdGFzZXQucm93KSArIFN0cmluZyhlLnRhcmdldC5kYXRhc2V0LmNvbHVtbikpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBzaGlwTmFtZUFuZFNpemVDb21wdXRlci5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW2ldLnBvc2l0aW9uLmxlbmd0aDsgaisrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbaV0ucG9zaXRpb25bal0gPT0gaW5kZXgpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbaV0ucG9zaXRpb24uc3BsaWNlKGosIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2ZpZWxkJyk7XHJcbiAgICAgICAgICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdwbGF5cycpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcihsZXQgbyA9IDA7IG8gPCBzaGlwTmFtZUFuZFNpemVDb21wdXRlci5sZW5ndGg7IG8rKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbb10ucG9zaXRpb24ubGVuZ3RoID09IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0xlbmdodFRvWmVyby5wdXNoKCd0cnVlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmKGlzTGVuZ2h0VG9aZXJvLmxlbmd0aCA9PSA1KXtcclxuICAgICAgICAgICAgICAgICAgICB3aW5uZXJQYWdlKCd5b3UsIFtwbGF5ZXJdJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbXB1dGVyUmFuZG9tUGxheXMoKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coY29tcHV0ZXJQbGF5c1JhbmRvbS5sZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgY29uc29sZS5sb2coc2hpcE5hbWVBbmRTaXplKTtcclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufVxyXG5cclxuY29uc3QgY29tcHV0ZXJSYW5kb21QbGF5cyA9ICgpID0+IHtcclxuICAgIGZvcihsZXQgZiA9IDA7IGYgPCAxMDAwOyBmKyspe1xyXG4gICAgICAgIGNvbnN0IHJhbmRvbU51bWJlciA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDk5KTtcclxuXHJcbiAgICAgICAgaWYoY29tcHV0ZXJQbGF5c1JhbmRvbS5maW5kSW5kZXgoaXRlbSA9PiBpdGVtID09IHJhbmRvbU51bWJlcikgPiAtMSl7XHJcbiAgICAgICAgICAgIGxldCByb3c7XHJcbiAgICAgICAgICAgIGxldCBjb2x1bW47XHJcbiAgICAgICAgICAgIGxldCBpbmRleCA9IGNvbXB1dGVyUGxheXNSYW5kb20uZmluZEluZGV4KGl0ZW0gPT4gaXRlbSA9PSByYW5kb21OdW1iZXIpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGlmKHJhbmRvbU51bWJlci50b1N0cmluZygpLnNwbGl0KCcnKS5sZW5ndGggPT0gMSl7XHJcbiAgICAgICAgICAgICAgICByb3cgPSAwO1xyXG4gICAgICAgICAgICAgICAgY29sdW1uID0gTnVtYmVyKHJhbmRvbU51bWJlci50b1N0cmluZygpLnNwbGl0KCcnKVswXSk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgcm93ID0gTnVtYmVyKHJhbmRvbU51bWJlci50b1N0cmluZygpLnNwbGl0KCcnKVswXSk7XHJcbiAgICAgICAgICAgICAgICBjb2x1bW4gPSBOdW1iZXIocmFuZG9tTnVtYmVyLnRvU3RyaW5nKCkuc3BsaXQoJycpWzFdKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IHJlbW92ZWRJdGVtID0gY29tcHV0ZXJQbGF5c1JhbmRvbS5zcGxpY2UoaW5kZXgsIDEpO1xyXG5cclxuICAgICAgICAgICAgaWYocmVtb3ZlZEl0ZW0pe1xyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHNoaXBOYW1lQW5kU2l6ZS5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IHNoaXBOYW1lQW5kU2l6ZVtpXS5wb3NpdGlvbi5sZW5ndGg7IGorKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNoaXBOYW1lQW5kU2l6ZVtpXS5wb3NpdGlvbltqXSA9PSByZW1vdmVkSXRlbSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGlwTmFtZUFuZFNpemVbaV0ucG9zaXRpb24uc3BsaWNlKGosIDEpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDb21wdXRlciBibG93JywgY29tcHV0ZXJQbGF5c1JhbmRvbS5sZW5ndGgpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaXNMZW5naHRUb1plcm8gPSBbXTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBvID0gMDsgbyA8IHNoaXBOYW1lQW5kU2l6ZS5sZW5ndGg7IG8rKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2hpcE5hbWVBbmRTaXplW29dLnBvc2l0aW9uLmxlbmd0aCA9PSAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNMZW5naHRUb1plcm8ucHVzaCgndHJ1ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihpc0xlbmdodFRvWmVyby5sZW5ndGggPT0gNSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lubmVyUGFnZSgnY29tcHV0ZXInKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgcG9zaXRpb25MZW5ndGhBcnIgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IobGV0IGIgPSAwOyBiIDwgc2hpcE5hbWVBbmRTaXplLmxlbmd0aDsgYisrKXtcclxuICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGMgPSAwOyBjIDwgc2hpcE5hbWVBbmRTaXplW2JdLnBvc2l0aW9uLmxlbmd0aDsgYysrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25MZW5ndGhBcnIucHVzaChzaGlwTmFtZUFuZFNpemVbYl0ucG9zaXRpb25bY10pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnWW91IG5vdCBibG93JywgY29tcHV0ZXJQbGF5c1JhbmRvbS5sZW5ndGgsIHBvc2l0aW9uTGVuZ3RoQXJyLmxlbmd0aCk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCB3aW5uZXJQYWdlID0gKHdpbm5lcikgPT4ge1xyXG4gICAgY29uc3QgZ2FtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYW1lJyk7XHJcbiAgICBcclxuICAgIGNvbnN0IGZpeGVkV2lubmVyUGFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgZml4ZWRXaW5uZXJQYWdlLmNsYXNzTGlzdC5hZGQoJ2ZpeGVkV2lubmVyUGFnZScpO1xyXG4gICAgXHJcbiAgICBjb25zdCBoMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gxJyk7XHJcbiAgICBoMS50ZXh0Q29udGVudCA9IGBUaGUgd2lubmVyIGlzIFske3dpbm5lcn1dYDtcclxuXHJcbiAgICBmaXhlZFdpbm5lclBhZ2UuYXBwZW5kQ2hpbGQoaDEpO1xyXG5cclxuICAgIGdhbWUuYXBwZW5kQ2hpbGQoZml4ZWRXaW5uZXJQYWdlKTtcclxufSJdLCJuYW1lcyI6WyJnYW1lRmllbGRzQXJyIiwiZ2FtZUJvYXJkQ2xhc3MiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0ZXh0Q29udGVudCIsImkiLCJqIiwiZ2FtZUZpZWxkIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImRhdGFzZXQiLCJyb3ciLCJjb2x1bW4iLCJhcHBlbmRDaGlsZCIsInNoaXBOYW1lQW5kU2l6ZSIsInNoaXBzQ2xhc3MiLCJsZW5ndGgiLCJsYW5kIiwic2hpcCIsImlkIiwibmFtZSIsInN0eWxlIiwiZ3JpZFRlbXBsYXRlQ29sdW1ucyIsInNpemUiLCJ3aWR0aCIsImhlaWdodCIsImJhY2tncm91bmRDb2xvciIsImRyYWdnYWJsZSIsInNxdWFyZSIsImNvbXB1dGVyQXJyIiwiY29tcHV0ZXJHYW1lYm9hcmQiLCJyb3dDaG9pY2UiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJjb2x1bW5DaG9pY2UiLCJjb3VudCIsIm5ld0FyciIsInB1c2giLCJwb3NpdGlvbiIsInNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyIiwiY29tcHV0ZXJQbGF5c1JhbmRvbSIsImFkZEh1bmRyZWROdW1iZXJzIiwiYXJyIiwidHJ1ZU9yRmFsc2UiLCJpdGVtIiwiY291bnRBcnIiLCJiIiwieCIsImV2ZXJ5IiwibyIsImZpbHRlciIsImNvbnNvbGUiLCJsb2ciLCJ2YWx1ZSIsIm51bSIsInRvU3RyaW5nIiwiTnVtYmVyIiwic3BsaXQiLCJmaW5kSW5kZXhDb21wdXRlciIsImZpbmRJbmRleCIsImNvbXB1dGVyIiwiY29wcHlDb21wdXRlckFyciIsImNvdW50Q29tcG90ZXIiLCJkcmFnZ2VkIiwiY291bnRDb21wdXRlckNvcHB5IiwiY29tcHV0ZXJBcnJUd28iLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInRhcmdldCIsIm9wYWNpdHkiLCJmaXJzdENoaWxkIiwicHJldmVudERlZmF1bHQiLCJjbGFzc05hbWUiLCJiYWNrZ3JvdW5kIiwic2hpcElzR29vZFNpemUiLCJyZXN1bHRQb3NpdGlvbiIsInN0cmluZ1RvSW50IiwibmFtZVNoaXAiLCJsZW5ndGhTaGlwIiwiaW5kZXhPYmoiLCJmaXJzdFBvc2l0aW9uIiwibGFzdFNoaXBQb3NpdGlvbiIsInNoaXBBcnJQb3NpdGlvbiIsImlzVHJ1ZSIsIm4iLCJpbmNsdWRlcyIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsImsiLCJwIiwiaXNQb3NpdGlvblRydWUiLCJzdGFydEdhbWUiLCJjaGlsZE5vZGVzIiwiZm9yRWFjaCIsImNvbnRhaW5zIiwiaXNMZW5naHRUb1plcm8iLCJpbmRleCIsIlN0cmluZyIsInNwbGljZSIsInJlbW92ZSIsIndpbm5lclBhZ2UiLCJjb21wdXRlclJhbmRvbVBsYXlzIiwiZiIsInJhbmRvbU51bWJlciIsInJlbW92ZWRJdGVtIiwicG9zaXRpb25MZW5ndGhBcnIiLCJjIiwid2lubmVyIiwiZ2FtZSIsImZpeGVkV2lubmVyUGFnZSIsImgxIl0sInNvdXJjZVJvb3QiOiIifQ==