(()=>{"use strict";const e=e=>{const t=document.querySelector(".gameboard");t.textContent="";for(let o=0;o<10;o++)for(let l=0;l<10;l++)if("x"==e[o][l]){const e=document.createElement("div");e.classList.add("checked"),e.dataset.row=o,e.dataset.column=l,t.appendChild(e)}else if("y"==e[o][l]){const e=document.createElement("div");e.classList.add("blocked"),e.dataset.row=o,e.dataset.column=l,t.appendChild(e)}else{const e=document.createElement("div");e.classList.add("gameField"),e.dataset.row=o,e.dataset.column=l,t.appendChild(e)}},t=e=>{const t=document.querySelector(".ships");t.textContent="";for(let o=0;o<e.length;o++)if(1==e[o].land);else{const l=document.createElement("div");l.classList.add("ship"),l.dataset.id=e[o].id,l.classList.add(e[o].name),l.style.gridTemplateColumns=`repeat(${e[o].size}, 1fr)`,l.style.width=`calc(${e[o].id} * 50px)`,l.style.height="50px",l.style.backgroundColor="black",l.draggable=!0;for(let t=0;t<e[o].size;t++){const e=document.createElement("div");e.classList.add("square"),l.appendChild(e)}t.appendChild(l)}},o=e=>{const t=document.querySelector(".computerGameBoard");t.textContent="";for(let o=0;o<10;o++)for(let l=0;l<10;l++)if("X"==e[o][l]){const e=document.createElement("div");e.classList.add("plays"),e.dataset.row=o,e.dataset.column=l,t.appendChild(e)}else{const e=document.createElement("div");e.classList.add("field"),e.dataset.row=o,e.dataset.column=l,t.appendChild(e)}},l=()=>({rowChoice:Math.floor(9*Math.random()),columnChoice:Math.floor(99*Math.random())}),s=[];let n=0;for(let e=0;e<10;e++){const e=[];for(let t=0;t<10;t++)e.push(n),n++;s.push(e)}const i=[{name:"Destroyer",size:2,id:2,land:!1,position:[]},{name:"Submarine",size:3,id:3,land:!1,position:[]},{name:"Cruiser",size:3,id:3,land:!1,position:[]},{name:"Battleship",size:4,id:4,land:!1,position:[]},{name:"Carrier",size:5,id:5,land:!1,position:[]}],a=[{name:"Destroyer",size:2,id:2,position:[]},{name:"Submarine",size:3,id:3,position:[]},{name:"Cruiser",size:3,id:3,position:[]},{name:"Battleship",size:4,id:4,position:[]},{name:"Carrier",size:5,id:5,position:[]}],r=e=>"X"!==e;let d=[];for(let e=0;e<10;e++){const e=[];for(let t=0;t<10;t++)e.push(n),n++;d.push(e)}(()=>{l().rowChoice,l().columnChoice,d.length=0;let e=0;for(let t=0;t<10;t++){const t=[];for(let o=0;o<10;o++)t.push(e),e++;d.push(t)}let t=0;o(d);for(let e=0;e<1e3;e++){for(let e=0;e<a.length;e++)a[e].position.every(r)||(a[e].position.length=0);if(a[0].position.length&&a[1].position.length&&a[2].position.length&&a[3].position.length&&a[4].position.length){for(let e=0;e<10;e++)d[e].filter((e=>"X"==e))&&(t+=d[e].filter((e=>"X"==e)).length);return console.log(t),{computerArr:d,shipNameAndSizeComputer:a}}for(let e=0;e<a.length;e++)if(a[e].position.length>1);else{const t=(s=e,Math.floor(94*Math.random())+a[s].size);let o,l;1==t.toString().length?(o=0,l=Number(t.toString().split("")[0])):(o=Number(t.toString().split("")[0]),l=Number(t.toString().split("")[1]));const n=d[o].findIndex((e=>e==t));if(n>0&&n-a[e].size>=0)for(let t=0;t<a[e].size;t++)a[e].position.push(d[o][n-t]),d[o][n-t]="X"}}var s})();const c=[];let p=0;for(let e=0;e<10;e++){const e=[];for(let t=0;t<10;t++)e.push(p),p++;c.push(e)}let g,m=0;for(let e=0;e<a.length;e++)for(let t=0;t<a[e].position.length;t++){let o,l;1==a[e].position[t].toString().split("").length?(o=0,l=Number(a[e].position[t].toString().split("")[0])):(o=a[e].position[t].toString().split("")[0],l=a[e].position[t].toString().split("")[1]),m++,c[o][l]="X"}console.log(c,m),o(c),e(s),t(i),document.addEventListener("dragstart",(e=>{g=e.target,e.target.style.opacity=.3}),!1),document.addEventListener("dragend",(e=>{e.target.style.opacity="",e.target.dataset.row=e.target.firstChild.dataset.row,e.target.dataset.column=e.target.firstChild.dataset.column}),!1),document.addEventListener("dragover",(e=>{e.preventDefault()}),!1),document.addEventListener("dragenter",(e=>{"gameField"==e.target.className&&(e.target.style.background="yellow")}),!1),document.addEventListener("dragleave",(e=>{"gameField"==e.target.className&&(e.target.style.background="")}),!1),document.addEventListener("drop",(o=>{if(o.preventDefault(),"gameField"==o.target.className){o.target.style.background="",o.target.appendChild(g);let l=!1,n=o.target.dataset.row+o.target.dataset.column,a=Number(n);for(let e=0;e<n.split("").length;e++)0==n.split("")[0]&&(n=n.split("")[1]);const r=o.target.firstChild.className.split(" ")[1];let d,c;for(let e=0;e<i.length;e++)i[e].name==r&&(d=i[e].size,c=e);const p=a,m=a+d-1,u=[];for(let e=p;e<=m;e++)u.push(e);const h=(e,t,o,l)=>{for(let l=0;l<e.length;l++)if(e[l].includes(t))return!!e[l].includes(o)&&(!0,i[c].land=!0,true)};if(t(i),h(s,p,m,l)){o.target.style.background="",g.parentNode.removeChild(g),o.target.appendChild(g);for(let e=0;e<s.length;e++)for(let t=0;t<s[e].length;t++)if(s[e][t]==p)if(0==s[e][t]){for(let o=0;o<d;o++)i[c].position.push(s[e][t+o]),s[e][t+o]="x";s[e+1][t]="y";for(let o=0;o<d;o++)s[e+1][t+o]="y";s[e][t+d]="y",console.log(e)}else if(s[e][t]==s[0][t]){for(let o=0;o<d;o++)i[c].position.push(s[e][t+o]),s[e][t+o]="x";s[e+1][t]="y";for(let o=0;o<d;o++)s[e+1][t+o]="y";s[e][p-1]="y",s[e][m+1]="y"}else if(s[e][t]==s[9][t]&&0!=t){for(let o=0;o<d;o++)i[c].position.push(s[e][t+o]),s[e][t+o]="x";for(let o=0;o<d;o++)s[e-1][t+o]="y";console.log(!0,!1),s[e][d+t]="y",s[e][t-1]="y"}else if(s[e][t]==s[9][t]){for(let o=0;o<d;o++)i[c].position.push(s[e][t+o]),s[e][t+o]="x";for(let o=0;o<d;o++)s[e-1][t+o]="y";console.log(!0,!1),s[e][d]="y"}else{for(let o=0;o<d;o++)i[c].position.push(s[e][t+o]),s[e][t+o]="x";s[e+1][t]="y",s[e-1][t]="y",s[e][t-1]="y",s[e][t+d]="y";for(let o=0;o<d;o++)s[e+1][t+o]="y",s[e-1][t+o]="y"}g.parentNode.removeChild(g)}else g.parentNode.removeChild(g),o.target.style.background="",t(i),i[c].land=!1,e(s);t(i)}(e=>{let t=0;for(let o=0;o<e.length;o++)e[o].position.length&&t++;return 5==t})(i)&&console.log("start game"),e(s),console.log(s),console.log(i)}),!1)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUssSUFNbER6QixFQUFRc0IsV0FBV0MsWUFBWXZCLFFBM0UvQkEsRUFBUXNCLFdBQVdDLFlBQVl2QixHQUMvQkcsRUFBRUMsT0FBTzVDLE1BQU1pRCxXQUFhLEdBQzVCLEVBQVd4RCxHQUNYQSxFQUFnQjhELEdBQVUzRCxNQUFPLEVBRWpDLEVBQWdCbEIsR0F3RXBCLEVBQVdlLEdBR1EsQ0FBQ0EsSUFDcEIsSUFBSXNCLEVBQVEsRUFDWixJQUFJLElBQUloQyxFQUFJLEVBQUdBLEVBQUlVLEVBQWdCRSxPQUFRWixJQUNwQ1UsRUFBZ0JWLEdBQUdtQyxTQUFTdkIsUUFDM0JvQixJQUlSLE9BQVksR0FBVEEsR0FPSm1ELENBQWV6RSxJQUNkbUMsUUFBUUMsSUFBSSxjQUdoQixFQUFnQm5ELEdBRWhCa0QsUUFBUUMsSUFBSW5ELEdBQ1prRCxRQUFRQyxJQUFJcEMsTUFDYixJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9jb21wb25lbnRzL2dhbWVCb2FyZEZpZWxkcy5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2NvbXBvbmVudHMvY3JlYXRlU2hpcC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2NvbXBvbmVudHMvY29tcHV0ZXJHYW1lQm9hcmRGaWVsZC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2NvbXBvbmVudHMvY29tcHV0ZXJDaG9pY2UuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBnYW1lQm9hcmRGaWVsZHMgPSAoZ2FtZUZpZWxkc0FycikgPT4ge1xyXG4gICAgY29uc3QgZ2FtZUJvYXJkQ2xhc3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FtZWJvYXJkJyk7XHJcblxyXG4gICAgZ2FtZUJvYXJkQ2xhc3MudGV4dENvbnRlbnQgPSAnJztcclxuXHJcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgMTA7IGkrKyl7XHJcbiAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IDEwOyBqKyspe1xyXG4gICAgICAgICAgICBpZihnYW1lRmllbGRzQXJyW2ldW2pdID09ICd4Jyl7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBnYW1lRmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5jbGFzc0xpc3QuYWRkKCdjaGVja2VkJyk7XHJcbiAgICAgICAgICAgICAgICBnYW1lRmllbGQuZGF0YXNldC5yb3cgPSBpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmRhdGFzZXQuY29sdW1uID0gajtcclxuXHJcbiAgICAgICAgICAgICAgICBnYW1lQm9hcmRDbGFzcy5hcHBlbmRDaGlsZChnYW1lRmllbGQpO1xyXG4gICAgICAgICAgICB9ZWxzZSBpZihnYW1lRmllbGRzQXJyW2ldW2pdID09ICd5Jyl7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBnYW1lRmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5jbGFzc0xpc3QuYWRkKCdibG9ja2VkJyk7XHJcbiAgICAgICAgICAgICAgICBnYW1lRmllbGQuZGF0YXNldC5yb3cgPSBpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmRhdGFzZXQuY29sdW1uID0gajtcclxuXHJcbiAgICAgICAgICAgICAgICBnYW1lQm9hcmRDbGFzcy5hcHBlbmRDaGlsZChnYW1lRmllbGQpO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGdhbWVGaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmNsYXNzTGlzdC5hZGQoJ2dhbWVGaWVsZCcpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmRhdGFzZXQucm93ID0gaTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5kYXRhc2V0LmNvbHVtbiA9IGo7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGdhbWVCb2FyZENsYXNzLmFwcGVuZENoaWxkKGdhbWVGaWVsZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGdhbWVCb2FyZEZpZWxkczsiLCJjb25zdCBjcmVhdGVTaGlwID0gKHNoaXBOYW1lQW5kU2l6ZSkgPT4ge1xyXG4gICAgY29uc3Qgc2hpcHNDbGFzcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaGlwcycpO1xyXG5cclxuICAgIHNoaXBzQ2xhc3MudGV4dENvbnRlbnQgPSAnJztcclxuXHJcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgc2hpcE5hbWVBbmRTaXplLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICBpZihzaGlwTmFtZUFuZFNpemVbaV0ubGFuZCA9PSB0cnVlKXtcclxuXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGNvbnN0IHNoaXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgc2hpcC5jbGFzc0xpc3QuYWRkKCdzaGlwJyk7XHJcbiAgICAgICAgICAgIHNoaXAuZGF0YXNldC5pZCA9IHNoaXBOYW1lQW5kU2l6ZVtpXS5pZDtcclxuICAgICAgICAgICAgc2hpcC5jbGFzc0xpc3QuYWRkKHNoaXBOYW1lQW5kU2l6ZVtpXS5uYW1lKTtcclxuICAgICAgICAgICAgc2hpcC5zdHlsZS5ncmlkVGVtcGxhdGVDb2x1bW5zID0gYHJlcGVhdCgke3NoaXBOYW1lQW5kU2l6ZVtpXS5zaXplfSwgMWZyKWA7XHJcbiAgICAgICAgICAgIHNoaXAuc3R5bGUud2lkdGggPSBgY2FsYygke3NoaXBOYW1lQW5kU2l6ZVtpXS5pZH0gKiA1MHB4KWA7XHJcbiAgICAgICAgICAgIHNoaXAuc3R5bGUuaGVpZ2h0ID0gJzUwcHgnO1xyXG4gICAgICAgICAgICBzaGlwLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdibGFjayc7IFxyXG4gICAgICAgICAgICBzaGlwLmRyYWdnYWJsZSA9IHRydWU7XHJcblxyXG5cclxuICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IHNoaXBOYW1lQW5kU2l6ZVtpXS5zaXplOyBqKyspe1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3F1YXJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBzcXVhcmUuY2xhc3NMaXN0LmFkZCgnc3F1YXJlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgc2hpcC5hcHBlbmRDaGlsZChzcXVhcmUpO1xyXG4gICAgICAgICAgICB9ICAgXHJcblxyXG4gICAgICAgICAgICBzaGlwc0NsYXNzLmFwcGVuZENoaWxkKHNoaXApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlU2hpcDsiLCJjb25zdCBjb21wdXRlckdhbWVCb2FyZEZpZWxkID0gKGNvbXB1dGVyQXJyKSA9PiB7XHJcbiAgICBcclxuICAgIGNvbnN0IGNvbXB1dGVyR2FtZWJvYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbXB1dGVyR2FtZUJvYXJkJyk7XHJcbiAgICBjb21wdXRlckdhbWVib2FyZC50ZXh0Q29udGVudCA9ICcnO1xyXG5cclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKXtcclxuICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgMTA7IGorKyl7XHJcbiAgICAgICAgICAgIGlmKGNvbXB1dGVyQXJyW2ldW2pdID09ICdYJyl7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBnYW1lRmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5jbGFzc0xpc3QuYWRkKCdwbGF5cycpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmRhdGFzZXQucm93ID0gaTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5kYXRhc2V0LmNvbHVtbiA9IGo7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbXB1dGVyR2FtZWJvYXJkLmFwcGVuZENoaWxkKGdhbWVGaWVsZCk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZ2FtZUZpZWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBnYW1lRmllbGQuY2xhc3NMaXN0LmFkZCgnZmllbGQnKTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5kYXRhc2V0LnJvdyA9IGk7XHJcbiAgICAgICAgICAgICAgICBnYW1lRmllbGQuZGF0YXNldC5jb2x1bW4gPSBqO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb21wdXRlckdhbWVib2FyZC5hcHBlbmRDaGlsZChnYW1lRmllbGQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjb21wdXRlckdhbWVCb2FyZEZpZWxkOyIsImNvbnN0IGNvbXB0ZXJDaG9pY2UgPSAoKSA9PiB7XHJcbiAgICBjb25zdCByb3dDaG9pY2UgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA5KTtcclxuICAgIGNvbnN0IGNvbHVtbkNob2ljZSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDk5KTtcclxuXHJcbiAgICByZXR1cm57XHJcbiAgICAgICAgcm93Q2hvaWNlLFxyXG4gICAgICAgIGNvbHVtbkNob2ljZSxcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY29tcHRlckNob2ljZTsiLCJpbXBvcnQgZ2FtZUJvYXJkRmllbGRzIGZyb20gXCIuL2NvbXBvbmVudHMvZ2FtZUJvYXJkRmllbGRzXCI7XHJcbmltcG9ydCBjcmVhdGVTaGlwIGZyb20gXCIuL2NvbXBvbmVudHMvY3JlYXRlU2hpcFwiO1xyXG5pbXBvcnQgY29tcHV0ZXJHYW1lQm9hcmRGaWVsZCBmcm9tIFwiLi9jb21wb25lbnRzL2NvbXB1dGVyR2FtZUJvYXJkRmllbGRcIjtcclxuaW1wb3J0IGNvbXB0ZXJDaG9pY2UgZnJvbSAnLi9jb21wb25lbnRzL2NvbXB1dGVyQ2hvaWNlJztcclxuXHJcbmNvbnN0IGdhbWVGaWVsZHNBcnIgPSBbXTtcclxubGV0IGNvdW50ID0gMDtcclxuXHJcbmZvcihsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKXtcclxuICAgIGNvbnN0IG5ld0FyciA9IFtdO1xyXG5cclxuICAgIGZvcihsZXQgaiA9IDA7IGogPCAxMDsgaisrKXtcclxuICAgICAgICBuZXdBcnIucHVzaChjb3VudCk7XHJcbiAgICAgICAgY291bnQrKztcclxuICAgIH1cclxuICAgIGdhbWVGaWVsZHNBcnIucHVzaChuZXdBcnIpO1xyXG59XHJcblxyXG5jb25zdCBzaGlwTmFtZUFuZFNpemUgPSBbXHJcbiAgICB7bmFtZTogJ0Rlc3Ryb3llcicsIHNpemU6IDIsIGlkOiAyLCBsYW5kOiBmYWxzZSwgcG9zaXRpb246IFtdfSxcclxuICAgIHtuYW1lOiAnU3VibWFyaW5lJywgc2l6ZTogMywgaWQ6IDMsIGxhbmQ6IGZhbHNlLCBwb3NpdGlvbjogW119LFxyXG4gICAge25hbWU6ICdDcnVpc2VyJywgc2l6ZTogMywgaWQ6IDMsIGxhbmQ6IGZhbHNlLCBwb3NpdGlvbjogW119LFxyXG4gICAge25hbWU6ICdCYXR0bGVzaGlwJywgc2l6ZTogNCwgaWQ6IDQsIGxhbmQ6IGZhbHNlLCBwb3NpdGlvbjogW119LFxyXG4gICAge25hbWU6ICdDYXJyaWVyJywgc2l6ZTogNSwgaWQ6IDUsIGxhbmQ6IGZhbHNlLCBwb3NpdGlvbjogW119LFxyXG5dXHJcblxyXG5jb25zdCBzaGlwTmFtZUFuZFNpemVDb21wdXRlciA9IFtcclxuICAgIHtuYW1lOiAnRGVzdHJveWVyJywgc2l6ZTogMiwgaWQ6IDIsIHBvc2l0aW9uOiBbXX0sXHJcbiAgICB7bmFtZTogJ1N1Ym1hcmluZScsIHNpemU6IDMsIGlkOiAzLCBwb3NpdGlvbjogW119LFxyXG4gICAge25hbWU6ICdDcnVpc2VyJywgc2l6ZTogMywgaWQ6IDMsIHBvc2l0aW9uOiBbXX0sXHJcbiAgICB7bmFtZTogJ0JhdHRsZXNoaXAnLCBzaXplOiA0LCBpZDogNCwgcG9zaXRpb246IFtdfSxcclxuICAgIHtuYW1lOiAnQ2FycmllcicsIHNpemU6IDUsIGlkOiA1LCBwb3NpdGlvbjogW119LFxyXG5dXHJcblxyXG5jb25zdCB0cnVlT3JGYWxzZSA9IChpdGVtKSA9PiB7XHJcbiAgICByZXR1cm4gaXRlbSAhPT0gJ1gnO1xyXG59XHJcblxyXG5jb25zdCB0cnVlT3JGYWxzZVR3byA9IChpdGVtKSA9PiB7XHJcbiAgICByZXR1cm4gaXRlbSA9PSAnWCc7XHJcbn1cclxuXHJcbmxldCBjb21wdXRlckFyciA9IFtdO1xyXG5cclxuZm9yKGxldCBpID0gMDsgaSA8IDEwOyBpKyspe1xyXG4gICAgY29uc3QgbmV3QXJyID0gW107XHJcblxyXG4gICAgZm9yKGxldCBqID0gMDsgaiA8IDEwOyBqKyspe1xyXG4gICAgICAgIG5ld0Fyci5wdXNoKGNvdW50KTtcclxuICAgICAgICBjb3VudCsrO1xyXG4gICAgfVxyXG4gICAgY29tcHV0ZXJBcnIucHVzaChuZXdBcnIpO1xyXG59XHJcblxyXG5jb25zdCBjb21wdXRlciA9ICgpID0+IHtcclxuICAgIGNvbnN0IHJvdyA9IGNvbXB0ZXJDaG9pY2UoKS5yb3dDaG9pY2U7XHJcbiAgICBjb25zdCBjb2x1bW4gPSBjb21wdGVyQ2hvaWNlKCkuY29sdW1uQ2hvaWNlO1xyXG4gICAgY29tcHV0ZXJBcnIubGVuZ3RoID0gMDtcclxuXHJcbiAgICBjb25zdCByYW5kb21Qb3NpdGlvbiA9IChudW0pID0+IHtcclxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogOTQpICsgc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbbnVtXS5zaXplO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBjb3VudCA9IDA7XHJcblxyXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IDEwOyBpKyspe1xyXG4gICAgICAgIGNvbnN0IG5ld0FyciA9IFtdO1xyXG4gICAgXHJcbiAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IDEwOyBqKyspe1xyXG4gICAgICAgICAgICBuZXdBcnIucHVzaChjb3VudCk7XHJcbiAgICAgICAgICAgIGNvdW50Kys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbXB1dGVyQXJyLnB1c2gobmV3QXJyKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgY291bnRBcnIgPSAwO1xyXG5cclxuICAgIGNvbXB1dGVyR2FtZUJvYXJkRmllbGQoY29tcHV0ZXJBcnIpO1xyXG5cclxuICAgIGZvcihsZXQgYiA9IDA7IGIgPCAxMDAwOyBiKyspe1xyXG4gICAgICAgIGZvcihsZXQgeCA9IDA7IHggPCBzaGlwTmFtZUFuZFNpemVDb21wdXRlci5sZW5ndGg7IHgrKyl7XHJcbiAgICAgICAgICAgIGlmKHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW3hdLnBvc2l0aW9uLmV2ZXJ5KHRydWVPckZhbHNlKSl7XHJcblxyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW3hdLnBvc2l0aW9uLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyWzBdLnBvc2l0aW9uLmxlbmd0aCAmJiBzaGlwTmFtZUFuZFNpemVDb21wdXRlclsxXS5wb3NpdGlvbi5sZW5ndGggJiYgc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbMl0ucG9zaXRpb24ubGVuZ3RoICYmIHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyWzNdLnBvc2l0aW9uLmxlbmd0aCAmJiBzaGlwTmFtZUFuZFNpemVDb21wdXRlcls0XS5wb3NpdGlvbi5sZW5ndGgpe1xyXG4gICAgICAgICAgICBmb3IobGV0IG8gPSAwOyBvIDwgMTA7IG8rKyl7XHJcbiAgICAgICAgICAgICAgICBpZihjb21wdXRlckFycltvXS5maWx0ZXIoaXRlbSA9PiAgaXRlbSA9PSAnWCcpKXtcclxuICAgICAgICAgICAgICAgICAgICBjb3VudEFyciArPSBjb21wdXRlckFycltvXS5maWx0ZXIoaXRlbSA9PiBpdGVtID09ICdYJykubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhjb3VudEFycik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgY29tcHV0ZXJBcnIsXHJcbiAgICAgICAgICAgICAgICBzaGlwTmFtZUFuZFNpemVDb21wdXRlcixcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgIGlmKHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW2ldLnBvc2l0aW9uLmxlbmd0aCA+IDEpe1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHJhbmRvbVBvc2l0aW9uKGkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCByb3c7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNvbHVtbjtcclxuICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmKHZhbHVlLnRvU3RyaW5nKCkubGVuZ3RoID09IDEpe1xyXG4gICAgICAgICAgICAgICAgICAgIHJvdyA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gTnVtYmVyKHZhbHVlLnRvU3RyaW5nKCkuc3BsaXQoJycpWzBdKTtcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIHJvdyA9IE51bWJlcih2YWx1ZS50b1N0cmluZygpLnNwbGl0KCcnKVswXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gTnVtYmVyKHZhbHVlLnRvU3RyaW5nKCkuc3BsaXQoJycpWzFdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpbmRJbmRleENvbXB1dGVyID0gY29tcHV0ZXJBcnJbcm93XS5maW5kSW5kZXgoaXRlbSA9PiBpdGVtID09IHZhbHVlKTtcclxuICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmKGZpbmRJbmRleENvbXB1dGVyID4gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZmluZEluZGV4Q29tcHV0ZXIgLSBzaGlwTmFtZUFuZFNpemVDb21wdXRlcltpXS5zaXplID49IDApeyAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW2ldLnNpemU7IGorKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGlwTmFtZUFuZFNpemVDb21wdXRlcltpXS5wb3NpdGlvbi5wdXNoKGNvbXB1dGVyQXJyW3Jvd11bZmluZEluZGV4Q29tcHV0ZXIgLSBqXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wdXRlckFycltyb3ddW2ZpbmRJbmRleENvbXB1dGVyIC0gal0gPSAnWCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuY29tcHV0ZXIoKTtcclxuXHJcbmNvbnN0IGNvcHB5Q29tcHV0ZXJBcnIgPSBbXTtcclxuXHJcbmxldCBjb3VudENvbXBvdGVyID0gMDtcclxuXHJcbmZvcihsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKXtcclxuICAgIGNvbnN0IG5ld0FyciA9IFtdO1xyXG5cclxuICAgIGZvcihsZXQgaiA9IDA7IGogPCAxMDsgaisrKXtcclxuICAgICAgICBuZXdBcnIucHVzaChjb3VudENvbXBvdGVyKTtcclxuICAgICAgICBjb3VudENvbXBvdGVyKys7XHJcbiAgICB9XHJcbiAgICBjb3BweUNvbXB1dGVyQXJyLnB1c2gobmV3QXJyKTtcclxufVxyXG5cclxubGV0IGNvdW50Q29tcHV0ZXJDb3BweSA9IDA7XHJcblxyXG5mb3IobGV0IGkgPSAwOyBpIDwgc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXIubGVuZ3RoOyBpKyspe1xyXG4gICAgZm9yKGxldCBqID0gMDsgaiA8IHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW2ldLnBvc2l0aW9uLmxlbmd0aDsgaisrKXtcclxuICAgICAgICBcclxuICAgICAgICBsZXQgcm93O1xyXG4gICAgICAgIGxldCBjb2x1bW47XHJcblxyXG4gICAgICAgIGlmKHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW2ldLnBvc2l0aW9uW2pdLnRvU3RyaW5nKCkuc3BsaXQoJycpLmxlbmd0aCA9PSAxKXtcclxuICAgICAgICAgICAgcm93ID0gMDtcclxuICAgICAgICAgICAgY29sdW1uID0gTnVtYmVyKHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW2ldLnBvc2l0aW9uW2pdLnRvU3RyaW5nKCkuc3BsaXQoJycpWzBdKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgcm93ID0gc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbaV0ucG9zaXRpb25bal0udG9TdHJpbmcoKS5zcGxpdCgnJylbMF07XHJcbiAgICAgICAgICAgIGNvbHVtbiA9IHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW2ldLnBvc2l0aW9uW2pdLnRvU3RyaW5nKCkuc3BsaXQoJycpWzFdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY291bnRDb21wdXRlckNvcHB5Kys7XHJcblxyXG4gICAgICAgIGNvcHB5Q29tcHV0ZXJBcnJbcm93XVtjb2x1bW5dID0gJ1gnO1xyXG4gICAgfVxyXG59XHJcblxyXG5jb25zb2xlLmxvZyhjb3BweUNvbXB1dGVyQXJyLCBjb3VudENvbXB1dGVyQ29wcHkpO1xyXG5cclxuXHJcbmNvbXB1dGVyR2FtZUJvYXJkRmllbGQoY29wcHlDb21wdXRlckFycik7XHJcblxyXG5jb25zdCBzaGlwID0gKGJvZHlMZW5ndGgsIHdoZXJlSGl0cywgc3VuaykgPT4ge1xyXG4gICAgXHJcbiAgICByZXR1cm57XHJcbiAgICAgICAgYm9keUxlbmd0aCxcclxuICAgICAgICB3aGVyZUhpdHMsXHJcbiAgICAgICAgc3VuayxcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgaGl0ID0gKGhpdFBvc2l0aW9uKSA9PiB7XHJcbiAgICBcclxuICAgIHJldHVybntcclxuICAgICAgICBoaXRQb3NpdGlvbixcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgaXNTdW5rID0gKGJvZHlMZW5ndGgpID0+IHtcclxuICAgIGNvbnN0IGhpdHMgPSBib2R5TGVuZ3RoIC0gc2hpcCgpLnN1bms7XHJcblxyXG4gICAgaWYoaGl0cyA9PSAwKXtcclxuICAgICAgICByZXR1cm4gJ3NoaXAgaXMgc3Vuayc7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGhpdHM7XHJcbn1cclxuXHJcbmxldCBkcmFnZ2VkO1xyXG5cclxuZ2FtZUJvYXJkRmllbGRzKGdhbWVGaWVsZHNBcnIpO1xyXG5jcmVhdGVTaGlwKHNoaXBOYW1lQW5kU2l6ZSk7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ3N0YXJ0XCIsIChlKSA9PiB7XHJcbiAgICBkcmFnZ2VkID0gZS50YXJnZXQ7XHJcblxyXG4gICAgZS50YXJnZXQuc3R5bGUub3BhY2l0eSA9IC4zO1xyXG5cclxufSwgZmFsc2UpO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdlbmRcIiwgKGUpID0+IHtcclxuICAgIGUudGFyZ2V0LnN0eWxlLm9wYWNpdHkgPSBcIlwiO1xyXG4gICAgZS50YXJnZXQuZGF0YXNldC5yb3cgPSBlLnRhcmdldC5maXJzdENoaWxkLmRhdGFzZXQucm93O1xyXG4gICAgZS50YXJnZXQuZGF0YXNldC5jb2x1bW4gPSBlLnRhcmdldC5maXJzdENoaWxkLmRhdGFzZXQuY29sdW1uO1xyXG59LCBmYWxzZSk7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ292ZXJcIiwgKGUpID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxufSwgZmFsc2UpO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdlbnRlclwiLCAoZSkgPT4ge1xyXG4gICAgaWYoZS50YXJnZXQuY2xhc3NOYW1lID09IFwiZ2FtZUZpZWxkXCIpe1xyXG4gICAgICAgIGUudGFyZ2V0LnN0eWxlLmJhY2tncm91bmQgPSBcInllbGxvd1wiO1xyXG4gICAgfVxyXG59LCBmYWxzZSk7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ2xlYXZlXCIsIChlKSA9PiB7XHJcblxyXG4gICAgaWYgKGUudGFyZ2V0LmNsYXNzTmFtZSA9PSBcImdhbWVGaWVsZFwiKXtcclxuICAgICAgICBlLnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kID0gXCJcIjtcclxuICAgIH1cclxufSwgZmFsc2UpO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyb3BcIiwgKGUpID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICBpZihlLnRhcmdldC5jbGFzc05hbWUgPT0gJ2dhbWVGaWVsZCcpe1xyXG4gICAgICAgIGUudGFyZ2V0LnN0eWxlLmJhY2tncm91bmQgPSBcIlwiO1xyXG4gICAgICAgIGUudGFyZ2V0LmFwcGVuZENoaWxkKGRyYWdnZWQpO1xyXG5cclxuICAgICAgICBsZXQgc2hpcElzR29vZFNpemUgPSBmYWxzZTtcclxuIFxyXG4gICAgICAgIGxldCByZXN1bHRQb3NpdGlvbiA9IGUudGFyZ2V0LmRhdGFzZXQucm93ICsgZS50YXJnZXQuZGF0YXNldC5jb2x1bW47XHJcblxyXG4gICAgICAgIGxldCBzdHJpbmdUb0ludCA9IE51bWJlcihyZXN1bHRQb3NpdGlvbik7XHJcbiAgICBcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgcmVzdWx0UG9zaXRpb24uc3BsaXQoJycpLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgaWYocmVzdWx0UG9zaXRpb24uc3BsaXQoJycpWzBdID09IDApe1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0UG9zaXRpb24gPSByZXN1bHRQb3NpdGlvbi5zcGxpdCgnJylbMV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ICAgXHJcblxyXG4gICAgICAgIGNvbnN0IG5hbWVTaGlwID0gZS50YXJnZXQuZmlyc3RDaGlsZC5jbGFzc05hbWUuc3BsaXQoJyAnKVsxXTtcclxuICAgICAgICBsZXQgbGVuZ3RoU2hpcDtcclxuXHJcbiAgICAgICAgbGV0IGluZGV4T2JqO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCBzaGlwTmFtZUFuZFNpemUubGVuZ3RoOyBqKyspe1xyXG4gICAgICAgICAgICBpZihzaGlwTmFtZUFuZFNpemVbal0ubmFtZSA9PSBuYW1lU2hpcCl7XHJcbiAgICAgICAgICAgICAgICBsZW5ndGhTaGlwID0gc2hpcE5hbWVBbmRTaXplW2pdLnNpemU7XHJcbiAgICAgICAgICAgICAgICBpbmRleE9iaiA9IGpcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBmaXJzdFBvc2l0aW9uID0gc3RyaW5nVG9JbnQ7XHJcbiAgICAgICAgY29uc3QgbGFzdFNoaXBQb3NpdGlvbiA9IHN0cmluZ1RvSW50ICsgbGVuZ3RoU2hpcCAtIDE7XHJcbiAgICAgICAgY29uc3Qgc2hpcEFyclBvc2l0aW9uID0gW107XHJcblxyXG4gICAgICAgIGZvcihsZXQgeCA9IGZpcnN0UG9zaXRpb247IHggPD0gbGFzdFNoaXBQb3NpdGlvbjsgeCsrKXtcclxuICAgICAgICAgICAgc2hpcEFyclBvc2l0aW9uLnB1c2goeCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBpc1RydWUgPSAoZ2FtZUZpZWxkc0FyciwgZmlyc3RQb3NpdGlvbiwgbGFzdFNoaXBQb3NpdGlvbiwgc2hpcElzR29vZFNpemUpID0+IHtcclxuICAgICAgICAgICAgZm9yKGxldCBuID0gMDsgbiA8IGdhbWVGaWVsZHNBcnIubGVuZ3RoOyBuKyspe1xyXG4gICAgICAgICAgICAgICAgaWYoZ2FtZUZpZWxkc0FycltuXS5pbmNsdWRlcyhmaXJzdFBvc2l0aW9uKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZ2FtZUZpZWxkc0FycltuXS5pbmNsdWRlcyhsYXN0U2hpcFBvc2l0aW9uKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoaXBJc0dvb2RTaXplID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hpcE5hbWVBbmRTaXplW2luZGV4T2JqXS5sYW5kID0gdHJ1ZTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2hpcElzR29vZFNpemU7XHJcbiAgICAgICAgICAgICAgICAgICAgfTsgXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2hpcElzR29vZFNpemUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY3JlYXRlU2hpcChzaGlwTmFtZUFuZFNpemUpO1xyXG5cclxuICAgICAgICBpZighaXNUcnVlKGdhbWVGaWVsZHNBcnIsIGZpcnN0UG9zaXRpb24sIGxhc3RTaGlwUG9zaXRpb24sIHNoaXBJc0dvb2RTaXplKSl7XHJcbiAgICAgICAgICAgIGRyYWdnZWQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkcmFnZ2VkKTtcclxuICAgICAgICAgICAgZS50YXJnZXQuc3R5bGUuYmFja2dyb3VuZCA9IFwiXCI7XHJcbiAgICAgICAgICAgIGNyZWF0ZVNoaXAoc2hpcE5hbWVBbmRTaXplKTtcclxuICAgICAgICAgICAgc2hpcE5hbWVBbmRTaXplW2luZGV4T2JqXS5sYW5kID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBnYW1lQm9hcmRGaWVsZHMoZ2FtZUZpZWxkc0Fycik7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGUudGFyZ2V0LnN0eWxlLmJhY2tncm91bmQgPSBcIlwiO1xyXG4gICAgICAgICAgICBkcmFnZ2VkLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZHJhZ2dlZCk7XHJcbiAgICAgICAgICAgIGUudGFyZ2V0LmFwcGVuZENoaWxkKGRyYWdnZWQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGdhbWVGaWVsZHNBcnIubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IGdhbWVGaWVsZHNBcnJbaV0ubGVuZ3RoOyBqKyspe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGdhbWVGaWVsZHNBcnJbaV1bal0gPT0gZmlyc3RQb3NpdGlvbil7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGdhbWVGaWVsZHNBcnJbaV1bal0gPT0gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGsgPSAwOyBrIDwgbGVuZ3RoU2hpcDsgaysrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGlwTmFtZUFuZFNpemVbaW5kZXhPYmpdLnBvc2l0aW9uLnB1c2goZ2FtZUZpZWxkc0FycltpXVtqICsga10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaV1baiArIGtdID0gJ3gnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpICsgMV1bal0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IHAgPSAwOyBwIDwgbGVuZ3RoU2hpcDsgcCsrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2kgKyAxXVtqICsgcF0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2ldW2ogKyBsZW5ndGhTaGlwXSA9ICd5JztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoZ2FtZUZpZWxkc0FycltpXVtqXSA9PSBnYW1lRmllbGRzQXJyWzBdW2pdKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgayA9IDA7IGsgPCBsZW5ndGhTaGlwOyBrKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoaXBOYW1lQW5kU2l6ZVtpbmRleE9ial0ucG9zaXRpb24ucHVzaChnYW1lRmllbGRzQXJyW2ldW2ogKyBrXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtqICsga10gPSAneCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2kgKyAxXVtqXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgcCA9IDA7IHAgPCBsZW5ndGhTaGlwOyBwKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaSArIDFdW2ogKyBwXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaV1bZmlyc3RQb3NpdGlvbiAtIDFdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtsYXN0U2hpcFBvc2l0aW9uICsgMV0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKGdhbWVGaWVsZHNBcnJbaV1bal0gPT0gZ2FtZUZpZWxkc0Fycls5XVtqXSAmJiBqICE9IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBrID0gMDsgayA8IGxlbmd0aFNoaXA7IGsrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hpcE5hbWVBbmRTaXplW2luZGV4T2JqXS5wb3NpdGlvbi5wdXNoKGdhbWVGaWVsZHNBcnJbaV1baiArIGtdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2ldW2ogKyBrXSA9ICd4JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgcCA9IDA7IHAgPCBsZW5ndGhTaGlwOyBwKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaSAtIDFdW2ogKyBwXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRydWUsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaV1bbGVuZ3RoU2hpcCArIGpdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtqIC0gMV0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKGdhbWVGaWVsZHNBcnJbaV1bal0gPT0gZ2FtZUZpZWxkc0Fycls5XVtqXSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGsgPSAwOyBrIDwgbGVuZ3RoU2hpcDsgaysrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGlwTmFtZUFuZFNpemVbaW5kZXhPYmpdLnBvc2l0aW9uLnB1c2goZ2FtZUZpZWxkc0FycltpXVtqICsga10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaV1baiArIGtdID0gJ3gnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBwID0gMDsgcCA8IGxlbmd0aFNoaXA7IHArKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpIC0gMV1baiArIHBdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codHJ1ZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtsZW5ndGhTaGlwXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGsgPSAwOyBrIDwgbGVuZ3RoU2hpcDsgaysrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGlwTmFtZUFuZFNpemVbaW5kZXhPYmpdLnBvc2l0aW9uLnB1c2goZ2FtZUZpZWxkc0FycltpXVtqICsga10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaV1baiArIGtdID0gJ3gnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpICsgMV1bal0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2kgLSAxXVtqXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaV1baiAtIDFdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtqICsgbGVuZ3RoU2hpcF0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IHAgPSAwOyBwIDwgbGVuZ3RoU2hpcDsgcCsrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2kgKyAxXVtqICsgcF0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpIC0gMV1baiArIHBdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRyYWdnZWQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkcmFnZ2VkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY3JlYXRlU2hpcChzaGlwTmFtZUFuZFNpemUpOyAgXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaXNQb3NpdGlvblRydWUgPSAoc2hpcE5hbWVBbmRTaXplKSA9PiB7XHJcbiAgICAgICAgbGV0IGNvdW50ID0gMDtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgc2hpcE5hbWVBbmRTaXplLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgaWYoc2hpcE5hbWVBbmRTaXplW2ldLnBvc2l0aW9uLmxlbmd0aCl7XHJcbiAgICAgICAgICAgICAgICBjb3VudCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZihjb3VudCA9PSA1KXtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYoaXNQb3NpdGlvblRydWUoc2hpcE5hbWVBbmRTaXplKSl7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ3N0YXJ0IGdhbWUnKVxyXG4gICAgfVxyXG5cclxuICAgIGdhbWVCb2FyZEZpZWxkcyhnYW1lRmllbGRzQXJyKTtcclxuXHJcbiAgICBjb25zb2xlLmxvZyhnYW1lRmllbGRzQXJyKTtcclxuICAgIGNvbnNvbGUubG9nKHNoaXBOYW1lQW5kU2l6ZSk7XHJcbn0sIGZhbHNlKTsiXSwibmFtZXMiOlsiZ2FtZUZpZWxkc0FyciIsImdhbWVCb2FyZENsYXNzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwidGV4dENvbnRlbnQiLCJpIiwiaiIsImdhbWVGaWVsZCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJkYXRhc2V0Iiwicm93IiwiY29sdW1uIiwiYXBwZW5kQ2hpbGQiLCJzaGlwTmFtZUFuZFNpemUiLCJzaGlwc0NsYXNzIiwibGVuZ3RoIiwibGFuZCIsInNoaXAiLCJpZCIsIm5hbWUiLCJzdHlsZSIsImdyaWRUZW1wbGF0ZUNvbHVtbnMiLCJzaXplIiwid2lkdGgiLCJoZWlnaHQiLCJiYWNrZ3JvdW5kQ29sb3IiLCJkcmFnZ2FibGUiLCJzcXVhcmUiLCJjb21wdXRlckFyciIsImNvbXB1dGVyR2FtZWJvYXJkIiwicm93Q2hvaWNlIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiY29sdW1uQ2hvaWNlIiwiY291bnQiLCJuZXdBcnIiLCJwdXNoIiwicG9zaXRpb24iLCJzaGlwTmFtZUFuZFNpemVDb21wdXRlciIsInRydWVPckZhbHNlIiwiaXRlbSIsImNvdW50QXJyIiwiYiIsIngiLCJldmVyeSIsIm8iLCJmaWx0ZXIiLCJjb25zb2xlIiwibG9nIiwidmFsdWUiLCJudW0iLCJ0b1N0cmluZyIsIk51bWJlciIsInNwbGl0IiwiZmluZEluZGV4Q29tcHV0ZXIiLCJmaW5kSW5kZXgiLCJjb21wdXRlciIsImNvcHB5Q29tcHV0ZXJBcnIiLCJjb3VudENvbXBvdGVyIiwiZHJhZ2dlZCIsImNvdW50Q29tcHV0ZXJDb3BweSIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwidGFyZ2V0Iiwib3BhY2l0eSIsImZpcnN0Q2hpbGQiLCJwcmV2ZW50RGVmYXVsdCIsImNsYXNzTmFtZSIsImJhY2tncm91bmQiLCJzaGlwSXNHb29kU2l6ZSIsInJlc3VsdFBvc2l0aW9uIiwic3RyaW5nVG9JbnQiLCJuYW1lU2hpcCIsImxlbmd0aFNoaXAiLCJpbmRleE9iaiIsImZpcnN0UG9zaXRpb24iLCJsYXN0U2hpcFBvc2l0aW9uIiwic2hpcEFyclBvc2l0aW9uIiwiaXNUcnVlIiwibiIsImluY2x1ZGVzIiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwiayIsInAiLCJpc1Bvc2l0aW9uVHJ1ZSJdLCJzb3VyY2VSb290IjoiIn0=