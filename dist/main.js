(()=>{"use strict";const e=e=>{const t=document.querySelector(".gameboard");t.textContent="";for(let a=0;a<10;a++)for(let d=0;d<10;d++)if("x"==e[a][d]){const e=document.createElement("div");e.classList.add("checked"),e.dataset.row=a,e.dataset.column=d,t.appendChild(e)}else{const e=document.createElement("div");e.classList.add("gameField"),e.dataset.row=a,e.dataset.column=d,t.appendChild(e)}},t=e=>{const t=document.querySelector(".ships");t.textContent="";for(let a=0;a<e.length;a++)if(1==e[a].land);else{const d=document.createElement("div");d.classList.add("ship"),d.dataset.id=e[a].id,d.classList.add(e[a].name),d.style.gridTemplateColumns=`repeat(${e[a].size}, 1fr)`,d.style.width=`calc(${e[a].id} * 50px)`,d.style.height="50px",d.style.backgroundColor="black",d.draggable=!0;for(let t=0;t<e[a].size;t++){const e=document.createElement("div");e.classList.add("square"),d.appendChild(e)}t.appendChild(d)}},a=[{name:"Destroyer",size:2,id:2,land:!1,position:[]},{name:"Submarine",size:3,id:3,land:!1,position:[]},{name:"Cruiser",size:3,id:3,land:!1,position:[]},{name:"Battleship",size:4,id:4,land:!1,position:[]},{name:"Carrier",size:5,id:5,land:!1,position:[]}];let d;const s=[];let l=0;for(let e=0;e<10;e++){const e=[];for(let t=0;t<10;t++)e.push(l),l++;s.push(e)}e(s),t(a),document.addEventListener("dragstart",(e=>{d=e.target,e.target.style.opacity=.3}),!1),document.addEventListener("dragend",(e=>{e.target.style.opacity="",e.target.dataset.row=e.target.firstChild.dataset.row,e.target.dataset.column=e.target.firstChild.dataset.column}),!1),document.addEventListener("dragover",(e=>{e.preventDefault()}),!1),document.addEventListener("dragenter",(e=>{"gameField"==e.target.className&&(e.target.style.background="yellow")}),!1),document.addEventListener("dragleave",(e=>{"gameField"==e.target.className&&(e.target.style.background="")}),!1),document.addEventListener("drop",(l=>{if(l.preventDefault(),"gameField"==l.target.className){l.target.style.background="",l.target.appendChild(d);let e=!1,n=l.target.dataset.row+l.target.dataset.column,r=Number(n);n.split("")[0],n.split("")[1];for(let e=0;e<n.split("").length;e++)0==n.split("")[0]&&(n=n.split("")[1]);const o=l.target.firstChild.className.split(" ")[1];let i,c;for(let e=0;e<a.length;e++)a[e].name==o&&(i=a[e].size,c=e);const g=r,m=r+i-1,p=[];for(let e=g;e<=m;e++)p.push(e);const u=(e,t,d,s)=>{for(let s=0;s<e.length;s++)if(e[s].includes(t))return!!e[s].includes(d)&&(!0,a[c].land=!0,true)};if(u(s,g,m,e)){l.target.style.background="",d.parentNode.removeChild(d),l.target.appendChild(d);for(let e=0;e<s.length;e++)for(let t=0;t<s[e].length;t++)if(s[e][t]==g)for(let d=0;d<i;d++)a[c].position.push(s[e][t+d]),s[e][t+d]="x";d.parentNode.removeChild(d)}else d.parentNode.removeChild(d),l.target.style.background="",t(a),a[c].land=!1;t(a)}e(s),console.log(s),console.log(a)}),!1)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZXNoaXAvLi9zcmMvY29tcG9uZW50cy9nYW1lQm9hcmRGaWVsZHMuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9jb21wb25lbnRzL2NyZWF0ZVNoaXAuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBnYW1lQm9hcmRGaWVsZHMgPSAoZ2FtZUZpZWxkc0FycikgPT4ge1xyXG4gICAgY29uc3QgZ2FtZUJvYXJkQ2xhc3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FtZWJvYXJkJyk7XHJcblxyXG4gICAgZ2FtZUJvYXJkQ2xhc3MudGV4dENvbnRlbnQgPSAnJztcclxuXHJcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgMTA7IGkrKyl7XHJcbiAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IDEwOyBqKyspe1xyXG4gICAgICAgICAgICBpZihnYW1lRmllbGRzQXJyW2ldW2pdID09ICd4Jyl7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBnYW1lRmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5jbGFzc0xpc3QuYWRkKCdjaGVja2VkJyk7XHJcbiAgICAgICAgICAgICAgICBnYW1lRmllbGQuZGF0YXNldC5yb3cgPSBpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmRhdGFzZXQuY29sdW1uID0gajtcclxuXHJcbiAgICAgICAgICAgICAgICBnYW1lQm9hcmRDbGFzcy5hcHBlbmRDaGlsZChnYW1lRmllbGQpO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGdhbWVGaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmNsYXNzTGlzdC5hZGQoJ2dhbWVGaWVsZCcpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmRhdGFzZXQucm93ID0gaTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5kYXRhc2V0LmNvbHVtbiA9IGo7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGdhbWVCb2FyZENsYXNzLmFwcGVuZENoaWxkKGdhbWVGaWVsZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGdhbWVCb2FyZEZpZWxkczsiLCJjb25zdCBjcmVhdGVTaGlwID0gKHNoaXBOYW1lQW5kU2l6ZSkgPT4ge1xyXG4gICAgY29uc3Qgc2hpcHNDbGFzcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaGlwcycpO1xyXG5cclxuICAgIHNoaXBzQ2xhc3MudGV4dENvbnRlbnQgPSAnJztcclxuXHJcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgc2hpcE5hbWVBbmRTaXplLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICBpZihzaGlwTmFtZUFuZFNpemVbaV0ubGFuZCA9PSB0cnVlKXtcclxuXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGNvbnN0IHNoaXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgc2hpcC5jbGFzc0xpc3QuYWRkKCdzaGlwJyk7XHJcbiAgICAgICAgICAgIHNoaXAuZGF0YXNldC5pZCA9IHNoaXBOYW1lQW5kU2l6ZVtpXS5pZDtcclxuICAgICAgICAgICAgc2hpcC5jbGFzc0xpc3QuYWRkKHNoaXBOYW1lQW5kU2l6ZVtpXS5uYW1lKTtcclxuICAgICAgICAgICAgc2hpcC5zdHlsZS5ncmlkVGVtcGxhdGVDb2x1bW5zID0gYHJlcGVhdCgke3NoaXBOYW1lQW5kU2l6ZVtpXS5zaXplfSwgMWZyKWA7XHJcbiAgICAgICAgICAgIHNoaXAuc3R5bGUud2lkdGggPSBgY2FsYygke3NoaXBOYW1lQW5kU2l6ZVtpXS5pZH0gKiA1MHB4KWA7XHJcbiAgICAgICAgICAgIHNoaXAuc3R5bGUuaGVpZ2h0ID0gJzUwcHgnO1xyXG4gICAgICAgICAgICBzaGlwLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdibGFjayc7IFxyXG4gICAgICAgICAgICBzaGlwLmRyYWdnYWJsZSA9IHRydWU7XHJcblxyXG5cclxuICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IHNoaXBOYW1lQW5kU2l6ZVtpXS5zaXplOyBqKyspe1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3F1YXJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBzcXVhcmUuY2xhc3NMaXN0LmFkZCgnc3F1YXJlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgc2hpcC5hcHBlbmRDaGlsZChzcXVhcmUpO1xyXG4gICAgICAgICAgICB9ICAgXHJcblxyXG4gICAgICAgICAgICBzaGlwc0NsYXNzLmFwcGVuZENoaWxkKHNoaXApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlU2hpcDsiLCJpbXBvcnQgZ2FtZUJvYXJkRmllbGRzIGZyb20gXCIuL2NvbXBvbmVudHMvZ2FtZUJvYXJkRmllbGRzXCI7XHJcbmltcG9ydCBjcmVhdGVTaGlwIGZyb20gXCIuL2NvbXBvbmVudHMvY3JlYXRlU2hpcFwiO1xyXG5cclxuXHJcbmNvbnN0IHNoaXBOYW1lQW5kU2l6ZSA9IFtcclxuICAgIHtuYW1lOiAnRGVzdHJveWVyJywgc2l6ZTogMiwgaWQ6IDIsIGxhbmQ6IGZhbHNlLCBwb3NpdGlvbjogW119LFxyXG4gICAge25hbWU6ICdTdWJtYXJpbmUnLCBzaXplOiAzLCBpZDogMywgbGFuZDogZmFsc2UsIHBvc2l0aW9uOiBbXX0sXHJcbiAgICB7bmFtZTogJ0NydWlzZXInLCBzaXplOiAzLCBpZDogMywgbGFuZDogZmFsc2UsIHBvc2l0aW9uOiBbXX0sXHJcbiAgICB7bmFtZTogJ0JhdHRsZXNoaXAnLCBzaXplOiA0LCBpZDogNCwgbGFuZDogZmFsc2UsIHBvc2l0aW9uOiBbXX0sXHJcbiAgICB7bmFtZTogJ0NhcnJpZXInLCBzaXplOiA1LCBpZDogNSwgbGFuZDogZmFsc2UsIHBvc2l0aW9uOiBbXX0sXHJcbl1cclxuXHJcbmNvbnN0IHNoaXAgPSAoYm9keUxlbmd0aCwgd2hlcmVIaXRzLCBzdW5rKSA9PiB7XHJcbiAgICBcclxuICAgIHJldHVybntcclxuICAgICAgICBib2R5TGVuZ3RoLFxyXG4gICAgICAgIHdoZXJlSGl0cyxcclxuICAgICAgICBzdW5rLFxyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBoaXQgPSAoaGl0UG9zaXRpb24pID0+IHtcclxuICAgIFxyXG4gICAgcmV0dXJue1xyXG4gICAgICAgIGhpdFBvc2l0aW9uLFxyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBpc1N1bmsgPSAoYm9keUxlbmd0aCkgPT4ge1xyXG4gICAgY29uc3QgaGl0cyA9IGJvZHlMZW5ndGggLSBzaGlwKCkuc3VuaztcclxuXHJcbiAgICBpZihoaXRzID09IDApe1xyXG4gICAgICAgIHJldHVybiAnc2hpcCBpcyBzdW5rJztcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gaGl0cztcclxufVxyXG5cclxubGV0IGRyYWdnZWQ7XHJcblxyXG5jb25zdCBnYW1lRmllbGRzQXJyID0gW107XHJcbmxldCBjb3VudCA9IDA7XHJcblxyXG5mb3IobGV0IGkgPSAwOyBpIDwgMTA7IGkrKyl7XHJcbiAgICBjb25zdCBuZXdBcnIgPSBbXTtcclxuXHJcbiAgICBmb3IobGV0IGogPSAwOyBqIDwgMTA7IGorKyl7XHJcbiAgICAgICAgbmV3QXJyLnB1c2goY291bnQpO1xyXG4gICAgICAgIGNvdW50Kys7XHJcbiAgICB9XHJcbiAgICBnYW1lRmllbGRzQXJyLnB1c2gobmV3QXJyKTtcclxufVxyXG5cclxuZ2FtZUJvYXJkRmllbGRzKGdhbWVGaWVsZHNBcnIpO1xyXG5jcmVhdGVTaGlwKHNoaXBOYW1lQW5kU2l6ZSk7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ3N0YXJ0XCIsIChlKSA9PiB7XHJcbiAgICBkcmFnZ2VkID0gZS50YXJnZXQ7XHJcblxyXG4gICAgZS50YXJnZXQuc3R5bGUub3BhY2l0eSA9IC4zO1xyXG5cclxufSwgZmFsc2UpO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdlbmRcIiwgKGUpID0+IHtcclxuICAgIGUudGFyZ2V0LnN0eWxlLm9wYWNpdHkgPSBcIlwiO1xyXG4gICAgZS50YXJnZXQuZGF0YXNldC5yb3cgPSBlLnRhcmdldC5maXJzdENoaWxkLmRhdGFzZXQucm93O1xyXG4gICAgZS50YXJnZXQuZGF0YXNldC5jb2x1bW4gPSBlLnRhcmdldC5maXJzdENoaWxkLmRhdGFzZXQuY29sdW1uO1xyXG59LCBmYWxzZSk7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ292ZXJcIiwgKGUpID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxufSwgZmFsc2UpO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdlbnRlclwiLCAoZSkgPT4ge1xyXG4gICAgaWYoZS50YXJnZXQuY2xhc3NOYW1lID09IFwiZ2FtZUZpZWxkXCIpe1xyXG4gICAgICAgIGUudGFyZ2V0LnN0eWxlLmJhY2tncm91bmQgPSBcInllbGxvd1wiO1xyXG4gICAgfVxyXG59LCBmYWxzZSk7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ2xlYXZlXCIsIChlKSA9PiB7XHJcblxyXG4gICAgaWYgKGUudGFyZ2V0LmNsYXNzTmFtZSA9PSBcImdhbWVGaWVsZFwiKXtcclxuICAgICAgICBlLnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kID0gXCJcIjtcclxuICAgIH1cclxufSwgZmFsc2UpO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyb3BcIiwgKGUpID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICBpZihlLnRhcmdldC5jbGFzc05hbWUgPT0gJ2dhbWVGaWVsZCcpe1xyXG4gICAgICAgIGUudGFyZ2V0LnN0eWxlLmJhY2tncm91bmQgPSBcIlwiO1xyXG4gICAgICAgIGUudGFyZ2V0LmFwcGVuZENoaWxkKGRyYWdnZWQpO1xyXG5cclxuICAgICAgICBsZXQgc2hpcElzR29vZFNpemUgPSBmYWxzZTtcclxuIFxyXG4gICAgICAgIGxldCByZXN1bHRQb3NpdGlvbiA9IGUudGFyZ2V0LmRhdGFzZXQucm93ICsgZS50YXJnZXQuZGF0YXNldC5jb2x1bW47XHJcblxyXG4gICAgICAgIGxldCBzdHJpbmdUb0ludCA9IE51bWJlcihyZXN1bHRQb3NpdGlvbik7XHJcblxyXG4gICAgICAgIGxldCByb3cgPSByZXN1bHRQb3NpdGlvbi5zcGxpdCgnJylbMF07XHJcbiAgICAgICAgbGV0IGNvbHVtbiA9IHJlc3VsdFBvc2l0aW9uLnNwbGl0KCcnKVsxXTtcclxuICAgIFxyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCByZXN1bHRQb3NpdGlvbi5zcGxpdCgnJykubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICBpZihyZXN1bHRQb3NpdGlvbi5zcGxpdCgnJylbMF0gPT0gMCl7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRQb3NpdGlvbiA9IHJlc3VsdFBvc2l0aW9uLnNwbGl0KCcnKVsxXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gICBcclxuXHJcbiAgICAgICAgY29uc3QgbmFtZVNoaXAgPSBlLnRhcmdldC5maXJzdENoaWxkLmNsYXNzTmFtZS5zcGxpdCgnICcpWzFdO1xyXG4gICAgICAgIGxldCBsZW5ndGhTaGlwO1xyXG5cclxuICAgICAgICBsZXQgaW5kZXhPYmo7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IHNoaXBOYW1lQW5kU2l6ZS5sZW5ndGg7IGorKyl7XHJcbiAgICAgICAgICAgIGlmKHNoaXBOYW1lQW5kU2l6ZVtqXS5uYW1lID09IG5hbWVTaGlwKXtcclxuICAgICAgICAgICAgICAgIGxlbmd0aFNoaXAgPSBzaGlwTmFtZUFuZFNpemVbal0uc2l6ZTtcclxuICAgICAgICAgICAgICAgIGluZGV4T2JqID0galxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGZpcnN0UG9zaXRpb24gPSBzdHJpbmdUb0ludDtcclxuICAgICAgICBjb25zdCBsYXN0U2hpcFBvc2l0aW9uID0gc3RyaW5nVG9JbnQgKyBsZW5ndGhTaGlwIC0gMTtcclxuICAgICAgICBjb25zdCBzaGlwQXJyUG9zaXRpb24gPSBbXTtcclxuXHJcbiAgICAgICAgZm9yKGxldCB4ID0gZmlyc3RQb3NpdGlvbjsgeCA8PSBsYXN0U2hpcFBvc2l0aW9uOyB4Kyspe1xyXG4gICAgICAgICAgICBzaGlwQXJyUG9zaXRpb24ucHVzaCh4KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGlzVHJ1ZSA9IChnYW1lRmllbGRzQXJyLCBmaXJzdFBvc2l0aW9uLCBsYXN0U2hpcFBvc2l0aW9uLCBzaGlwSXNHb29kU2l6ZSkgPT4ge1xyXG4gICAgICAgICAgICBmb3IobGV0IG4gPSAwOyBuIDwgZ2FtZUZpZWxkc0Fyci5sZW5ndGg7IG4rKyl7XHJcbiAgICAgICAgICAgICAgICBpZihnYW1lRmllbGRzQXJyW25dLmluY2x1ZGVzKGZpcnN0UG9zaXRpb24pKXtcclxuICAgICAgICAgICAgICAgICAgICBpZihnYW1lRmllbGRzQXJyW25dLmluY2x1ZGVzKGxhc3RTaGlwUG9zaXRpb24pKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hpcElzR29vZFNpemUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGlwTmFtZUFuZFNpemVbaW5kZXhPYmpdLmxhbmQgPSB0cnVlO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzaGlwSXNHb29kU2l6ZTtcclxuICAgICAgICAgICAgICAgICAgICB9OyBcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzaGlwSXNHb29kU2l6ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZighaXNUcnVlKGdhbWVGaWVsZHNBcnIsIGZpcnN0UG9zaXRpb24sIGxhc3RTaGlwUG9zaXRpb24sIHNoaXBJc0dvb2RTaXplKSl7XHJcbiAgICAgICAgICAgIGRyYWdnZWQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkcmFnZ2VkKTtcclxuICAgICAgICAgICAgZS50YXJnZXQuc3R5bGUuYmFja2dyb3VuZCA9IFwiXCI7XHJcbiAgICAgICAgICAgIGNyZWF0ZVNoaXAoc2hpcE5hbWVBbmRTaXplKTtcclxuICAgICAgICAgICAgc2hpcE5hbWVBbmRTaXplW2luZGV4T2JqXS5sYW5kID0gZmFsc2U7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGUudGFyZ2V0LnN0eWxlLmJhY2tncm91bmQgPSBcIlwiO1xyXG4gICAgICAgICAgICBkcmFnZ2VkLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZHJhZ2dlZCk7XHJcbiAgICAgICAgICAgIGUudGFyZ2V0LmFwcGVuZENoaWxkKGRyYWdnZWQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGdhbWVGaWVsZHNBcnIubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IGdhbWVGaWVsZHNBcnJbaV0ubGVuZ3RoOyBqKyspe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGdhbWVGaWVsZHNBcnJbaV1bal0gPT0gZmlyc3RQb3NpdGlvbil7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgayA9IDA7IGsgPCBsZW5ndGhTaGlwOyBrKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hpcE5hbWVBbmRTaXplW2luZGV4T2JqXS5wb3NpdGlvbi5wdXNoKGdhbWVGaWVsZHNBcnJbaV1baiArIGtdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaV1baiArIGtdID0gJ3gnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRyYWdnZWQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkcmFnZ2VkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNyZWF0ZVNoaXAoc2hpcE5hbWVBbmRTaXplKTsgIFxyXG4gICAgfVxyXG5cclxuICAgIGdhbWVCb2FyZEZpZWxkcyhnYW1lRmllbGRzQXJyKVxyXG5cclxuICAgIGNvbnNvbGUubG9nKGdhbWVGaWVsZHNBcnIpO1xyXG4gICAgY29uc29sZS5sb2coc2hpcE5hbWVBbmRTaXplKTtcclxufSwgZmFsc2UpOyJdLCJuYW1lcyI6WyJnYW1lRmllbGRzQXJyIiwiZ2FtZUJvYXJkQ2xhc3MiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0ZXh0Q29udGVudCIsImkiLCJqIiwiZ2FtZUZpZWxkIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImRhdGFzZXQiLCJyb3ciLCJjb2x1bW4iLCJhcHBlbmRDaGlsZCIsInNoaXBOYW1lQW5kU2l6ZSIsInNoaXBzQ2xhc3MiLCJsZW5ndGgiLCJsYW5kIiwic2hpcCIsImlkIiwibmFtZSIsInN0eWxlIiwiZ3JpZFRlbXBsYXRlQ29sdW1ucyIsInNpemUiLCJ3aWR0aCIsImhlaWdodCIsImJhY2tncm91bmRDb2xvciIsImRyYWdnYWJsZSIsInNxdWFyZSIsInBvc2l0aW9uIiwiZHJhZ2dlZCIsImNvdW50IiwibmV3QXJyIiwicHVzaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwidGFyZ2V0Iiwib3BhY2l0eSIsImZpcnN0Q2hpbGQiLCJwcmV2ZW50RGVmYXVsdCIsImNsYXNzTmFtZSIsImJhY2tncm91bmQiLCJzaGlwSXNHb29kU2l6ZSIsInJlc3VsdFBvc2l0aW9uIiwic3RyaW5nVG9JbnQiLCJOdW1iZXIiLCJzcGxpdCIsIm5hbWVTaGlwIiwibGVuZ3RoU2hpcCIsImluZGV4T2JqIiwiZmlyc3RQb3NpdGlvbiIsImxhc3RTaGlwUG9zaXRpb24iLCJzaGlwQXJyUG9zaXRpb24iLCJ4IiwiaXNUcnVlIiwibiIsImluY2x1ZGVzIiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwiayIsImNvbnNvbGUiLCJsb2ciXSwic291cmNlUm9vdCI6IiJ9