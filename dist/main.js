(()=>{"use strict";const t=t=>{const e=document.querySelector(".gameboard");e.textContent="";for(let o=0;o<10;o++)for(let n=0;n<10;n++)if("x"==t[o][n]){const t=document.createElement("div");t.classList.add("checked"),t.dataset.row=o,t.dataset.column=n,e.appendChild(t)}else if("y"==t[o][n]){const t=document.createElement("div");t.classList.add("blocked"),t.dataset.row=o,t.dataset.column=n,e.appendChild(t)}else{const t=document.createElement("div");t.classList.add("gameField"),t.dataset.row=o,t.dataset.column=n,e.appendChild(t)}},e=t=>{const e=document.querySelector(".ships");e.textContent="";for(let o=0;o<t.length;o++)if(1==t[o].land);else{const n=document.createElement("div");n.classList.add("ship"),n.dataset.id=t[o].id,n.classList.add(t[o].name),n.style.gridTemplateColumns=`repeat(${t[o].size}, 1fr)`,n.style.width=`calc(${t[o].id} * 50px)`,n.style.height="50px",n.style.backgroundColor="black",n.draggable=!0;for(let e=0;e<t[o].size;e++){const t=document.createElement("div");t.classList.add("square"),n.appendChild(t)}e.appendChild(n)}},o=t=>{const e=document.querySelector(".computerGameBoard");e.textContent="";for(let o=0;o<10;o++)for(let n=0;n<10;n++)if("X"==t[o][n]){const t=document.createElement("div");t.classList.add("plays"),t.dataset.row=o,t.dataset.column=n,e.appendChild(t)}else{const t=document.createElement("div");t.classList.add("field"),t.dataset.row=o,t.dataset.column=n,e.appendChild(t)}},n=[],i=t=>{let e=0;for(let o=0;o<10;o++){const o=[];for(let t=0;t<10;t++)o.push(e),e++;t.push(o)}};i(n);const l=[{name:"Destroyer",size:2,id:2,land:!1,position:[]},{name:"Submarine",size:3,id:3,land:!1,position:[]},{name:"Cruiser",size:3,id:3,land:!1,position:[]},{name:"Battleship",size:4,id:4,land:!1,position:[]},{name:"Carrier",size:5,id:5,land:!1,position:[]}],s=[{name:"Destroyer",size:2,position:[]},{name:"Submarine",size:3,position:[]},{name:"Cruiser",size:3,position:[]},{name:"Battleship",size:4,position:[]},{name:"Carrier",size:5,position:[]}];let r=[];const a=t=>{for(let e=0;e<100;e++)t.push(e)};a([]),a(r);const d=t=>"X"!==t;let c=[];i(c),(()=>{let t=0;c.length=0,i(c),o(c);for(let o=0;o<1e3;o++){for(let t=0;t<s.length;t++)s[t].position.every(d)||(s[t].position.length=0);if(s[0].position.length&&s[1].position.length&&s[2].position.length&&s[3].position.length&&s[4].position.length){for(let e=0;e<10;e++)c[e].filter((t=>"X"==t))&&(t+=c[e].filter((t=>"X"==t)).length);return console.log(t),{computerArr:c,shipNameAndSizeComputer:s}}for(let t=0;t<s.length;t++)if(s[t].position.length>1);else{const o=(e=t,Math.floor(94*Math.random())+s[e].size);let n,i;1==o.toString().length?(n=0,i=Number(o.toString().split("")[0])):(n=Number(o.toString().split("")[0]),i=Number(o.toString().split("")[1]));const l=c[n].findIndex((t=>t==o));if(l>0&&l-s[t].size>=0)for(let e=0;e<s[t].size;e++)s[t].position.push(c[n][l-e]),c[n][l-e]="X"}}var e})();const p=[];i(p);let g,u=0;(()=>{for(let t=0;t<s.length;t++)for(let e=0;e<s[t].position.length;e++){let o,n;1==s[t].position[e].toString().split("").length?(o=0,n=Number(s[t].position[e].toString().split("")[0])):(o=s[t].position[e].toString().split("")[0],n=s[t].position[e].toString().split("")[1]),u++,p[o][n]="X"}})(),console.log(p,u),o(p),t(n),e(l),document.addEventListener("dragstart",(t=>{g=t.target,t.target.style.opacity=.3}),!1),document.addEventListener("dragend",(t=>{t.target.style.opacity="",t.target.dataset.row=t.target.firstChild.dataset.row,t.target.dataset.column=t.target.firstChild.dataset.column}),!1),document.addEventListener("dragover",(t=>{t.preventDefault()}),!1),document.addEventListener("dragenter",(t=>{"gameField"==t.target.className&&(t.target.style.background="yellow")}),!1),document.addEventListener("dragleave",(t=>{"gameField"==t.target.className&&(t.target.style.background="")}),!1),document.addEventListener("drop",(o=>{if(o.preventDefault(),"gameField"==o.target.className){o.target.style.background="",o.target.appendChild(g);let i=!1,s=o.target.dataset.row+o.target.dataset.column,r=Number(s);for(let t=0;t<s.split("").length;t++)0==s.split("")[0]&&(s=s.split("")[1]);const a=o.target.firstChild.className.split(" ")[1];let d,c;for(let t=0;t<l.length;t++)l[t].name==a&&(d=l[t].size,c=t);const p=r,u=r+d-1,m=[];for(let t=p;t<=u;t++)m.push(t);e(l),((t,e,o,n,i)=>{for(let s=0;s<t.length;s++)if(t[s].includes(e))return!!t[s].includes(o)&&(n=!0,l[i].land=!0,n)})(n,p,u,i,c)?(o.target.style.background="",o.target.appendChild(g),g.parentNode.removeChild(g),((t,e,o,n,i)=>{for(let s=0;s<t.length;s++)for(let r=0;r<t[s].length;r++)if(t[s][r]==e)if(0==t[s][r]){for(let e=0;e<o;e++)l[n].position.push(t[s][r+e]),t[s][r+e]="x";t[s+1][r]="y";for(let e=0;e<o;e++)t[s+1][r+e]="y";t[s][r+o]="y"}else if(t[s][r]==t[0][r]){for(let e=0;e<o;e++)l[n].position.push(t[s][r+e]),t[s][r+e]="x";t[s+1][r]="y";for(let e=0;e<o;e++)t[s+1][r+e]="y";t[s][e-1]="y",t[s][i+1]="y"}else if(t[s][r]==t[9][r]&&0!=r){for(let e=0;e<o;e++)l[n].position.push(t[s][r+e]),t[s][r+e]="x";for(let e=0;e<o;e++)t[s-1][r+e]="y";t[s][o+r]="y",t[s][r-1]="y"}else if(t[s][r]==t[9][r]){for(let e=0;e<o;e++)l[n].position.push(t[s][r+e]),t[s][r+e]="x";for(let e=0;e<o;e++)t[s-1][r+e]="y";t[s][o]="y"}else{for(let e=0;e<o;e++)l[n].position.push(t[s][r+e]),t[s][r+e]="x";t[s+1][r]="y",t[s-1][r]="y",t[s][r-1]="y",t[s][r+o]="y";for(let e=0;e<o;e++)t[s+1][r+e]="y",t[s-1][r+e]="y"}})(n,p,d,c,u)):(o.target.style.background="",g.parentNode.removeChild(g),l[c].land=!1,e(l),t(n)),e(l)}t(n),(t=>{let e=0;for(let o=0;o<t.length;o++)t[o].position.length&&e++;return 5==e})(l)&&m()}),!1);const m=()=>{const t=document.querySelector(".ships");t.parentNode.removeChild(t),[...document.querySelector(".computerGameBoard").childNodes].forEach((t=>{t.addEventListener("click",(t=>{if(t.target.classList.contains("plays")){let e=[];const o=Number(String(t.target.dataset.row)+String(t.target.dataset.column));for(let t=0;t<s.length;t++)for(let e=0;e<s[t].position.length;e++)s[t].position[e]==o&&s[t].position.splice(e,1);t.target.classList.add("field"),t.target.classList.remove("plays");for(let t=0;t<s.length;t++)0==s[t].position.length&&e.push("true");if(5==e.length)return void f("you, [player]")}h(),console.log(r.length),console.log(l)}))}))},h=()=>{for(let t=0;t<1e3;t++){const t=Math.floor(99*Math.random());if(r.findIndex((e=>e==t))>-1){let e=r.findIndex((e=>e==t));1==t.toString().split("").length?(row=0,column=Number(t.toString().split("")[0])):(row=Number(t.toString().split("")[0]),column=Number(t.toString().split("")[1]));let o=r.splice(e,1);if(o){for(let t=0;t<l.length;t++)for(let e=0;e<l[t].position.length;e++)if(l[t].position[e]==o){let o=[];l[t].position.splice(e,1);for(let t=0;t<l.length;t++)0==l[t].position.length&&o.push("true");return 5==o.length?void f("computer"):void 0}let t=[];for(let e=0;e<l.length;e++)for(let o=0;o<l[e].position.length;o++)t.push(l[e].position[o]);return void console.log("You not blow",r.length,t.length)}}}},f=t=>{const e=document.querySelector(".game"),o=document.createElement("div");o.classList.add("fixedWinnerPage");const n=document.createElement("h1");n.textContent=`The winner is [${t}]`,o.appendChild(n),e.appendChild(o)}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoibUJBQUEsTUFpQ0EsRUFqQ3lCQSxJQUNyQixNQUFNQyxFQUFpQkMsU0FBU0MsY0FBYyxjQUU5Q0YsRUFBZUcsWUFBYyxHQUU3QixJQUFJLElBQUlDLEVBQUksRUFBR0EsRUFBSSxHQUFJQSxJQUNuQixJQUFJLElBQUlDLEVBQUksRUFBR0EsRUFBSSxHQUFJQSxJQUNuQixHQUEwQixLQUF2Qk4sRUFBY0ssR0FBR0MsR0FBVSxDQUMxQixNQUFNQyxFQUFZTCxTQUFTTSxjQUFjLE9BQ3pDRCxFQUFVRSxVQUFVQyxJQUFJLFdBQ3hCSCxFQUFVSSxRQUFRQyxJQUFNUCxFQUN4QkUsRUFBVUksUUFBUUUsT0FBU1AsRUFFM0JMLEVBQWVhLFlBQVlQLFFBQ3pCLEdBQTBCLEtBQXZCUCxFQUFjSyxHQUFHQyxHQUFVLENBQ2hDLE1BQU1DLEVBQVlMLFNBQVNNLGNBQWMsT0FDekNELEVBQVVFLFVBQVVDLElBQUksV0FDeEJILEVBQVVJLFFBQVFDLElBQU1QLEVBQ3hCRSxFQUFVSSxRQUFRRSxPQUFTUCxFQUUzQkwsRUFBZWEsWUFBWVAsT0FDMUIsQ0FDRCxNQUFNQSxFQUFZTCxTQUFTTSxjQUFjLE9BQ3pDRCxFQUFVRSxVQUFVQyxJQUFJLGFBQ3hCSCxFQUFVSSxRQUFRQyxJQUFNUCxFQUN4QkUsRUFBVUksUUFBUUUsT0FBU1AsRUFFM0JMLEVBQWVhLFlBQVlQLEtDSzNDLEVBaENvQlEsSUFDaEIsTUFBTUMsRUFBYWQsU0FBU0MsY0FBYyxVQUUxQ2EsRUFBV1osWUFBYyxHQUV6QixJQUFJLElBQUlDLEVBQUksRUFBR0EsRUFBSVUsRUFBZ0JFLE9BQVFaLElBQ3ZDLEdBQThCLEdBQTNCVSxFQUFnQlYsR0FBR2EsVUFFakIsQ0FDRCxNQUFNQyxFQUFPakIsU0FBU00sY0FBYyxPQUNwQ1csRUFBS1YsVUFBVUMsSUFBSSxRQUNuQlMsRUFBS1IsUUFBUVMsR0FBS0wsRUFBZ0JWLEdBQUdlLEdBQ3JDRCxFQUFLVixVQUFVQyxJQUFJSyxFQUFnQlYsR0FBR2dCLE1BQ3RDRixFQUFLRyxNQUFNQyxvQkFBc0IsVUFBVVIsRUFBZ0JWLEdBQUdtQixhQUM5REwsRUFBS0csTUFBTUcsTUFBUSxRQUFRVixFQUFnQlYsR0FBR2UsYUFDOUNELEVBQUtHLE1BQU1JLE9BQVMsT0FDcEJQLEVBQUtHLE1BQU1LLGdCQUFrQixRQUM3QlIsRUFBS1MsV0FBWSxFQUdqQixJQUFJLElBQUl0QixFQUFJLEVBQUdBLEVBQUlTLEVBQWdCVixHQUFHbUIsS0FBTWxCLElBQUksQ0FDNUMsTUFBTXVCLEVBQVMzQixTQUFTTSxjQUFjLE9BQ3RDcUIsRUFBT3BCLFVBQVVDLElBQUksVUFFckJTLEVBQUtMLFlBQVllLEdBR3JCYixFQUFXRixZQUFZSyxLQ0RuQyxFQTFCZ0NXLElBRTVCLE1BQU1DLEVBQW9CN0IsU0FBU0MsY0FBYyxzQkFDakQ0QixFQUFrQjNCLFlBQWMsR0FFaEMsSUFBSSxJQUFJQyxFQUFJLEVBQUdBLEVBQUksR0FBSUEsSUFDbkIsSUFBSSxJQUFJQyxFQUFJLEVBQUdBLEVBQUksR0FBSUEsSUFDbkIsR0FBd0IsS0FBckJ3QixFQUFZekIsR0FBR0MsR0FBVSxDQUN4QixNQUFNQyxFQUFZTCxTQUFTTSxjQUFjLE9BQ3pDRCxFQUFVRSxVQUFVQyxJQUFJLFNBQ3hCSCxFQUFVSSxRQUFRQyxJQUFNUCxFQUN4QkUsRUFBVUksUUFBUUUsT0FBU1AsRUFFM0J5QixFQUFrQmpCLFlBQVlQLE9BQzdCLENBQ0QsTUFBTUEsRUFBWUwsU0FBU00sY0FBYyxPQUN6Q0QsRUFBVUUsVUFBVUMsSUFBSSxTQUN4QkgsRUFBVUksUUFBUUMsSUFBTVAsRUFDeEJFLEVBQVVJLFFBQVFFLE9BQVNQLEVBRTNCeUIsRUFBa0JqQixZQUFZUCxLQ2hCeENQLEVBQWdCLEdBRWhCZ0MsRUFBb0JDLElBQ3RCLElBQUlDLEVBQVEsRUFFWixJQUFJLElBQUk3QixFQUFJLEVBQUdBLEVBQUksR0FBSUEsSUFBSSxDQUN2QixNQUFNOEIsRUFBUyxHQUVmLElBQUksSUFBSTdCLEVBQUksRUFBR0EsRUFBSSxHQUFJQSxJQUNuQjZCLEVBQU9DLEtBQUtGLEdBQ1pBLElBRUpELEVBQUlHLEtBQUtELEtBSWpCSCxFQUFpQmhDLEdBRWpCLE1BQU1lLEVBQWtCLENBQ3BCLENBQUNNLEtBQU0sWUFBYUcsS0FBTSxFQUFHSixHQUFJLEVBQUdGLE1BQU0sRUFBT21CLFNBQVUsSUFDM0QsQ0FBQ2hCLEtBQU0sWUFBYUcsS0FBTSxFQUFHSixHQUFJLEVBQUdGLE1BQU0sRUFBT21CLFNBQVUsSUFDM0QsQ0FBQ2hCLEtBQU0sVUFBV0csS0FBTSxFQUFHSixHQUFJLEVBQUdGLE1BQU0sRUFBT21CLFNBQVUsSUFDekQsQ0FBQ2hCLEtBQU0sYUFBY0csS0FBTSxFQUFHSixHQUFJLEVBQUdGLE1BQU0sRUFBT21CLFNBQVUsSUFDNUQsQ0FBQ2hCLEtBQU0sVUFBV0csS0FBTSxFQUFHSixHQUFJLEVBQUdGLE1BQU0sRUFBT21CLFNBQVUsS0FHdkRDLEVBQTBCLENBQzVCLENBQUNqQixLQUFNLFlBQWFHLEtBQU0sRUFBR2EsU0FBVSxJQUN2QyxDQUFDaEIsS0FBTSxZQUFhRyxLQUFNLEVBQUdhLFNBQVUsSUFDdkMsQ0FBQ2hCLEtBQU0sVUFBV0csS0FBTSxFQUFHYSxTQUFVLElBQ3JDLENBQUNoQixLQUFNLGFBQWNHLEtBQU0sRUFBR2EsU0FBVSxJQUN4QyxDQUFDaEIsS0FBTSxVQUFXRyxLQUFNLEVBQUdhLFNBQVUsS0FHekMsSUFBSUUsRUFBc0IsR0FHMUIsTUFBTUMsRUFBcUJQLElBQ3ZCLElBQUksSUFBSTVCLEVBQUksRUFBR0EsRUFBSSxJQUFLQSxJQUNwQjRCLEVBQUlHLEtBQUsvQixJQUlqQm1DLEVBUnVCLElBU3ZCQSxFQUFrQkQsR0FFbEIsTUFBTUUsRUFBZUMsR0FDRCxNQUFUQSxFQUdYLElBQUlaLEVBQWMsR0FFbEJFLEVBQWlCRixHQU1BLE1BQ2IsSUFBSWEsRUFBVyxFQUNmYixFQUFZYixPQUFTLEVBRXJCZSxFQUFpQkYsR0FDakIsRUFBdUJBLEdBRXZCLElBQUksSUFBSWMsRUFBSSxFQUFHQSxFQUFJLElBQU1BLElBQUksQ0FDekIsSUFBSSxJQUFJQyxFQUFJLEVBQUdBLEVBQUlQLEVBQXdCckIsT0FBUTRCLElBQzVDUCxFQUF3Qk8sR0FBR1IsU0FBU1MsTUFBTUwsS0FHekNILEVBQXdCTyxHQUFHUixTQUFTcEIsT0FBUyxHQUlyRCxHQUFHcUIsRUFBd0IsR0FBR0QsU0FBU3BCLFFBQVVxQixFQUF3QixHQUFHRCxTQUFTcEIsUUFBVXFCLEVBQXdCLEdBQUdELFNBQVNwQixRQUFVcUIsRUFBd0IsR0FBR0QsU0FBU3BCLFFBQVVxQixFQUF3QixHQUFHRCxTQUFTcEIsT0FBTyxDQUNsTyxJQUFJLElBQUk4QixFQUFJLEVBQUdBLEVBQUksR0FBSUEsSUFDaEJqQixFQUFZaUIsR0FBR0MsUUFBT04sR0FBaUIsS0FBUkEsTUFDOUJDLEdBQVliLEVBQVlpQixHQUFHQyxRQUFPTixHQUFnQixLQUFSQSxJQUFhekIsUUFLL0QsT0FGQWdDLFFBQVFDLElBQUlQLEdBRUwsQ0FDSGIsWUFBQUEsRUFDQVEsd0JBQUFBLEdBR0osSUFBSSxJQUFJakMsRUFBSSxFQUFHQSxFQUFJaUMsRUFBd0JyQixPQUFRWixJQUMvQyxHQUFHaUMsRUFBd0JqQyxHQUFHZ0MsU0FBU3BCLE9BQVMsT0FFM0MsQ0FDRCxNQUFNa0MsR0FyQ0ZDLEVBcUN5Qi9DLEVBcEN0Q2dELEtBQUtDLE1BQXNCLEdBQWhCRCxLQUFLRSxVQUFpQmpCLEVBQXdCYyxHQUFLNUIsTUFxQ3JELElBQUlaLEVBQ0FDLEVBRTBCLEdBQTNCc0MsRUFBTUssV0FBV3ZDLFFBQ2hCTCxFQUFNLEVBQ05DLEVBQVM0QyxPQUFPTixFQUFNSyxXQUFXRSxNQUFNLElBQUksTUFFM0M5QyxFQUFNNkMsT0FBT04sRUFBTUssV0FBV0UsTUFBTSxJQUFJLElBQ3hDN0MsRUFBUzRDLE9BQU9OLEVBQU1LLFdBQVdFLE1BQU0sSUFBSSxLQUcvQyxNQUFNQyxFQUFvQjdCLEVBQVlsQixHQUFLZ0QsV0FBVWxCLEdBQVFBLEdBQVFTLElBRXJFLEdBQUdRLEVBQW9CLEdBQ2hCQSxFQUFvQnJCLEVBQXdCakMsR0FBR21CLE1BQVEsRUFDdEQsSUFBSSxJQUFJbEIsRUFBSSxFQUFHQSxFQUFJZ0MsRUFBd0JqQyxHQUFHbUIsS0FBTWxCLElBQ2hEZ0MsRUFBd0JqQyxHQUFHZ0MsU0FBU0QsS0FBS04sRUFBWWxCLEdBQUsrQyxFQUFvQnJELElBQzlFd0IsRUFBWWxCLEdBQUsrQyxFQUFvQnJELEdBQUssS0F2RG5ELElBQUM4QyxHQWdFeEJTLEdBRUEsTUFBTUMsRUFBbUIsR0FFekI5QixFQUFpQjhCLEdBRWpCLElBeURJQyxFQXpEQUMsRUFBcUIsRUFFRixNQUNuQixJQUFJLElBQUkzRCxFQUFJLEVBQUdBLEVBQUlpQyxFQUF3QnJCLE9BQVFaLElBQy9DLElBQUksSUFBSUMsRUFBSSxFQUFHQSxFQUFJZ0MsRUFBd0JqQyxHQUFHZ0MsU0FBU3BCLE9BQVFYLElBQUksQ0FFL0QsSUFBSU0sRUFDQUMsRUFFcUUsR0FBdEV5QixFQUF3QmpDLEdBQUdnQyxTQUFTL0IsR0FBR2tELFdBQVdFLE1BQU0sSUFBSXpDLFFBQzNETCxFQUFNLEVBQ05DLEVBQVM0QyxPQUFPbkIsRUFBd0JqQyxHQUFHZ0MsU0FBUy9CLEdBQUdrRCxXQUFXRSxNQUFNLElBQUksTUFFNUU5QyxFQUFNMEIsRUFBd0JqQyxHQUFHZ0MsU0FBUy9CLEdBQUdrRCxXQUFXRSxNQUFNLElBQUksR0FDbEU3QyxFQUFTeUIsRUFBd0JqQyxHQUFHZ0MsU0FBUy9CLEdBQUdrRCxXQUFXRSxNQUFNLElBQUksSUFHekVNLElBRUFGLEVBQWlCbEQsR0FBS0MsR0FBVSxNQUs1Q29ELEdBRUFoQixRQUFRQyxJQUFJWSxFQUFrQkUsR0FHOUIsRUFBdUJGLEdBOEJ2QixFQUFnQjlELEdBQ2hCLEVBQVdlLEdBRVhiLFNBQVNnRSxpQkFBaUIsYUFBY0MsSUFDcENKLEVBQVVJLEVBQUVDLE9BRVpELEVBQUVDLE9BQU85QyxNQUFNK0MsUUFBVSxNQUUxQixHQUVIbkUsU0FBU2dFLGlCQUFpQixXQUFZQyxJQUNsQ0EsRUFBRUMsT0FBTzlDLE1BQU0rQyxRQUFVLEdBQ3pCRixFQUFFQyxPQUFPekQsUUFBUUMsSUFBTXVELEVBQUVDLE9BQU9FLFdBQVczRCxRQUFRQyxJQUNuRHVELEVBQUVDLE9BQU96RCxRQUFRRSxPQUFTc0QsRUFBRUMsT0FBT0UsV0FBVzNELFFBQVFFLFVBQ3ZELEdBRUhYLFNBQVNnRSxpQkFBaUIsWUFBYUMsSUFDbkNBLEVBQUVJLG9CQUNILEdBRUhyRSxTQUFTZ0UsaUJBQWlCLGFBQWNDLElBQ1gsYUFBdEJBLEVBQUVDLE9BQU9JLFlBQ1JMLEVBQUVDLE9BQU85QyxNQUFNbUQsV0FBYSxhQUVqQyxHQUVIdkUsU0FBU2dFLGlCQUFpQixhQUFjQyxJQUNYLGFBQXRCQSxFQUFFQyxPQUFPSSxZQUNSTCxFQUFFQyxPQUFPOUMsTUFBTW1ELFdBQWEsT0FFakMsR0FnRkh2RSxTQUFTZ0UsaUJBQWlCLFFBQVNDLElBRy9CLEdBRkFBLEVBQUVJLGlCQUV1QixhQUF0QkosRUFBRUMsT0FBT0ksVUFBeUIsQ0FDakNMLEVBQUVDLE9BQU85QyxNQUFNbUQsV0FBYSxHQUM1Qk4sRUFBRUMsT0FBT3RELFlBQVlpRCxHQUVyQixJQUFJVyxHQUFpQixFQUNqQkMsRUFBaUJSLEVBQUVDLE9BQU96RCxRQUFRQyxJQUFNdUQsRUFBRUMsT0FBT3pELFFBQVFFLE9BQ3pEK0QsRUFBY25CLE9BQU9rQixHQUV6QixJQUFJLElBQUl0RSxFQUFJLEVBQUdBLEVBQUlzRSxFQUFlakIsTUFBTSxJQUFJekMsT0FBUVosSUFDZCxHQUEvQnNFLEVBQWVqQixNQUFNLElBQUksS0FDeEJpQixFQUFpQkEsRUFBZWpCLE1BQU0sSUFBSSxJQUlsRCxNQUFNbUIsRUFBV1YsRUFBRUMsT0FBT0UsV0FBV0UsVUFBVWQsTUFBTSxLQUFLLEdBQzFELElBQUlvQixFQUNBQyxFQUVKLElBQUksSUFBSXpFLEVBQUksRUFBR0EsRUFBSVMsRUFBZ0JFLE9BQVFYLElBQ3BDUyxFQUFnQlQsR0FBR2UsTUFBUXdELElBQzFCQyxFQUFhL0QsRUFBZ0JULEdBQUdrQixLQUNoQ3VELEVBQVd6RSxHQUduQixNQUFNMEUsRUFBZ0JKLEVBQ2hCSyxFQUFtQkwsRUFBY0UsRUFBYSxFQUM5Q0ksRUFBa0IsR0FFeEIsSUFBSSxJQUFJckMsRUFBSW1DLEVBQWVuQyxHQUFLb0MsRUFBa0JwQyxJQUM5Q3FDLEVBQWdCOUMsS0FBS1MsR0FHekIsRUFBVzlCLEdBakhKLEVBQUNmLEVBQWVnRixFQUFlQyxFQUFrQlAsRUFBZ0JLLEtBQzVFLElBQUksSUFBSUksRUFBSSxFQUFHQSxFQUFJbkYsRUFBY2lCLE9BQVFrRSxJQUNyQyxHQUFHbkYsRUFBY21GLEdBQUdDLFNBQVNKLEdBQ3pCLFFBQUdoRixFQUFjbUYsR0FBR0MsU0FBU0gsS0FDekJQLEdBQWlCLEVBQ2pCM0QsRUFBZ0JnRSxHQUFVN0QsTUFBTyxFQUUxQndELElBNEdYVyxDQUFPckYsRUFBZWdGLEVBQWVDLEVBQWtCUCxFQUFnQkssSUFPdkVaLEVBQUVDLE9BQU85QyxNQUFNbUQsV0FBYSxHQUM1Qk4sRUFBRUMsT0FBT3RELFlBQVlpRCxHQUNyQkEsRUFBUXVCLFdBQVdDLFlBQVl4QixHQTdHekIsRUFBQy9ELEVBQWVnRixFQUFlRixFQUFZQyxFQUFVRSxLQUNuRSxJQUFJLElBQUk1RSxFQUFJLEVBQUdBLEVBQUlMLEVBQWNpQixPQUFRWixJQUNyQyxJQUFJLElBQUlDLEVBQUksRUFBR0EsRUFBSU4sRUFBY0ssR0FBR1ksT0FBUVgsSUFDeEMsR0FBR04sRUFBY0ssR0FBR0MsSUFBTTBFLEVBQ3RCLEdBQTBCLEdBQXZCaEYsRUFBY0ssR0FBR0MsR0FBUSxDQUN4QixJQUFJLElBQUlrRixFQUFJLEVBQUdBLEVBQUlWLEVBQVlVLElBQzNCekUsRUFBZ0JnRSxHQUFVMUMsU0FBU0QsS0FBS3BDLEVBQWNLLEdBQUdDLEVBQUlrRixJQUM3RHhGLEVBQWNLLEdBQUdDLEVBQUlrRixHQUFLLElBRTlCeEYsRUFBY0ssRUFBSSxHQUFHQyxHQUFLLElBQzFCLElBQUksSUFBSW1GLEVBQUksRUFBR0EsRUFBSVgsRUFBWVcsSUFDM0J6RixFQUFjSyxFQUFJLEdBQUdDLEVBQUltRixHQUFLLElBRWxDekYsRUFBY0ssR0FBR0MsRUFBSXdFLEdBQWMsU0FDakMsR0FBRzlFLEVBQWNLLEdBQUdDLElBQU1OLEVBQWMsR0FBR00sR0FBRyxDQUNoRCxJQUFJLElBQUlrRixFQUFJLEVBQUdBLEVBQUlWLEVBQVlVLElBQzNCekUsRUFBZ0JnRSxHQUFVMUMsU0FBU0QsS0FBS3BDLEVBQWNLLEdBQUdDLEVBQUlrRixJQUM3RHhGLEVBQWNLLEdBQUdDLEVBQUlrRixHQUFLLElBRTlCeEYsRUFBY0ssRUFBSSxHQUFHQyxHQUFLLElBQzFCLElBQUksSUFBSW1GLEVBQUksRUFBR0EsRUFBSVgsRUFBWVcsSUFDM0J6RixFQUFjSyxFQUFJLEdBQUdDLEVBQUltRixHQUFLLElBRWxDekYsRUFBY0ssR0FBRzJFLEVBQWdCLEdBQUssSUFDdENoRixFQUFjSyxHQUFHNEUsRUFBbUIsR0FBSyxTQUN2QyxHQUFHakYsRUFBY0ssR0FBR0MsSUFBTU4sRUFBYyxHQUFHTSxJQUFXLEdBQUxBLEVBQU8sQ0FDMUQsSUFBSSxJQUFJa0YsRUFBSSxFQUFHQSxFQUFJVixFQUFZVSxJQUMzQnpFLEVBQWdCZ0UsR0FBVTFDLFNBQVNELEtBQUtwQyxFQUFjSyxHQUFHQyxFQUFJa0YsSUFDN0R4RixFQUFjSyxHQUFHQyxFQUFJa0YsR0FBSyxJQUU5QixJQUFJLElBQUlDLEVBQUksRUFBR0EsRUFBSVgsRUFBWVcsSUFDM0J6RixFQUFjSyxFQUFJLEdBQUdDLEVBQUltRixHQUFLLElBRWxDekYsRUFBY0ssR0FBR3lFLEVBQWF4RSxHQUFLLElBQ25DTixFQUFjSyxHQUFHQyxFQUFJLEdBQUssU0FDeEIsR0FBR04sRUFBY0ssR0FBR0MsSUFBTU4sRUFBYyxHQUFHTSxHQUFHLENBQ2hELElBQUksSUFBSWtGLEVBQUksRUFBR0EsRUFBSVYsRUFBWVUsSUFDM0J6RSxFQUFnQmdFLEdBQVUxQyxTQUFTRCxLQUFLcEMsRUFBY0ssR0FBR0MsRUFBSWtGLElBQzdEeEYsRUFBY0ssR0FBR0MsRUFBSWtGLEdBQUssSUFFOUIsSUFBSSxJQUFJQyxFQUFJLEVBQUdBLEVBQUlYLEVBQVlXLElBQzNCekYsRUFBY0ssRUFBSSxHQUFHQyxFQUFJbUYsR0FBSyxJQUVsQ3pGLEVBQWNLLEdBQUd5RSxHQUFjLFFBQzlCLENBQ0QsSUFBSSxJQUFJVSxFQUFJLEVBQUdBLEVBQUlWLEVBQVlVLElBQzNCekUsRUFBZ0JnRSxHQUFVMUMsU0FBU0QsS0FBS3BDLEVBQWNLLEdBQUdDLEVBQUlrRixJQUM3RHhGLEVBQWNLLEdBQUdDLEVBQUlrRixHQUFLLElBRTlCeEYsRUFBY0ssRUFBSSxHQUFHQyxHQUFLLElBQzFCTixFQUFjSyxFQUFJLEdBQUdDLEdBQUssSUFDMUJOLEVBQWNLLEdBQUdDLEVBQUksR0FBSyxJQUMxQk4sRUFBY0ssR0FBR0MsRUFBSXdFLEdBQWMsSUFDbkMsSUFBSSxJQUFJVyxFQUFJLEVBQUdBLEVBQUlYLEVBQVlXLElBQzNCekYsRUFBY0ssRUFBSSxHQUFHQyxFQUFJbUYsR0FBSyxJQUM5QnpGLEVBQWNLLEVBQUksR0FBR0MsRUFBSW1GLEdBQUssTUF3RDFDQyxDQUFVMUYsRUFBZWdGLEVBQWVGLEVBQVlDLEVBQVVFLEtBVjlEZCxFQUFFQyxPQUFPOUMsTUFBTW1ELFdBQWEsR0FDNUJWLEVBQVF1QixXQUFXQyxZQUFZeEIsR0FDL0JoRCxFQUFnQmdFLEdBQVU3RCxNQUFPLEVBQ2pDLEVBQVdILEdBQ1gsRUFBZ0JmLElBUXBCLEVBQVdlLEdBa0JmLEVBQWdCZixHQWZPLENBQUNlLElBQ3BCLElBQUltQixFQUFRLEVBQ1osSUFBSSxJQUFJN0IsRUFBSSxFQUFHQSxFQUFJVSxFQUFnQkUsT0FBUVosSUFDcENVLEVBQWdCVixHQUFHZ0MsU0FBU3BCLFFBQzNCaUIsSUFJUixPQUFZLEdBQVRBLEdBU0p5RCxDQUFlNUUsSUFDZDZFLE9BSUwsR0FFSCxNQUFNQSxFQUFZLEtBQ2QsTUFBTTVFLEVBQWFkLFNBQVNDLGNBQWMsVUFDMUNhLEVBQVdzRSxXQUFXQyxZQUFZdkUsR0FHWixJQURBZCxTQUFTQyxjQUFjLHNCQUNMMEYsWUFFMUJDLFNBQVFwRCxJQUNsQkEsRUFBS3dCLGlCQUFpQixTQUFVQyxJQUM1QixHQUFHQSxFQUFFQyxPQUFPM0QsVUFBVXNGLFNBQVMsU0FBUyxDQUNwQyxJQUFJQyxFQUFpQixHQUVyQixNQUFNQyxFQUFReEMsT0FBT3lDLE9BQU8vQixFQUFFQyxPQUFPekQsUUFBUUMsS0FBT3NGLE9BQU8vQixFQUFFQyxPQUFPekQsUUFBUUUsU0FFNUUsSUFBSSxJQUFJUixFQUFJLEVBQUdBLEVBQUlpQyxFQUF3QnJCLE9BQVFaLElBQy9DLElBQUksSUFBSUMsRUFBSSxFQUFHQSxFQUFJZ0MsRUFBd0JqQyxHQUFHZ0MsU0FBU3BCLE9BQVFYLElBQ3hEZ0MsRUFBd0JqQyxHQUFHZ0MsU0FBUy9CLElBQU0yRixHQUN6QzNELEVBQXdCakMsR0FBR2dDLFNBQVM4RCxPQUFPN0YsRUFBRyxHQUsxRDZELEVBQUVDLE9BQU8zRCxVQUFVQyxJQUFJLFNBQ3ZCeUQsRUFBRUMsT0FBTzNELFVBQVUyRixPQUFPLFNBRTFCLElBQUksSUFBSXJELEVBQUksRUFBR0EsRUFBSVQsRUFBd0JyQixPQUFROEIsSUFDRSxHQUE5Q1QsRUFBd0JTLEdBQUdWLFNBQVNwQixRQUNuQytFLEVBQWU1RCxLQUFLLFFBSTVCLEdBQTRCLEdBQXpCNEQsRUFBZS9FLE9BRWQsWUFEQW9GLEVBQVcsaUJBSW5CQyxJQUNBckQsUUFBUUMsSUFBSVgsRUFBb0J0QixRQUVoQ2dDLFFBQVFDLElBQUluQyxVQUtsQnVGLEVBQXNCLEtBQ3hCLElBQUksSUFBSUMsRUFBSSxFQUFHQSxFQUFJLElBQU1BLElBQUksQ0FDekIsTUFBTUMsRUFBZW5ELEtBQUtDLE1BQXNCLEdBQWhCRCxLQUFLRSxVQUVyQyxHQUFHaEIsRUFBb0JxQixXQUFVbEIsR0FBUUEsR0FBUThELEtBQWlCLEVBQUUsQ0FDaEUsSUFBSVAsRUFBUTFELEVBQW9CcUIsV0FBVWxCLEdBQVFBLEdBQVE4RCxJQUVYLEdBQTVDQSxFQUFhaEQsV0FBV0UsTUFBTSxJQUFJekMsUUFDakNMLElBQU0sRUFDTkMsT0FBUzRDLE9BQU8rQyxFQUFhaEQsV0FBV0UsTUFBTSxJQUFJLE1BRWxEOUMsSUFBTTZDLE9BQU8rQyxFQUFhaEQsV0FBV0UsTUFBTSxJQUFJLElBQy9DN0MsT0FBUzRDLE9BQU8rQyxFQUFhaEQsV0FBV0UsTUFBTSxJQUFJLEtBR3RELElBQUkrQyxFQUFjbEUsRUFBb0I0RCxPQUFPRixFQUFPLEdBRXBELEdBQUdRLEVBQVksQ0FDWCxJQUFJLElBQUlwRyxFQUFJLEVBQUdBLEVBQUlVLEVBQWdCRSxPQUFRWixJQUN2QyxJQUFJLElBQUlDLEVBQUksRUFBR0EsRUFBSVMsRUFBZ0JWLEdBQUdnQyxTQUFTcEIsT0FBUVgsSUFDbkQsR0FBR1MsRUFBZ0JWLEdBQUdnQyxTQUFTL0IsSUFBTW1HLEVBQVksQ0FDN0MsSUFBSVQsRUFBaUIsR0FDckJqRixFQUFnQlYsR0FBR2dDLFNBQVM4RCxPQUFPN0YsRUFBRyxHQUV0QyxJQUFJLElBQUl5QyxFQUFJLEVBQUdBLEVBQUloQyxFQUFnQkUsT0FBUThCLElBQ0UsR0FBdENoQyxFQUFnQmdDLEdBQUdWLFNBQVNwQixRQUMzQitFLEVBQWU1RCxLQUFLLFFBSTVCLE9BQTRCLEdBQXpCNEQsRUFBZS9FLFlBQ2RvRixFQUFXLGlCQUlmLEVBS1osSUFBSUssRUFBb0IsR0FFeEIsSUFBSSxJQUFJOUQsRUFBSSxFQUFHQSxFQUFJN0IsRUFBZ0JFLE9BQVEyQixJQUN2QyxJQUFJLElBQUkrRCxFQUFJLEVBQUdBLEVBQUk1RixFQUFnQjZCLEdBQUdQLFNBQVNwQixPQUFRMEYsSUFDbkRELEVBQWtCdEUsS0FBS3JCLEVBQWdCNkIsR0FBR1AsU0FBU3NFLElBTTNELFlBRkExRCxRQUFRQyxJQUFJLGVBQWdCWCxFQUFvQnRCLE9BQVF5RixFQUFrQnpGLFlBUXBGb0YsRUFBY08sSUFDaEIsTUFBTUMsRUFBTzNHLFNBQVNDLGNBQWMsU0FFOUIyRyxFQUFrQjVHLFNBQVNNLGNBQWMsT0FDL0NzRyxFQUFnQnJHLFVBQVVDLElBQUksbUJBRTlCLE1BQU1xRyxFQUFLN0csU0FBU00sY0FBYyxNQUNsQ3VHLEVBQUczRyxZQUFjLGtCQUFrQndHLEtBRW5DRSxFQUFnQmhHLFlBQVlpRyxHQUU1QkYsRUFBSy9GLFlBQVlnRyxLIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9jb21wb25lbnRzL2dhbWVCb2FyZEZpZWxkcy5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2NvbXBvbmVudHMvY3JlYXRlU2hpcC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2NvbXBvbmVudHMvY29tcHV0ZXJHYW1lQm9hcmRGaWVsZC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGdhbWVCb2FyZEZpZWxkcyA9IChnYW1lRmllbGRzQXJyKSA9PiB7XHJcbiAgICBjb25zdCBnYW1lQm9hcmRDbGFzcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYW1lYm9hcmQnKTtcclxuXHJcbiAgICBnYW1lQm9hcmRDbGFzcy50ZXh0Q29udGVudCA9ICcnO1xyXG5cclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKXtcclxuICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgMTA7IGorKyl7XHJcbiAgICAgICAgICAgIGlmKGdhbWVGaWVsZHNBcnJbaV1bal0gPT0gJ3gnKXtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGdhbWVGaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmNsYXNzTGlzdC5hZGQoJ2NoZWNrZWQnKTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5kYXRhc2V0LnJvdyA9IGk7XHJcbiAgICAgICAgICAgICAgICBnYW1lRmllbGQuZGF0YXNldC5jb2x1bW4gPSBqO1xyXG5cclxuICAgICAgICAgICAgICAgIGdhbWVCb2FyZENsYXNzLmFwcGVuZENoaWxkKGdhbWVGaWVsZCk7XHJcbiAgICAgICAgICAgIH1lbHNlIGlmKGdhbWVGaWVsZHNBcnJbaV1bal0gPT0gJ3knKXtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGdhbWVGaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmNsYXNzTGlzdC5hZGQoJ2Jsb2NrZWQnKTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5kYXRhc2V0LnJvdyA9IGk7XHJcbiAgICAgICAgICAgICAgICBnYW1lRmllbGQuZGF0YXNldC5jb2x1bW4gPSBqO1xyXG5cclxuICAgICAgICAgICAgICAgIGdhbWVCb2FyZENsYXNzLmFwcGVuZENoaWxkKGdhbWVGaWVsZCk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZ2FtZUZpZWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBnYW1lRmllbGQuY2xhc3NMaXN0LmFkZCgnZ2FtZUZpZWxkJyk7XHJcbiAgICAgICAgICAgICAgICBnYW1lRmllbGQuZGF0YXNldC5yb3cgPSBpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmRhdGFzZXQuY29sdW1uID0gajtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgZ2FtZUJvYXJkQ2xhc3MuYXBwZW5kQ2hpbGQoZ2FtZUZpZWxkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgZ2FtZUJvYXJkRmllbGRzOyIsImNvbnN0IGNyZWF0ZVNoaXAgPSAoc2hpcE5hbWVBbmRTaXplKSA9PiB7XHJcbiAgICBjb25zdCBzaGlwc0NsYXNzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNoaXBzJyk7XHJcblxyXG4gICAgc2hpcHNDbGFzcy50ZXh0Q29udGVudCA9ICcnO1xyXG5cclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBzaGlwTmFtZUFuZFNpemUubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgIGlmKHNoaXBOYW1lQW5kU2l6ZVtpXS5sYW5kID09IHRydWUpe1xyXG5cclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgY29uc3Qgc2hpcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBzaGlwLmNsYXNzTGlzdC5hZGQoJ3NoaXAnKTtcclxuICAgICAgICAgICAgc2hpcC5kYXRhc2V0LmlkID0gc2hpcE5hbWVBbmRTaXplW2ldLmlkO1xyXG4gICAgICAgICAgICBzaGlwLmNsYXNzTGlzdC5hZGQoc2hpcE5hbWVBbmRTaXplW2ldLm5hbWUpO1xyXG4gICAgICAgICAgICBzaGlwLnN0eWxlLmdyaWRUZW1wbGF0ZUNvbHVtbnMgPSBgcmVwZWF0KCR7c2hpcE5hbWVBbmRTaXplW2ldLnNpemV9LCAxZnIpYDtcclxuICAgICAgICAgICAgc2hpcC5zdHlsZS53aWR0aCA9IGBjYWxjKCR7c2hpcE5hbWVBbmRTaXplW2ldLmlkfSAqIDUwcHgpYDtcclxuICAgICAgICAgICAgc2hpcC5zdHlsZS5oZWlnaHQgPSAnNTBweCc7XHJcbiAgICAgICAgICAgIHNoaXAuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ2JsYWNrJzsgXHJcbiAgICAgICAgICAgIHNoaXAuZHJhZ2dhYmxlID0gdHJ1ZTtcclxuXHJcblxyXG4gICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgc2hpcE5hbWVBbmRTaXplW2ldLnNpemU7IGorKyl7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzcXVhcmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIHNxdWFyZS5jbGFzc0xpc3QuYWRkKCdzcXVhcmUnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzaGlwLmFwcGVuZENoaWxkKHNxdWFyZSk7XHJcbiAgICAgICAgICAgIH0gICBcclxuXHJcbiAgICAgICAgICAgIHNoaXBzQ2xhc3MuYXBwZW5kQ2hpbGQoc2hpcCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVTaGlwOyIsImNvbnN0IGNvbXB1dGVyR2FtZUJvYXJkRmllbGQgPSAoY29tcHV0ZXJBcnIpID0+IHtcclxuICAgIFxyXG4gICAgY29uc3QgY29tcHV0ZXJHYW1lYm9hcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29tcHV0ZXJHYW1lQm9hcmQnKTtcclxuICAgIGNvbXB1dGVyR2FtZWJvYXJkLnRleHRDb250ZW50ID0gJyc7XHJcblxyXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IDEwOyBpKyspe1xyXG4gICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCAxMDsgaisrKXtcclxuICAgICAgICAgICAgaWYoY29tcHV0ZXJBcnJbaV1bal0gPT0gJ1gnKXtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGdhbWVGaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmNsYXNzTGlzdC5hZGQoJ3BsYXlzJyk7XHJcbiAgICAgICAgICAgICAgICBnYW1lRmllbGQuZGF0YXNldC5yb3cgPSBpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmRhdGFzZXQuY29sdW1uID0gajtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29tcHV0ZXJHYW1lYm9hcmQuYXBwZW5kQ2hpbGQoZ2FtZUZpZWxkKTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBnYW1lRmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5jbGFzc0xpc3QuYWRkKCdmaWVsZCcpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmRhdGFzZXQucm93ID0gaTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5kYXRhc2V0LmNvbHVtbiA9IGo7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbXB1dGVyR2FtZWJvYXJkLmFwcGVuZENoaWxkKGdhbWVGaWVsZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNvbXB1dGVyR2FtZUJvYXJkRmllbGQ7IiwiaW1wb3J0IGdhbWVCb2FyZEZpZWxkcyBmcm9tIFwiLi9jb21wb25lbnRzL2dhbWVCb2FyZEZpZWxkc1wiO1xyXG5pbXBvcnQgY3JlYXRlU2hpcCBmcm9tIFwiLi9jb21wb25lbnRzL2NyZWF0ZVNoaXBcIjtcclxuaW1wb3J0IGNvbXB1dGVyR2FtZUJvYXJkRmllbGQgZnJvbSBcIi4vY29tcG9uZW50cy9jb21wdXRlckdhbWVCb2FyZEZpZWxkXCI7XHJcblxyXG5jb25zdCBnYW1lRmllbGRzQXJyID0gW107XHJcblxyXG5jb25zdCBhZGRDb3VudEluVGVuQXJyID0gKGFycikgPT4ge1xyXG4gICAgbGV0IGNvdW50ID0gMDtcclxuXHJcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgMTA7IGkrKyl7XHJcbiAgICAgICAgY29uc3QgbmV3QXJyID0gW107XHJcbiAgICBcclxuICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgMTA7IGorKyl7XHJcbiAgICAgICAgICAgIG5ld0Fyci5wdXNoKGNvdW50KTtcclxuICAgICAgICAgICAgY291bnQrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgYXJyLnB1c2gobmV3QXJyKTtcclxuICAgIH1cclxufVxyXG5cclxuYWRkQ291bnRJblRlbkFycihnYW1lRmllbGRzQXJyKTtcclxuXHJcbmNvbnN0IHNoaXBOYW1lQW5kU2l6ZSA9IFtcclxuICAgIHtuYW1lOiAnRGVzdHJveWVyJywgc2l6ZTogMiwgaWQ6IDIsIGxhbmQ6IGZhbHNlLCBwb3NpdGlvbjogW119LFxyXG4gICAge25hbWU6ICdTdWJtYXJpbmUnLCBzaXplOiAzLCBpZDogMywgbGFuZDogZmFsc2UsIHBvc2l0aW9uOiBbXX0sXHJcbiAgICB7bmFtZTogJ0NydWlzZXInLCBzaXplOiAzLCBpZDogMywgbGFuZDogZmFsc2UsIHBvc2l0aW9uOiBbXX0sXHJcbiAgICB7bmFtZTogJ0JhdHRsZXNoaXAnLCBzaXplOiA0LCBpZDogNCwgbGFuZDogZmFsc2UsIHBvc2l0aW9uOiBbXX0sXHJcbiAgICB7bmFtZTogJ0NhcnJpZXInLCBzaXplOiA1LCBpZDogNSwgbGFuZDogZmFsc2UsIHBvc2l0aW9uOiBbXX0sXHJcbl1cclxuXHJcbmNvbnN0IHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyID0gW1xyXG4gICAge25hbWU6ICdEZXN0cm95ZXInLCBzaXplOiAyLCBwb3NpdGlvbjogW119LFxyXG4gICAge25hbWU6ICdTdWJtYXJpbmUnLCBzaXplOiAzLCBwb3NpdGlvbjogW119LFxyXG4gICAge25hbWU6ICdDcnVpc2VyJywgc2l6ZTogMywgcG9zaXRpb246IFtdfSxcclxuICAgIHtuYW1lOiAnQmF0dGxlc2hpcCcsIHNpemU6IDQsIHBvc2l0aW9uOiBbXX0sXHJcbiAgICB7bmFtZTogJ0NhcnJpZXInLCBzaXplOiA1LCBwb3NpdGlvbjogW119LFxyXG5dXHJcblxyXG5sZXQgY29tcHV0ZXJQbGF5c1JhbmRvbSA9IFtdO1xyXG5sZXQgcGxheWVySW5kZXhQbGF5cyA9IFtdO1xyXG5cclxuY29uc3QgYWRkSHVuZHJlZE51bWJlcnMgPSAoYXJyKSA9PiB7XHJcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgMTAwOyBpKyspe1xyXG4gICAgICAgIGFyci5wdXNoKGkpO1xyXG4gICAgfVxyXG59XHJcblxyXG5hZGRIdW5kcmVkTnVtYmVycyhwbGF5ZXJJbmRleFBsYXlzKTtcclxuYWRkSHVuZHJlZE51bWJlcnMoY29tcHV0ZXJQbGF5c1JhbmRvbSk7XHJcblxyXG5jb25zdCB0cnVlT3JGYWxzZSA9IChpdGVtKSA9PiB7XHJcbiAgICByZXR1cm4gaXRlbSAhPT0gJ1gnO1xyXG59XHJcblxyXG5sZXQgY29tcHV0ZXJBcnIgPSBbXTtcclxuXHJcbmFkZENvdW50SW5UZW5BcnIoY29tcHV0ZXJBcnIpO1xyXG5cclxuY29uc3QgcmFuZG9tUG9zaXRpb24gPSAobnVtKSA9PiB7XHJcbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogOTQpICsgc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbbnVtXS5zaXplO1xyXG59XHJcblxyXG5jb25zdCBjb21wdXRlciA9ICgpID0+IHtcclxuICAgIGxldCBjb3VudEFyciA9IDA7XHJcbiAgICBjb21wdXRlckFyci5sZW5ndGggPSAwO1xyXG5cclxuICAgIGFkZENvdW50SW5UZW5BcnIoY29tcHV0ZXJBcnIpO1xyXG4gICAgY29tcHV0ZXJHYW1lQm9hcmRGaWVsZChjb21wdXRlckFycik7XHJcblxyXG4gICAgZm9yKGxldCBiID0gMDsgYiA8IDEwMDA7IGIrKyl7XHJcbiAgICAgICAgZm9yKGxldCB4ID0gMDsgeCA8IHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyLmxlbmd0aDsgeCsrKXtcclxuICAgICAgICAgICAgaWYoc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbeF0ucG9zaXRpb24uZXZlcnkodHJ1ZU9yRmFsc2UpKXtcclxuXHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbeF0ucG9zaXRpb24ubGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbMF0ucG9zaXRpb24ubGVuZ3RoICYmIHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyWzFdLnBvc2l0aW9uLmxlbmd0aCAmJiBzaGlwTmFtZUFuZFNpemVDb21wdXRlclsyXS5wb3NpdGlvbi5sZW5ndGggJiYgc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbM10ucG9zaXRpb24ubGVuZ3RoICYmIHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyWzRdLnBvc2l0aW9uLmxlbmd0aCl7XHJcbiAgICAgICAgICAgIGZvcihsZXQgbyA9IDA7IG8gPCAxMDsgbysrKXtcclxuICAgICAgICAgICAgICAgIGlmKGNvbXB1dGVyQXJyW29dLmZpbHRlcihpdGVtID0+ICBpdGVtID09ICdYJykpe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50QXJyICs9IGNvbXB1dGVyQXJyW29dLmZpbHRlcihpdGVtID0+IGl0ZW0gPT0gJ1gnKS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGNvdW50QXJyKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBjb21wdXRlckFycixcclxuICAgICAgICAgICAgICAgIHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXIubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgaWYoc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbaV0ucG9zaXRpb24ubGVuZ3RoID4gMSl7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gcmFuZG9tUG9zaXRpb24oaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJvdztcclxuICAgICAgICAgICAgICAgICAgICBsZXQgY29sdW1uO1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmKHZhbHVlLnRvU3RyaW5nKCkubGVuZ3RoID09IDEpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByb3cgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSBOdW1iZXIodmFsdWUudG9TdHJpbmcoKS5zcGxpdCgnJylbMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByb3cgPSBOdW1iZXIodmFsdWUudG9TdHJpbmcoKS5zcGxpdCgnJylbMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSBOdW1iZXIodmFsdWUudG9TdHJpbmcoKS5zcGxpdCgnJylbMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaW5kSW5kZXhDb21wdXRlciA9IGNvbXB1dGVyQXJyW3Jvd10uZmluZEluZGV4KGl0ZW0gPT4gaXRlbSA9PSB2YWx1ZSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZmluZEluZGV4Q29tcHV0ZXIgPiAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoZmluZEluZGV4Q29tcHV0ZXIgLSBzaGlwTmFtZUFuZFNpemVDb21wdXRlcltpXS5zaXplID49IDApeyAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCBzaGlwTmFtZUFuZFNpemVDb21wdXRlcltpXS5zaXplOyBqKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW2ldLnBvc2l0aW9uLnB1c2goY29tcHV0ZXJBcnJbcm93XVtmaW5kSW5kZXhDb21wdXRlciAtIGpdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wdXRlckFycltyb3ddW2ZpbmRJbmRleENvbXB1dGVyIC0gal0gPSAnWCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmNvbXB1dGVyKCk7XHJcblxyXG5jb25zdCBjb3BweUNvbXB1dGVyQXJyID0gW107XHJcblxyXG5hZGRDb3VudEluVGVuQXJyKGNvcHB5Q29tcHV0ZXJBcnIpO1xyXG5cclxubGV0IGNvdW50Q29tcHV0ZXJDb3BweSA9IDA7XHJcblxyXG5jb25zdCBjb21wdXRlckFyclR3byA9ICgpID0+IHtcclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBzaGlwTmFtZUFuZFNpemVDb21wdXRlci5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW2ldLnBvc2l0aW9uLmxlbmd0aDsgaisrKXtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGxldCByb3c7XHJcbiAgICAgICAgICAgIGxldCBjb2x1bW47XHJcbiAgICBcclxuICAgICAgICAgICAgaWYoc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbaV0ucG9zaXRpb25bal0udG9TdHJpbmcoKS5zcGxpdCgnJykubGVuZ3RoID09IDEpe1xyXG4gICAgICAgICAgICAgICAgcm93ID0gMDtcclxuICAgICAgICAgICAgICAgIGNvbHVtbiA9IE51bWJlcihzaGlwTmFtZUFuZFNpemVDb21wdXRlcltpXS5wb3NpdGlvbltqXS50b1N0cmluZygpLnNwbGl0KCcnKVswXSk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgcm93ID0gc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbaV0ucG9zaXRpb25bal0udG9TdHJpbmcoKS5zcGxpdCgnJylbMF07XHJcbiAgICAgICAgICAgICAgICBjb2x1bW4gPSBzaGlwTmFtZUFuZFNpemVDb21wdXRlcltpXS5wb3NpdGlvbltqXS50b1N0cmluZygpLnNwbGl0KCcnKVsxXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIGNvdW50Q29tcHV0ZXJDb3BweSsrO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGNvcHB5Q29tcHV0ZXJBcnJbcm93XVtjb2x1bW5dID0gJ1gnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuY29tcHV0ZXJBcnJUd28oKTtcclxuXHJcbmNvbnNvbGUubG9nKGNvcHB5Q29tcHV0ZXJBcnIsIGNvdW50Q29tcHV0ZXJDb3BweSk7XHJcblxyXG5cclxuY29tcHV0ZXJHYW1lQm9hcmRGaWVsZChjb3BweUNvbXB1dGVyQXJyKTtcclxuXHJcbmNvbnN0IHNoaXAgPSAoYm9keUxlbmd0aCwgd2hlcmVIaXRzLCBzdW5rKSA9PiB7XHJcbiAgICBcclxuICAgIHJldHVybntcclxuICAgICAgICBib2R5TGVuZ3RoLFxyXG4gICAgICAgIHdoZXJlSGl0cyxcclxuICAgICAgICBzdW5rLFxyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBoaXQgPSAoaGl0UG9zaXRpb24pID0+IHtcclxuICAgIFxyXG4gICAgcmV0dXJue1xyXG4gICAgICAgIGhpdFBvc2l0aW9uLFxyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBpc1N1bmsgPSAoYm9keUxlbmd0aCkgPT4ge1xyXG4gICAgY29uc3QgaGl0cyA9IGJvZHlMZW5ndGggLSBzaGlwKCkuc3VuaztcclxuXHJcbiAgICBpZihoaXRzID09IDApe1xyXG4gICAgICAgIHJldHVybiAnc2hpcCBpcyBzdW5rJztcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gaGl0cztcclxufVxyXG5cclxubGV0IGRyYWdnZWQ7XHJcblxyXG5nYW1lQm9hcmRGaWVsZHMoZ2FtZUZpZWxkc0Fycik7XHJcbmNyZWF0ZVNoaXAoc2hpcE5hbWVBbmRTaXplKTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnc3RhcnRcIiwgKGUpID0+IHtcclxuICAgIGRyYWdnZWQgPSBlLnRhcmdldDtcclxuXHJcbiAgICBlLnRhcmdldC5zdHlsZS5vcGFjaXR5ID0gLjM7XHJcblxyXG59LCBmYWxzZSk7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ2VuZFwiLCAoZSkgPT4ge1xyXG4gICAgZS50YXJnZXQuc3R5bGUub3BhY2l0eSA9IFwiXCI7XHJcbiAgICBlLnRhcmdldC5kYXRhc2V0LnJvdyA9IGUudGFyZ2V0LmZpcnN0Q2hpbGQuZGF0YXNldC5yb3c7XHJcbiAgICBlLnRhcmdldC5kYXRhc2V0LmNvbHVtbiA9IGUudGFyZ2V0LmZpcnN0Q2hpbGQuZGF0YXNldC5jb2x1bW47XHJcbn0sIGZhbHNlKTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnb3ZlclwiLCAoZSkgPT4ge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG59LCBmYWxzZSk7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ2VudGVyXCIsIChlKSA9PiB7XHJcbiAgICBpZihlLnRhcmdldC5jbGFzc05hbWUgPT0gXCJnYW1lRmllbGRcIil7XHJcbiAgICAgICAgZS50YXJnZXQuc3R5bGUuYmFja2dyb3VuZCA9IFwieWVsbG93XCI7XHJcbiAgICB9XHJcbn0sIGZhbHNlKTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnbGVhdmVcIiwgKGUpID0+IHtcclxuICAgIGlmKGUudGFyZ2V0LmNsYXNzTmFtZSA9PSBcImdhbWVGaWVsZFwiKXtcclxuICAgICAgICBlLnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kID0gXCJcIjtcclxuICAgIH1cclxufSwgZmFsc2UpO1xyXG5cclxuY29uc3QgaXNUcnVlID0gKGdhbWVGaWVsZHNBcnIsIGZpcnN0UG9zaXRpb24sIGxhc3RTaGlwUG9zaXRpb24sIHNoaXBJc0dvb2RTaXplLCBpbmRleE9iaikgPT4ge1xyXG4gICAgZm9yKGxldCBuID0gMDsgbiA8IGdhbWVGaWVsZHNBcnIubGVuZ3RoOyBuKyspe1xyXG4gICAgICAgIGlmKGdhbWVGaWVsZHNBcnJbbl0uaW5jbHVkZXMoZmlyc3RQb3NpdGlvbikpe1xyXG4gICAgICAgICAgICBpZihnYW1lRmllbGRzQXJyW25dLmluY2x1ZGVzKGxhc3RTaGlwUG9zaXRpb24pKXtcclxuICAgICAgICAgICAgICAgIHNoaXBJc0dvb2RTaXplID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHNoaXBOYW1lQW5kU2l6ZVtpbmRleE9ial0ubGFuZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNoaXBJc0dvb2RTaXplO1xyXG4gICAgICAgICAgICB9OyBcclxuICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIHNoaXBJc0dvb2RTaXplID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBhZGRZSW5BcnIgPSAoZ2FtZUZpZWxkc0FyciwgZmlyc3RQb3NpdGlvbiwgbGVuZ3RoU2hpcCwgaW5kZXhPYmosIGxhc3RTaGlwUG9zaXRpb24pID0+IHtcclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBnYW1lRmllbGRzQXJyLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgZ2FtZUZpZWxkc0FycltpXS5sZW5ndGg7IGorKyl7XHJcbiAgICAgICAgICAgIGlmKGdhbWVGaWVsZHNBcnJbaV1bal0gPT0gZmlyc3RQb3NpdGlvbil7XHJcbiAgICAgICAgICAgICAgICBpZihnYW1lRmllbGRzQXJyW2ldW2pdID09IDApe1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcihsZXQgayA9IDA7IGsgPCBsZW5ndGhTaGlwOyBrKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGlwTmFtZUFuZFNpemVbaW5kZXhPYmpdLnBvc2l0aW9uLnB1c2goZ2FtZUZpZWxkc0FycltpXVtqICsga10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2ldW2ogKyBrXSA9ICd4JztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpICsgMV1bal0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBwID0gMDsgcCA8IGxlbmd0aFNoaXA7IHArKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaSArIDFdW2ogKyBwXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtqICsgbGVuZ3RoU2hpcF0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZSBpZihnYW1lRmllbGRzQXJyW2ldW2pdID09IGdhbWVGaWVsZHNBcnJbMF1bal0pe1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcihsZXQgayA9IDA7IGsgPCBsZW5ndGhTaGlwOyBrKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGlwTmFtZUFuZFNpemVbaW5kZXhPYmpdLnBvc2l0aW9uLnB1c2goZ2FtZUZpZWxkc0FycltpXVtqICsga10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2ldW2ogKyBrXSA9ICd4JztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpICsgMV1bal0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBwID0gMDsgcCA8IGxlbmd0aFNoaXA7IHArKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaSArIDFdW2ogKyBwXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtmaXJzdFBvc2l0aW9uIC0gMV0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtsYXN0U2hpcFBvc2l0aW9uICsgMV0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZSBpZihnYW1lRmllbGRzQXJyW2ldW2pdID09IGdhbWVGaWVsZHNBcnJbOV1bal0gJiYgaiAhPSAwKXtcclxuICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGsgPSAwOyBrIDwgbGVuZ3RoU2hpcDsgaysrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hpcE5hbWVBbmRTaXplW2luZGV4T2JqXS5wb3NpdGlvbi5wdXNoKGdhbWVGaWVsZHNBcnJbaV1baiArIGtdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtqICsga10gPSAneCc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGZvcihsZXQgcCA9IDA7IHAgPCBsZW5ndGhTaGlwOyBwKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2kgLSAxXVtqICsgcF0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaV1bbGVuZ3RoU2hpcCArIGpdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaV1baiAtIDFdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgfWVsc2UgaWYoZ2FtZUZpZWxkc0FycltpXVtqXSA9PSBnYW1lRmllbGRzQXJyWzldW2pdKXtcclxuICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGsgPSAwOyBrIDwgbGVuZ3RoU2hpcDsgaysrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hpcE5hbWVBbmRTaXplW2luZGV4T2JqXS5wb3NpdGlvbi5wdXNoKGdhbWVGaWVsZHNBcnJbaV1baiArIGtdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtqICsga10gPSAneCc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGZvcihsZXQgcCA9IDA7IHAgPCBsZW5ndGhTaGlwOyBwKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2kgLSAxXVtqICsgcF0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaV1bbGVuZ3RoU2hpcF0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGsgPSAwOyBrIDwgbGVuZ3RoU2hpcDsgaysrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hpcE5hbWVBbmRTaXplW2luZGV4T2JqXS5wb3NpdGlvbi5wdXNoKGdhbWVGaWVsZHNBcnJbaV1baiArIGtdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtqICsga10gPSAneCc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaSArIDFdW2pdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaSAtIDFdW2pdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaV1baiAtIDFdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaV1baiArIGxlbmd0aFNoaXBdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcihsZXQgcCA9IDA7IHAgPCBsZW5ndGhTaGlwOyBwKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2kgKyAxXVtqICsgcF0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaSAtIDFdW2ogKyBwXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkcm9wXCIsIChlKSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgaWYoZS50YXJnZXQuY2xhc3NOYW1lID09ICdnYW1lRmllbGQnKXtcclxuICAgICAgICBlLnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kID0gXCJcIjtcclxuICAgICAgICBlLnRhcmdldC5hcHBlbmRDaGlsZChkcmFnZ2VkKTtcclxuXHJcbiAgICAgICAgbGV0IHNoaXBJc0dvb2RTaXplID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IHJlc3VsdFBvc2l0aW9uID0gZS50YXJnZXQuZGF0YXNldC5yb3cgKyBlLnRhcmdldC5kYXRhc2V0LmNvbHVtbjtcclxuICAgICAgICBsZXQgc3RyaW5nVG9JbnQgPSBOdW1iZXIocmVzdWx0UG9zaXRpb24pO1xyXG4gICAgXHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHJlc3VsdFBvc2l0aW9uLnNwbGl0KCcnKS5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgIGlmKHJlc3VsdFBvc2l0aW9uLnNwbGl0KCcnKVswXSA9PSAwKXtcclxuICAgICAgICAgICAgICAgIHJlc3VsdFBvc2l0aW9uID0gcmVzdWx0UG9zaXRpb24uc3BsaXQoJycpWzFdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSAgIFxyXG5cclxuICAgICAgICBjb25zdCBuYW1lU2hpcCA9IGUudGFyZ2V0LmZpcnN0Q2hpbGQuY2xhc3NOYW1lLnNwbGl0KCcgJylbMV07XHJcbiAgICAgICAgbGV0IGxlbmd0aFNoaXA7XHJcbiAgICAgICAgbGV0IGluZGV4T2JqO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCBzaGlwTmFtZUFuZFNpemUubGVuZ3RoOyBqKyspe1xyXG4gICAgICAgICAgICBpZihzaGlwTmFtZUFuZFNpemVbal0ubmFtZSA9PSBuYW1lU2hpcCl7XHJcbiAgICAgICAgICAgICAgICBsZW5ndGhTaGlwID0gc2hpcE5hbWVBbmRTaXplW2pdLnNpemU7XHJcbiAgICAgICAgICAgICAgICBpbmRleE9iaiA9IGpcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBmaXJzdFBvc2l0aW9uID0gc3RyaW5nVG9JbnQ7XHJcbiAgICAgICAgY29uc3QgbGFzdFNoaXBQb3NpdGlvbiA9IHN0cmluZ1RvSW50ICsgbGVuZ3RoU2hpcCAtIDE7XHJcbiAgICAgICAgY29uc3Qgc2hpcEFyclBvc2l0aW9uID0gW107XHJcblxyXG4gICAgICAgIGZvcihsZXQgeCA9IGZpcnN0UG9zaXRpb247IHggPD0gbGFzdFNoaXBQb3NpdGlvbjsgeCsrKXtcclxuICAgICAgICAgICAgc2hpcEFyclBvc2l0aW9uLnB1c2goeCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjcmVhdGVTaGlwKHNoaXBOYW1lQW5kU2l6ZSk7XHJcblxyXG4gICAgICAgIGlmKCFpc1RydWUoZ2FtZUZpZWxkc0FyciwgZmlyc3RQb3NpdGlvbiwgbGFzdFNoaXBQb3NpdGlvbiwgc2hpcElzR29vZFNpemUsIGluZGV4T2JqKSl7XHJcbiAgICAgICAgICAgIGUudGFyZ2V0LnN0eWxlLmJhY2tncm91bmQgPSBcIlwiO1xyXG4gICAgICAgICAgICBkcmFnZ2VkLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZHJhZ2dlZCk7XHJcbiAgICAgICAgICAgIHNoaXBOYW1lQW5kU2l6ZVtpbmRleE9ial0ubGFuZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBjcmVhdGVTaGlwKHNoaXBOYW1lQW5kU2l6ZSk7XHJcbiAgICAgICAgICAgIGdhbWVCb2FyZEZpZWxkcyhnYW1lRmllbGRzQXJyKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgZS50YXJnZXQuc3R5bGUuYmFja2dyb3VuZCA9IFwiXCI7XHJcbiAgICAgICAgICAgIGUudGFyZ2V0LmFwcGVuZENoaWxkKGRyYWdnZWQpO1xyXG4gICAgICAgICAgICBkcmFnZ2VkLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZHJhZ2dlZCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBhZGRZSW5BcnIoZ2FtZUZpZWxkc0FyciwgZmlyc3RQb3NpdGlvbiwgbGVuZ3RoU2hpcCwgaW5kZXhPYmosIGxhc3RTaGlwUG9zaXRpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjcmVhdGVTaGlwKHNoaXBOYW1lQW5kU2l6ZSk7ICBcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBpc1Bvc2l0aW9uVHJ1ZSA9IChzaGlwTmFtZUFuZFNpemUpID0+IHtcclxuICAgICAgICBsZXQgY291bnQgPSAwO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBzaGlwTmFtZUFuZFNpemUubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICBpZihzaGlwTmFtZUFuZFNpemVbaV0ucG9zaXRpb24ubGVuZ3RoKXtcclxuICAgICAgICAgICAgICAgIGNvdW50Kys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKGNvdW50ID09IDUpe1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgZ2FtZUJvYXJkRmllbGRzKGdhbWVGaWVsZHNBcnIpO1xyXG5cclxuICAgIGlmKGlzUG9zaXRpb25UcnVlKHNoaXBOYW1lQW5kU2l6ZSkpe1xyXG4gICAgICAgIHN0YXJ0R2FtZSgpO1xyXG5cclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbn0sIGZhbHNlKTtcclxuXHJcbmNvbnN0IHN0YXJ0R2FtZSA9ICgpID0+IHtcclxuICAgIGNvbnN0IHNoaXBzQ2xhc3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2hpcHMnKTtcclxuICAgIHNoaXBzQ2xhc3MucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzaGlwc0NsYXNzKTtcclxuXHJcbiAgICBjb25zdCBnYW1lYm9hcmRNYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbXB1dGVyR2FtZUJvYXJkJyk7XHJcbiAgICBjb25zdCB0ZXN0R2FtZUJvYXJkID0gWy4uLmdhbWVib2FyZE1haW4uY2hpbGROb2Rlc107XHJcblxyXG4gICAgdGVzdEdhbWVCb2FyZC5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4geyAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZihlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BsYXlzJykpe1xyXG4gICAgICAgICAgICAgICAgbGV0IGlzTGVuZ2h0VG9aZXJvID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBOdW1iZXIoU3RyaW5nKGUudGFyZ2V0LmRhdGFzZXQucm93KSArIFN0cmluZyhlLnRhcmdldC5kYXRhc2V0LmNvbHVtbikpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBzaGlwTmFtZUFuZFNpemVDb21wdXRlci5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW2ldLnBvc2l0aW9uLmxlbmd0aDsgaisrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbaV0ucG9zaXRpb25bal0gPT0gaW5kZXgpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbaV0ucG9zaXRpb24uc3BsaWNlKGosIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2ZpZWxkJyk7XHJcbiAgICAgICAgICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdwbGF5cycpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcihsZXQgbyA9IDA7IG8gPCBzaGlwTmFtZUFuZFNpemVDb21wdXRlci5sZW5ndGg7IG8rKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbb10ucG9zaXRpb24ubGVuZ3RoID09IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0xlbmdodFRvWmVyby5wdXNoKCd0cnVlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmKGlzTGVuZ2h0VG9aZXJvLmxlbmd0aCA9PSA1KXtcclxuICAgICAgICAgICAgICAgICAgICB3aW5uZXJQYWdlKCd5b3UsIFtwbGF5ZXJdJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbXB1dGVyUmFuZG9tUGxheXMoKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coY29tcHV0ZXJQbGF5c1JhbmRvbS5sZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgY29uc29sZS5sb2coc2hpcE5hbWVBbmRTaXplKTtcclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufVxyXG5cclxuY29uc3QgY29tcHV0ZXJSYW5kb21QbGF5cyA9ICgpID0+IHtcclxuICAgIGZvcihsZXQgZiA9IDA7IGYgPCAxMDAwOyBmKyspe1xyXG4gICAgICAgIGNvbnN0IHJhbmRvbU51bWJlciA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDk5KTtcclxuXHJcbiAgICAgICAgaWYoY29tcHV0ZXJQbGF5c1JhbmRvbS5maW5kSW5kZXgoaXRlbSA9PiBpdGVtID09IHJhbmRvbU51bWJlcikgPiAtMSl7XHJcbiAgICAgICAgICAgIGxldCBpbmRleCA9IGNvbXB1dGVyUGxheXNSYW5kb20uZmluZEluZGV4KGl0ZW0gPT4gaXRlbSA9PSByYW5kb21OdW1iZXIpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGlmKHJhbmRvbU51bWJlci50b1N0cmluZygpLnNwbGl0KCcnKS5sZW5ndGggPT0gMSl7XHJcbiAgICAgICAgICAgICAgICByb3cgPSAwO1xyXG4gICAgICAgICAgICAgICAgY29sdW1uID0gTnVtYmVyKHJhbmRvbU51bWJlci50b1N0cmluZygpLnNwbGl0KCcnKVswXSk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgcm93ID0gTnVtYmVyKHJhbmRvbU51bWJlci50b1N0cmluZygpLnNwbGl0KCcnKVswXSk7XHJcbiAgICAgICAgICAgICAgICBjb2x1bW4gPSBOdW1iZXIocmFuZG9tTnVtYmVyLnRvU3RyaW5nKCkuc3BsaXQoJycpWzFdKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IHJlbW92ZWRJdGVtID0gY29tcHV0ZXJQbGF5c1JhbmRvbS5zcGxpY2UoaW5kZXgsIDEpO1xyXG5cclxuICAgICAgICAgICAgaWYocmVtb3ZlZEl0ZW0pe1xyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHNoaXBOYW1lQW5kU2l6ZS5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IHNoaXBOYW1lQW5kU2l6ZVtpXS5wb3NpdGlvbi5sZW5ndGg7IGorKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNoaXBOYW1lQW5kU2l6ZVtpXS5wb3NpdGlvbltqXSA9PSByZW1vdmVkSXRlbSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaXNMZW5naHRUb1plcm8gPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoaXBOYW1lQW5kU2l6ZVtpXS5wb3NpdGlvbi5zcGxpY2UoaiwgMSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgbyA9IDA7IG8gPCBzaGlwTmFtZUFuZFNpemUubGVuZ3RoOyBvKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNoaXBOYW1lQW5kU2l6ZVtvXS5wb3NpdGlvbi5sZW5ndGggPT0gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTGVuZ2h0VG9aZXJvLnB1c2goJ3RydWUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaXNMZW5naHRUb1plcm8ubGVuZ3RoID09IDUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbm5lclBhZ2UoJ2NvbXB1dGVyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHBvc2l0aW9uTGVuZ3RoQXJyID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBiID0gMDsgYiA8IHNoaXBOYW1lQW5kU2l6ZS5sZW5ndGg7IGIrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBjID0gMDsgYyA8IHNoaXBOYW1lQW5kU2l6ZVtiXS5wb3NpdGlvbi5sZW5ndGg7IGMrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uTGVuZ3RoQXJyLnB1c2goc2hpcE5hbWVBbmRTaXplW2JdLnBvc2l0aW9uW2NdKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1lvdSBub3QgYmxvdycsIGNvbXB1dGVyUGxheXNSYW5kb20ubGVuZ3RoLCBwb3NpdGlvbkxlbmd0aEFyci5sZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuY29uc3Qgd2lubmVyUGFnZSA9ICh3aW5uZXIpID0+IHtcclxuICAgIGNvbnN0IGdhbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FtZScpO1xyXG4gICAgXHJcbiAgICBjb25zdCBmaXhlZFdpbm5lclBhZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGZpeGVkV2lubmVyUGFnZS5jbGFzc0xpc3QuYWRkKCdmaXhlZFdpbm5lclBhZ2UnKTtcclxuICAgIFxyXG4gICAgY29uc3QgaDEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMScpO1xyXG4gICAgaDEudGV4dENvbnRlbnQgPSBgVGhlIHdpbm5lciBpcyBbJHt3aW5uZXJ9XWA7XHJcblxyXG4gICAgZml4ZWRXaW5uZXJQYWdlLmFwcGVuZENoaWxkKGgxKTtcclxuXHJcbiAgICBnYW1lLmFwcGVuZENoaWxkKGZpeGVkV2lubmVyUGFnZSk7XHJcbn0iXSwibmFtZXMiOlsiZ2FtZUZpZWxkc0FyciIsImdhbWVCb2FyZENsYXNzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwidGV4dENvbnRlbnQiLCJpIiwiaiIsImdhbWVGaWVsZCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJkYXRhc2V0Iiwicm93IiwiY29sdW1uIiwiYXBwZW5kQ2hpbGQiLCJzaGlwTmFtZUFuZFNpemUiLCJzaGlwc0NsYXNzIiwibGVuZ3RoIiwibGFuZCIsInNoaXAiLCJpZCIsIm5hbWUiLCJzdHlsZSIsImdyaWRUZW1wbGF0ZUNvbHVtbnMiLCJzaXplIiwid2lkdGgiLCJoZWlnaHQiLCJiYWNrZ3JvdW5kQ29sb3IiLCJkcmFnZ2FibGUiLCJzcXVhcmUiLCJjb21wdXRlckFyciIsImNvbXB1dGVyR2FtZWJvYXJkIiwiYWRkQ291bnRJblRlbkFyciIsImFyciIsImNvdW50IiwibmV3QXJyIiwicHVzaCIsInBvc2l0aW9uIiwic2hpcE5hbWVBbmRTaXplQ29tcHV0ZXIiLCJjb21wdXRlclBsYXlzUmFuZG9tIiwiYWRkSHVuZHJlZE51bWJlcnMiLCJ0cnVlT3JGYWxzZSIsIml0ZW0iLCJjb3VudEFyciIsImIiLCJ4IiwiZXZlcnkiLCJvIiwiZmlsdGVyIiwiY29uc29sZSIsImxvZyIsInZhbHVlIiwibnVtIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwidG9TdHJpbmciLCJOdW1iZXIiLCJzcGxpdCIsImZpbmRJbmRleENvbXB1dGVyIiwiZmluZEluZGV4IiwiY29tcHV0ZXIiLCJjb3BweUNvbXB1dGVyQXJyIiwiZHJhZ2dlZCIsImNvdW50Q29tcHV0ZXJDb3BweSIsImNvbXB1dGVyQXJyVHdvIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJ0YXJnZXQiLCJvcGFjaXR5IiwiZmlyc3RDaGlsZCIsInByZXZlbnREZWZhdWx0IiwiY2xhc3NOYW1lIiwiYmFja2dyb3VuZCIsInNoaXBJc0dvb2RTaXplIiwicmVzdWx0UG9zaXRpb24iLCJzdHJpbmdUb0ludCIsIm5hbWVTaGlwIiwibGVuZ3RoU2hpcCIsImluZGV4T2JqIiwiZmlyc3RQb3NpdGlvbiIsImxhc3RTaGlwUG9zaXRpb24iLCJzaGlwQXJyUG9zaXRpb24iLCJuIiwiaW5jbHVkZXMiLCJpc1RydWUiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJrIiwicCIsImFkZFlJbkFyciIsImlzUG9zaXRpb25UcnVlIiwic3RhcnRHYW1lIiwiY2hpbGROb2RlcyIsImZvckVhY2giLCJjb250YWlucyIsImlzTGVuZ2h0VG9aZXJvIiwiaW5kZXgiLCJTdHJpbmciLCJzcGxpY2UiLCJyZW1vdmUiLCJ3aW5uZXJQYWdlIiwiY29tcHV0ZXJSYW5kb21QbGF5cyIsImYiLCJyYW5kb21OdW1iZXIiLCJyZW1vdmVkSXRlbSIsInBvc2l0aW9uTGVuZ3RoQXJyIiwiYyIsIndpbm5lciIsImdhbWUiLCJmaXhlZFdpbm5lclBhZ2UiLCJoMSJdLCJzb3VyY2VSb290IjoiIn0=