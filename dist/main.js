(()=>{"use strict";const e=e=>{const t=document.querySelector(".gameboard");t.textContent="";for(let o=0;o<10;o++)for(let n=0;n<10;n++)if("x"==e[o][n]){const e=document.createElement("div");e.classList.add("checked"),e.dataset.row=o,e.dataset.column=n,t.appendChild(e)}else if("y"==e[o][n]){const e=document.createElement("div");e.classList.add("blocked"),e.dataset.row=o,e.dataset.column=n,t.appendChild(e)}else{const e=document.createElement("div");e.classList.add("gameField"),e.dataset.row=o,e.dataset.column=n,t.appendChild(e)}},t=e=>{const t=document.querySelector(".ships");t.textContent="";for(let o=0;o<e.length;o++)if(1==e[o].land);else{const n=document.createElement("div");n.classList.add("ship"),n.dataset.id=e[o].id,n.classList.add(e[o].name),n.style.gridTemplateColumns=`repeat(${e[o].size}, 1fr)`,n.style.width=`calc(${e[o].id} * 50px)`,n.style.height="50px",n.style.backgroundColor="black",n.draggable=!0;for(let t=0;t<e[o].size;t++){const e=document.createElement("div");e.classList.add("square"),n.appendChild(e)}t.appendChild(n)}},o=e=>{const t=document.querySelector(".computerGameBoard");t.textContent="";for(let o=0;o<10;o++)for(let n=0;n<10;n++)if("X"==e[o][n]){const e=document.createElement("div");e.classList.add("plays"),e.dataset.row=o,e.dataset.column=n,t.appendChild(e)}else if("Y"==e[o][n]){const e=document.createElement("div");e.classList.add("blocked"),e.dataset.row=o,e.dataset.column=n,t.appendChild(e)}else{const e=document.createElement("div");e.classList.add("field"),e.dataset.row=o,e.dataset.column=n,t.appendChild(e)}},n=[],l=e=>{let t=0;for(let o=0;o<10;o++){const o=[];for(let e=0;e<10;e++)o.push(t),t++;e.push(o)}};l(n);const i=[{name:"Destroyer",size:2,id:2,land:!1,position:[]},{name:"Submarine",size:3,id:3,land:!1,position:[]},{name:"Cruiser",size:3,id:3,land:!1,position:[]},{name:"Battleship",size:4,id:4,land:!1,position:[]},{name:"Carrier",size:5,id:5,land:!1,position:[]}],s=[{name:"Destroyer",size:2,position:[]},{name:"Submarine",size:3,position:[]},{name:"Cruiser",size:3,position:[]},{name:"Battleship",size:4,position:[]},{name:"Carrier",size:5,position:[]}];let r=[];const a=e=>{for(let t=0;t<100;t++)e.push(t)};a([]),a(r);const d=e=>"X"!==e;let c=[];l(c),(()=>{let e=0;c.length=0,l(c),o(c);for(let n=0;n<1e3;n++){for(let e=0;e<s.length;e++)s[e].position.every(d)||(s[e].position.length=0);if(s[0].position.length&&s[1].position.length&&s[2].position.length&&s[3].position.length&&s[4].position.length){for(let t=0;t<10;t++)c[t].filter((e=>"X"==e))&&(e+=c[t].filter((e=>"X"==e)).length);return console.log(e),{computerArr:c,shipNameAndSizeComputer:s}}for(let e=0;e<s.length;e++)if(s[e].position.length>1);else{const n=(t=e,Math.floor(94*Math.random())+s[t].size);let l,i;1==n.toString().length?(l=0,i=Number(n.toString().split("")[0])):(l=Number(n.toString().split("")[0]),i=Number(n.toString().split("")[1]));const r=c[l].findIndex((e=>e==n));if(r>0&&r-s[e].size>=0){for(let t=0;t<s[e].size;t++)s[e].position.push(c[l][r-t]),c[l][r-t]="X";0==l&&0==r?c[l+1][r+1]="Y":0==l&&9==r?c[l][r-s[e].size]="Y":l>=0&&0==r?c[l+1][r+1]="Y":9==l&&9==r?c[l][r-s[e].size]="Y":l>=1&&r>=1?(c[l][r+1]="Y",c[l][r-s[e].size]="Y"):(l>=0&&9==r||(c[l][r+1]="Y"),c[l][r-s[e].size]="Y"),o(c),console.log(c)}}}var t})();const p=[];l(p);let g,u=0;(()=>{for(let e=0;e<s.length;e++)for(let t=0;t<s[e].position.length;t++){let o,n;1==s[e].position[t].toString().split("").length?(o=0,n=Number(s[e].position[t].toString().split("")[0])):(o=s[e].position[t].toString().split("")[0],n=s[e].position[t].toString().split("")[1]),u++,p[o][n]="X";for(let e=0;e<c.length;e++)for(let t=0;t<c[e].length;t++)"Y"==c[e][t]&&(p[e][t]="Y")}})(),console.log(p,u),o(p),e(n),t(i),document.addEventListener("dragstart",(e=>{g=e.target,e.target.style.opacity=.3}),!1),document.addEventListener("dragend",(e=>{e.target.style.opacity="",e.target.dataset.row=e.target.firstChild.dataset.row,e.target.dataset.column=e.target.firstChild.dataset.column}),!1),document.addEventListener("dragover",(e=>{e.preventDefault()}),!1),document.addEventListener("dragenter",(e=>{"gameField"==e.target.className&&(e.target.style.background="yellow")}),!1),document.addEventListener("dragleave",(e=>{"gameField"==e.target.className&&(e.target.style.background="")}),!1),document.addEventListener("drop",(o=>{if(o.preventDefault(),"gameField"==o.target.className){o.target.style.background="",o.target.appendChild(g);let l=!1,s=o.target.dataset.row+o.target.dataset.column,r=Number(s);for(let e=0;e<s.split("").length;e++)0==s.split("")[0]&&(s=s.split("")[1]);const a=o.target.firstChild.className.split(" ")[1];let d,c;for(let e=0;e<i.length;e++)i[e].name==a&&(d=i[e].size,c=e);const p=r,u=r+d-1,m=[];for(let e=p;e<=u;e++)m.push(e);t(i),((e,t,o,n,l)=>{for(let s=0;s<e.length;s++)if(e[s].includes(t))return!!e[s].includes(o)&&(n=!0,i[l].land=!0,n)})(n,p,u,l,c)?(o.target.style.background="",o.target.appendChild(g),g.parentNode.removeChild(g),((e,t,o,n,l)=>{for(let s=0;s<e.length;s++)for(let r=0;r<e[s].length;r++)if(e[s][r]==t)if(0==e[s][r]){for(let t=0;t<o;t++)i[n].position.push(e[s][r+t]),e[s][r+t]="x";e[s+1][r]="y";for(let t=0;t<o;t++)e[s+1][r+t]="y";e[s][r+o]="y"}else if(e[s][r]==e[0][r]){for(let t=0;t<o;t++)i[n].position.push(e[s][r+t]),e[s][r+t]="x";e[s+1][r]="y";for(let t=0;t<o;t++)e[s+1][r+t]="y";e[s][t-1]="y",e[s][l+1]="y"}else if(e[s][r]==e[9][r]&&0!=r){for(let t=0;t<o;t++)i[n].position.push(e[s][r+t]),e[s][r+t]="x";for(let t=0;t<o;t++)e[s-1][r+t]="y";e[s][o+r]="y",e[s][r-1]="y"}else if(e[s][r]==e[9][r]){for(let t=0;t<o;t++)i[n].position.push(e[s][r+t]),e[s][r+t]="x";for(let t=0;t<o;t++)e[s-1][r+t]="y";e[s][o]="y"}else{for(let t=0;t<o;t++)i[n].position.push(e[s][r+t]),e[s][r+t]="x";e[s+1][r]="y",e[s-1][r]="y",e[s][r-1]="y",e[s][r+o]="y";for(let t=0;t<o;t++)e[s+1][r+t]="y",e[s-1][r+t]="y"}})(n,p,d,c,u)):(o.target.style.background="",g.parentNode.removeChild(g),i[c].land=!1,t(i),e(n)),t(i)}e(n),(e=>{let t=0;for(let o=0;o<e.length;o++)e[o].position.length&&t++;return 5==t})(i)&&m()}),!1);const m=()=>{const e=document.querySelector(".ships");e.parentNode.removeChild(e),[...document.querySelector(".computerGameBoard").childNodes].forEach((e=>{e.addEventListener("click",(e=>{if(e.target.classList.contains("plays")){let t=[];const o=Number(String(e.target.dataset.row)+String(e.target.dataset.column));for(let e=0;e<s.length;e++)for(let t=0;t<s[e].position.length;t++)s[e].position[t]==o&&s[e].position.splice(t,1);e.target.classList.add("field"),e.target.classList.remove("plays");for(let e=0;e<s.length;e++)0==s[e].position.length&&t.push("true");if(5==t.length)return void f("you, [player]")}h(),console.log(r.length),console.log(i)}))}))},h=()=>{for(let e=0;e<1e3;e++){const e=Math.floor(99*Math.random());if(r.findIndex((t=>t==e))>-1){let t=r.findIndex((t=>t==e));1==e.toString().split("").length?(row=0,column=Number(e.toString().split("")[0])):(row=Number(e.toString().split("")[0]),column=Number(e.toString().split("")[1]));let o=r.splice(t,1);if(o){for(let e=0;e<i.length;e++)for(let t=0;t<i[e].position.length;t++)if(i[e].position[t]==o){let o=[];i[e].position.splice(t,1);for(let e=0;e<i.length;e++)0==i[e].position.length&&o.push("true");return 5==o.length?void f("computer"):void 0}let e=[];for(let t=0;t<i.length;t++)for(let o=0;o<i[t].position.length;o++)e.push(i[t].position[o]);return void console.log("You not blow",r.length,e.length)}}}},f=e=>{const t=document.querySelector(".game"),o=document.createElement("div");o.classList.add("fixedWinnerPage");const n=document.createElement("h1");n.textContent=`The winner is [${e}]`,o.appendChild(n),t.appendChild(o)}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RyxLIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9jb21wb25lbnRzL2dhbWVCb2FyZEZpZWxkcy5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2NvbXBvbmVudHMvY3JlYXRlU2hpcC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2NvbXBvbmVudHMvY29tcHV0ZXJHYW1lQm9hcmRGaWVsZC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGdhbWVCb2FyZEZpZWxkcyA9IChnYW1lRmllbGRzQXJyKSA9PiB7XHJcbiAgICBjb25zdCBnYW1lQm9hcmRDbGFzcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYW1lYm9hcmQnKTtcclxuXHJcbiAgICBnYW1lQm9hcmRDbGFzcy50ZXh0Q29udGVudCA9ICcnO1xyXG5cclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKXtcclxuICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgMTA7IGorKyl7XHJcbiAgICAgICAgICAgIGlmKGdhbWVGaWVsZHNBcnJbaV1bal0gPT0gJ3gnKXtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGdhbWVGaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmNsYXNzTGlzdC5hZGQoJ2NoZWNrZWQnKTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5kYXRhc2V0LnJvdyA9IGk7XHJcbiAgICAgICAgICAgICAgICBnYW1lRmllbGQuZGF0YXNldC5jb2x1bW4gPSBqO1xyXG5cclxuICAgICAgICAgICAgICAgIGdhbWVCb2FyZENsYXNzLmFwcGVuZENoaWxkKGdhbWVGaWVsZCk7XHJcbiAgICAgICAgICAgIH1lbHNlIGlmKGdhbWVGaWVsZHNBcnJbaV1bal0gPT0gJ3knKXtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGdhbWVGaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmNsYXNzTGlzdC5hZGQoJ2Jsb2NrZWQnKTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5kYXRhc2V0LnJvdyA9IGk7XHJcbiAgICAgICAgICAgICAgICBnYW1lRmllbGQuZGF0YXNldC5jb2x1bW4gPSBqO1xyXG5cclxuICAgICAgICAgICAgICAgIGdhbWVCb2FyZENsYXNzLmFwcGVuZENoaWxkKGdhbWVGaWVsZCk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZ2FtZUZpZWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBnYW1lRmllbGQuY2xhc3NMaXN0LmFkZCgnZ2FtZUZpZWxkJyk7XHJcbiAgICAgICAgICAgICAgICBnYW1lRmllbGQuZGF0YXNldC5yb3cgPSBpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmRhdGFzZXQuY29sdW1uID0gajtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgZ2FtZUJvYXJkQ2xhc3MuYXBwZW5kQ2hpbGQoZ2FtZUZpZWxkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgZ2FtZUJvYXJkRmllbGRzOyIsImNvbnN0IGNyZWF0ZVNoaXAgPSAoc2hpcE5hbWVBbmRTaXplKSA9PiB7XHJcbiAgICBjb25zdCBzaGlwc0NsYXNzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNoaXBzJyk7XHJcblxyXG4gICAgc2hpcHNDbGFzcy50ZXh0Q29udGVudCA9ICcnO1xyXG5cclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBzaGlwTmFtZUFuZFNpemUubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgIGlmKHNoaXBOYW1lQW5kU2l6ZVtpXS5sYW5kID09IHRydWUpe1xyXG5cclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgY29uc3Qgc2hpcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBzaGlwLmNsYXNzTGlzdC5hZGQoJ3NoaXAnKTtcclxuICAgICAgICAgICAgc2hpcC5kYXRhc2V0LmlkID0gc2hpcE5hbWVBbmRTaXplW2ldLmlkO1xyXG4gICAgICAgICAgICBzaGlwLmNsYXNzTGlzdC5hZGQoc2hpcE5hbWVBbmRTaXplW2ldLm5hbWUpO1xyXG4gICAgICAgICAgICBzaGlwLnN0eWxlLmdyaWRUZW1wbGF0ZUNvbHVtbnMgPSBgcmVwZWF0KCR7c2hpcE5hbWVBbmRTaXplW2ldLnNpemV9LCAxZnIpYDtcclxuICAgICAgICAgICAgc2hpcC5zdHlsZS53aWR0aCA9IGBjYWxjKCR7c2hpcE5hbWVBbmRTaXplW2ldLmlkfSAqIDUwcHgpYDtcclxuICAgICAgICAgICAgc2hpcC5zdHlsZS5oZWlnaHQgPSAnNTBweCc7XHJcbiAgICAgICAgICAgIHNoaXAuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ2JsYWNrJzsgXHJcbiAgICAgICAgICAgIHNoaXAuZHJhZ2dhYmxlID0gdHJ1ZTtcclxuXHJcblxyXG4gICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgc2hpcE5hbWVBbmRTaXplW2ldLnNpemU7IGorKyl7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzcXVhcmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIHNxdWFyZS5jbGFzc0xpc3QuYWRkKCdzcXVhcmUnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzaGlwLmFwcGVuZENoaWxkKHNxdWFyZSk7XHJcbiAgICAgICAgICAgIH0gICBcclxuXHJcbiAgICAgICAgICAgIHNoaXBzQ2xhc3MuYXBwZW5kQ2hpbGQoc2hpcCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVTaGlwOyIsImNvbnN0IGNvbXB1dGVyR2FtZUJvYXJkRmllbGQgPSAoY29tcHV0ZXJBcnIpID0+IHtcclxuICAgIFxyXG4gICAgY29uc3QgY29tcHV0ZXJHYW1lYm9hcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29tcHV0ZXJHYW1lQm9hcmQnKTtcclxuICAgIGNvbXB1dGVyR2FtZWJvYXJkLnRleHRDb250ZW50ID0gJyc7XHJcblxyXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IDEwOyBpKyspe1xyXG4gICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCAxMDsgaisrKXtcclxuICAgICAgICAgICAgaWYoY29tcHV0ZXJBcnJbaV1bal0gPT0gJ1gnKXtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGdhbWVGaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmNsYXNzTGlzdC5hZGQoJ3BsYXlzJyk7XHJcbiAgICAgICAgICAgICAgICBnYW1lRmllbGQuZGF0YXNldC5yb3cgPSBpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmRhdGFzZXQuY29sdW1uID0gajtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29tcHV0ZXJHYW1lYm9hcmQuYXBwZW5kQ2hpbGQoZ2FtZUZpZWxkKTtcclxuICAgICAgICAgICAgfWVsc2UgaWYoY29tcHV0ZXJBcnJbaV1bal0gPT0gJ1knKXtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGdhbWVGaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmNsYXNzTGlzdC5hZGQoJ2Jsb2NrZWQnKTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5kYXRhc2V0LnJvdyA9IGk7XHJcbiAgICAgICAgICAgICAgICBnYW1lRmllbGQuZGF0YXNldC5jb2x1bW4gPSBqO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb21wdXRlckdhbWVib2FyZC5hcHBlbmRDaGlsZChnYW1lRmllbGQpO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGdhbWVGaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmNsYXNzTGlzdC5hZGQoJ2ZpZWxkJyk7XHJcbiAgICAgICAgICAgICAgICBnYW1lRmllbGQuZGF0YXNldC5yb3cgPSBpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmRhdGFzZXQuY29sdW1uID0gajtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29tcHV0ZXJHYW1lYm9hcmQuYXBwZW5kQ2hpbGQoZ2FtZUZpZWxkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY29tcHV0ZXJHYW1lQm9hcmRGaWVsZDsiLCJpbXBvcnQgZ2FtZUJvYXJkRmllbGRzIGZyb20gXCIuL2NvbXBvbmVudHMvZ2FtZUJvYXJkRmllbGRzXCI7XHJcbmltcG9ydCBjcmVhdGVTaGlwIGZyb20gXCIuL2NvbXBvbmVudHMvY3JlYXRlU2hpcFwiO1xyXG5pbXBvcnQgY29tcHV0ZXJHYW1lQm9hcmRGaWVsZCBmcm9tIFwiLi9jb21wb25lbnRzL2NvbXB1dGVyR2FtZUJvYXJkRmllbGRcIjtcclxuXHJcbmNvbnN0IGdhbWVGaWVsZHNBcnIgPSBbXTtcclxuXHJcbmNvbnN0IGFkZENvdW50SW5UZW5BcnIgPSAoYXJyKSA9PiB7XHJcbiAgICBsZXQgY291bnQgPSAwO1xyXG5cclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKXtcclxuICAgICAgICBjb25zdCBuZXdBcnIgPSBbXTtcclxuICAgIFxyXG4gICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCAxMDsgaisrKXtcclxuICAgICAgICAgICAgbmV3QXJyLnB1c2goY291bnQpO1xyXG4gICAgICAgICAgICBjb3VudCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhcnIucHVzaChuZXdBcnIpO1xyXG4gICAgfVxyXG59XHJcblxyXG5hZGRDb3VudEluVGVuQXJyKGdhbWVGaWVsZHNBcnIpO1xyXG5cclxuY29uc3Qgc2hpcE5hbWVBbmRTaXplID0gW1xyXG4gICAge25hbWU6ICdEZXN0cm95ZXInLCBzaXplOiAyLCBpZDogMiwgbGFuZDogZmFsc2UsIHBvc2l0aW9uOiBbXX0sXHJcbiAgICB7bmFtZTogJ1N1Ym1hcmluZScsIHNpemU6IDMsIGlkOiAzLCBsYW5kOiBmYWxzZSwgcG9zaXRpb246IFtdfSxcclxuICAgIHtuYW1lOiAnQ3J1aXNlcicsIHNpemU6IDMsIGlkOiAzLCBsYW5kOiBmYWxzZSwgcG9zaXRpb246IFtdfSxcclxuICAgIHtuYW1lOiAnQmF0dGxlc2hpcCcsIHNpemU6IDQsIGlkOiA0LCBsYW5kOiBmYWxzZSwgcG9zaXRpb246IFtdfSxcclxuICAgIHtuYW1lOiAnQ2FycmllcicsIHNpemU6IDUsIGlkOiA1LCBsYW5kOiBmYWxzZSwgcG9zaXRpb246IFtdfSxcclxuXVxyXG5cclxuY29uc3Qgc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXIgPSBbXHJcbiAgICB7bmFtZTogJ0Rlc3Ryb3llcicsIHNpemU6IDIsIHBvc2l0aW9uOiBbXX0sXHJcbiAgICB7bmFtZTogJ1N1Ym1hcmluZScsIHNpemU6IDMsIHBvc2l0aW9uOiBbXX0sXHJcbiAgICB7bmFtZTogJ0NydWlzZXInLCBzaXplOiAzLCBwb3NpdGlvbjogW119LFxyXG4gICAge25hbWU6ICdCYXR0bGVzaGlwJywgc2l6ZTogNCwgcG9zaXRpb246IFtdfSxcclxuICAgIHtuYW1lOiAnQ2FycmllcicsIHNpemU6IDUsIHBvc2l0aW9uOiBbXX0sXHJcbl1cclxuXHJcbmxldCBjb21wdXRlclBsYXlzUmFuZG9tID0gW107XHJcbmxldCBwbGF5ZXJJbmRleFBsYXlzID0gW107XHJcblxyXG5jb25zdCBhZGRIdW5kcmVkTnVtYmVycyA9IChhcnIpID0+IHtcclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCAxMDA7IGkrKyl7XHJcbiAgICAgICAgYXJyLnB1c2goaSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmFkZEh1bmRyZWROdW1iZXJzKHBsYXllckluZGV4UGxheXMpO1xyXG5hZGRIdW5kcmVkTnVtYmVycyhjb21wdXRlclBsYXlzUmFuZG9tKTtcclxuXHJcbmNvbnN0IHRydWVPckZhbHNlID0gKGl0ZW0pID0+IHtcclxuICAgIHJldHVybiBpdGVtICE9PSAnWCc7XHJcbn1cclxuXHJcbmxldCBjb21wdXRlckFyciA9IFtdO1xyXG5cclxuYWRkQ291bnRJblRlbkFycihjb21wdXRlckFycik7XHJcblxyXG5jb25zdCByYW5kb21Qb3NpdGlvbiA9IChudW0pID0+IHtcclxuICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA5NCkgKyBzaGlwTmFtZUFuZFNpemVDb21wdXRlcltudW1dLnNpemU7XHJcbn1cclxuXHJcbmNvbnN0IGNvbXB1dGVyID0gKCkgPT4ge1xyXG4gICAgbGV0IGNvdW50QXJyID0gMDtcclxuICAgIGNvbXB1dGVyQXJyLmxlbmd0aCA9IDA7XHJcblxyXG4gICAgYWRkQ291bnRJblRlbkFycihjb21wdXRlckFycik7XHJcbiAgICBjb21wdXRlckdhbWVCb2FyZEZpZWxkKGNvbXB1dGVyQXJyKTtcclxuXHJcbiAgICBmb3IobGV0IGIgPSAwOyBiIDwgMTAwMDsgYisrKXtcclxuICAgICAgICBmb3IobGV0IHggPSAwOyB4IDwgc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXIubGVuZ3RoOyB4Kyspe1xyXG4gICAgICAgICAgICBpZihzaGlwTmFtZUFuZFNpemVDb21wdXRlclt4XS5wb3NpdGlvbi5ldmVyeSh0cnVlT3JGYWxzZSkpe1xyXG5cclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBzaGlwTmFtZUFuZFNpemVDb21wdXRlclt4XS5wb3NpdGlvbi5sZW5ndGggPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZihzaGlwTmFtZUFuZFNpemVDb21wdXRlclswXS5wb3NpdGlvbi5sZW5ndGggJiYgc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbMV0ucG9zaXRpb24ubGVuZ3RoICYmIHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyWzJdLnBvc2l0aW9uLmxlbmd0aCAmJiBzaGlwTmFtZUFuZFNpemVDb21wdXRlclszXS5wb3NpdGlvbi5sZW5ndGggJiYgc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbNF0ucG9zaXRpb24ubGVuZ3RoKXtcclxuICAgICAgICAgICAgZm9yKGxldCBvID0gMDsgbyA8IDEwOyBvKyspe1xyXG4gICAgICAgICAgICAgICAgaWYoY29tcHV0ZXJBcnJbb10uZmlsdGVyKGl0ZW0gPT4gIGl0ZW0gPT0gJ1gnKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgY291bnRBcnIgKz0gY29tcHV0ZXJBcnJbb10uZmlsdGVyKGl0ZW0gPT4gaXRlbSA9PSAnWCcpLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc29sZS5sb2coY291bnRBcnIpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGNvbXB1dGVyQXJyLFxyXG4gICAgICAgICAgICAgICAgc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXIsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBzaGlwTmFtZUFuZFNpemVDb21wdXRlci5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICBpZihzaGlwTmFtZUFuZFNpemVDb21wdXRlcltpXS5wb3NpdGlvbi5sZW5ndGggPiAxKXtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSByYW5kb21Qb3NpdGlvbihpKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcm93O1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjb2x1bW47XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYodmFsdWUudG9TdHJpbmcoKS5sZW5ndGggPT0gMSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdyA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbiA9IE51bWJlcih2YWx1ZS50b1N0cmluZygpLnNwbGl0KCcnKVswXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdyA9IE51bWJlcih2YWx1ZS50b1N0cmluZygpLnNwbGl0KCcnKVswXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbiA9IE51bWJlcih2YWx1ZS50b1N0cmluZygpLnNwbGl0KCcnKVsxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbmRJbmRleENvbXB1dGVyID0gY29tcHV0ZXJBcnJbcm93XS5maW5kSW5kZXgoaXRlbSA9PiBpdGVtID09IHZhbHVlKTtcclxuICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZihmaW5kSW5kZXhDb21wdXRlciA+IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihmaW5kSW5kZXhDb21wdXRlciAtIHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW2ldLnNpemUgPj0gMCl7ICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW2ldLnNpemU7IGorKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbaV0ucG9zaXRpb24ucHVzaChjb21wdXRlckFycltyb3ddW2ZpbmRJbmRleENvbXB1dGVyIC0gal0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXB1dGVyQXJyW3Jvd11bZmluZEluZGV4Q29tcHV0ZXIgLSBqXSA9ICdYJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJvdyA9PSAwICYmIGZpbmRJbmRleENvbXB1dGVyID09IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXB1dGVyQXJyW3JvdyArIDFdW2ZpbmRJbmRleENvbXB1dGVyICsgMV0gPSAnWSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZm9yKGxldCBxID0gMDsgcSA8IHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW2ldLnNpemU7IHErKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGNvbXB1dGVyQXJyW3JvdyArIDFdW2ZpbmRJbmRleENvbXB1dGVyIC0gcV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYocm93ID09IDAgJiYgZmluZEluZGV4Q29tcHV0ZXIgPT0gOSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcHV0ZXJBcnJbcm93XVtmaW5kSW5kZXhDb21wdXRlciAtIHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW2ldLnNpemVdID0gJ1knO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZvcihsZXQgcSA9IDA7IHEgPCBzaGlwTmFtZUFuZFNpemVDb21wdXRlcltpXS5zaXplOyBxKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBjb21wdXRlckFycltyb3cgKyAxXVtmaW5kSW5kZXhDb21wdXRlciAtIHFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKHJvdyA+PSAwICYmIGZpbmRJbmRleENvbXB1dGVyID09IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXB1dGVyQXJyW3JvdyArIDFdW2ZpbmRJbmRleENvbXB1dGVyICsgMV0gPSAnWSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZm9yKGxldCBxID0gMDsgcSA8IHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW2ldLnNpemU7IHErKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGNvbXB1dGVyQXJyW3JvdyArIDFdW2ZpbmRJbmRleENvbXB1dGVyIC0gcV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGNvbXB1dGVyQXJyW3JvdyAtIDFdW2ZpbmRJbmRleENvbXB1dGVyIC0gcV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYocm93ID09IDkgJiYgZmluZEluZGV4Q29tcHV0ZXIgPT0gOSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcHV0ZXJBcnJbcm93XVtmaW5kSW5kZXhDb21wdXRlciAtIHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW2ldLnNpemVdID0gJ1knO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZvcihsZXQgcSA9IDA7IHEgPCBzaGlwTmFtZUFuZFNpemVDb21wdXRlcltpXS5zaXplOyBxKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBjb21wdXRlckFycltyb3cgLSAxXVtmaW5kSW5kZXhDb21wdXRlciAtIHFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKHJvdyA+PSAxICYmIGZpbmRJbmRleENvbXB1dGVyID49IDEpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXB1dGVyQXJyW3Jvd11bZmluZEluZGV4Q29tcHV0ZXIgKyAxXSA9ICdZJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wdXRlckFycltyb3ddW2ZpbmRJbmRleENvbXB1dGVyIC0gc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbaV0uc2l6ZV0gPSAnWSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihyb3cgPj0gMCAmJiBmaW5kSW5kZXhDb21wdXRlciA9PSA5KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wdXRlckFycltyb3ddW2ZpbmRJbmRleENvbXB1dGVyIC0gc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbaV0uc2l6ZV0gPSAnWSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZm9yKGxldCBxID0gMDsgcSA8IHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW2ldLnNpemU7IHErKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGNvbXB1dGVyQXJyW3JvdyArIDFdW2ZpbmRJbmRleENvbXB1dGVyIC0gcV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGNvbXB1dGVyQXJyW3JvdyAtIDFdW2ZpbmRJbmRleENvbXB1dGVyIC0gcV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYocm93ID09IDAgJiYgZmluZEluZGV4Q29tcHV0ZXIgPiAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wdXRlckFycltyb3ddW2ZpbmRJbmRleENvbXB1dGVyICsgMV0gPSAnWSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcHV0ZXJBcnJbcm93XVtmaW5kSW5kZXhDb21wdXRlciAtIHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW2ldLnNpemVdID0gJ1knO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZvcihsZXQgcSA9IDA7IHEgPCBzaGlwTmFtZUFuZFNpemVDb21wdXRlcltpXS5zaXplOyBxKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBjb21wdXRlckFycltyb3cgKyAxXVtmaW5kSW5kZXhDb21wdXRlciAtIHFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXB1dGVyQXJyW3Jvd11bZmluZEluZGV4Q29tcHV0ZXIgKyAxXSA9ICdZJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wdXRlckFycltyb3ddW2ZpbmRJbmRleENvbXB1dGVyIC0gc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbaV0uc2l6ZV0gPSAnWSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wdXRlckdhbWVCb2FyZEZpZWxkKGNvbXB1dGVyQXJyKTsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjb21wdXRlckFycik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuY29tcHV0ZXIoKTtcclxuXHJcbmNvbnN0IGNvcHB5Q29tcHV0ZXJBcnIgPSBbXTtcclxuXHJcbmFkZENvdW50SW5UZW5BcnIoY29wcHlDb21wdXRlckFycik7XHJcblxyXG5sZXQgY291bnRDb21wdXRlckNvcHB5ID0gMDtcclxuXHJcbmNvbnN0IGNvbXB1dGVyQXJyVHdvID0gKCkgPT4ge1xyXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbaV0ucG9zaXRpb24ubGVuZ3RoOyBqKyspe1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbGV0IHJvdztcclxuICAgICAgICAgICAgbGV0IGNvbHVtbjtcclxuICAgIFxyXG4gICAgICAgICAgICBpZihzaGlwTmFtZUFuZFNpemVDb21wdXRlcltpXS5wb3NpdGlvbltqXS50b1N0cmluZygpLnNwbGl0KCcnKS5sZW5ndGggPT0gMSl7XHJcbiAgICAgICAgICAgICAgICByb3cgPSAwO1xyXG4gICAgICAgICAgICAgICAgY29sdW1uID0gTnVtYmVyKHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW2ldLnBvc2l0aW9uW2pdLnRvU3RyaW5nKCkuc3BsaXQoJycpWzBdKTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICByb3cgPSBzaGlwTmFtZUFuZFNpemVDb21wdXRlcltpXS5wb3NpdGlvbltqXS50b1N0cmluZygpLnNwbGl0KCcnKVswXTtcclxuICAgICAgICAgICAgICAgIGNvbHVtbiA9IHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW2ldLnBvc2l0aW9uW2pdLnRvU3RyaW5nKCkuc3BsaXQoJycpWzFdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgY291bnRDb21wdXRlckNvcHB5Kys7XHJcbiAgICBcclxuICAgICAgICAgICAgY29wcHlDb21wdXRlckFycltyb3ddW2NvbHVtbl0gPSAnWCc7XHJcblxyXG4gICAgICAgICAgICBmb3IobGV0IG0gPSAwOyBtIDwgY29tcHV0ZXJBcnIubGVuZ3RoOyBtKyspe1xyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBwID0gMDsgcCA8IGNvbXB1dGVyQXJyW21dLmxlbmd0aDsgcCsrKXtcclxuICAgICAgICAgICAgICAgICAgICBpZihjb21wdXRlckFyclttXVtwXSA9PSAnWScpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3BweUNvbXB1dGVyQXJyW21dW3BdID0gJ1knO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuY29tcHV0ZXJBcnJUd28oKTtcclxuXHJcbmNvbnNvbGUubG9nKGNvcHB5Q29tcHV0ZXJBcnIsIGNvdW50Q29tcHV0ZXJDb3BweSk7XHJcblxyXG5cclxuY29tcHV0ZXJHYW1lQm9hcmRGaWVsZChjb3BweUNvbXB1dGVyQXJyKTtcclxuXHJcbmNvbnN0IHNoaXAgPSAoYm9keUxlbmd0aCwgd2hlcmVIaXRzLCBzdW5rKSA9PiB7XHJcbiAgICBcclxuICAgIHJldHVybntcclxuICAgICAgICBib2R5TGVuZ3RoLFxyXG4gICAgICAgIHdoZXJlSGl0cyxcclxuICAgICAgICBzdW5rLFxyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBoaXQgPSAoaGl0UG9zaXRpb24pID0+IHtcclxuICAgIFxyXG4gICAgcmV0dXJue1xyXG4gICAgICAgIGhpdFBvc2l0aW9uLFxyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBpc1N1bmsgPSAoYm9keUxlbmd0aCkgPT4ge1xyXG4gICAgY29uc3QgaGl0cyA9IGJvZHlMZW5ndGggLSBzaGlwKCkuc3VuaztcclxuXHJcbiAgICBpZihoaXRzID09IDApe1xyXG4gICAgICAgIHJldHVybiAnc2hpcCBpcyBzdW5rJztcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gaGl0cztcclxufVxyXG5cclxubGV0IGRyYWdnZWQ7XHJcblxyXG5nYW1lQm9hcmRGaWVsZHMoZ2FtZUZpZWxkc0Fycik7XHJcbmNyZWF0ZVNoaXAoc2hpcE5hbWVBbmRTaXplKTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnc3RhcnRcIiwgKGUpID0+IHtcclxuICAgIGRyYWdnZWQgPSBlLnRhcmdldDtcclxuXHJcbiAgICBlLnRhcmdldC5zdHlsZS5vcGFjaXR5ID0gLjM7XHJcblxyXG59LCBmYWxzZSk7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ2VuZFwiLCAoZSkgPT4ge1xyXG4gICAgZS50YXJnZXQuc3R5bGUub3BhY2l0eSA9IFwiXCI7XHJcbiAgICBlLnRhcmdldC5kYXRhc2V0LnJvdyA9IGUudGFyZ2V0LmZpcnN0Q2hpbGQuZGF0YXNldC5yb3c7XHJcbiAgICBlLnRhcmdldC5kYXRhc2V0LmNvbHVtbiA9IGUudGFyZ2V0LmZpcnN0Q2hpbGQuZGF0YXNldC5jb2x1bW47XHJcbn0sIGZhbHNlKTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnb3ZlclwiLCAoZSkgPT4ge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG59LCBmYWxzZSk7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ2VudGVyXCIsIChlKSA9PiB7XHJcbiAgICBpZihlLnRhcmdldC5jbGFzc05hbWUgPT0gXCJnYW1lRmllbGRcIil7XHJcbiAgICAgICAgZS50YXJnZXQuc3R5bGUuYmFja2dyb3VuZCA9IFwieWVsbG93XCI7XHJcbiAgICB9XHJcbn0sIGZhbHNlKTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnbGVhdmVcIiwgKGUpID0+IHtcclxuICAgIGlmKGUudGFyZ2V0LmNsYXNzTmFtZSA9PSBcImdhbWVGaWVsZFwiKXtcclxuICAgICAgICBlLnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kID0gXCJcIjtcclxuICAgIH1cclxufSwgZmFsc2UpO1xyXG5cclxuY29uc3QgaXNUcnVlID0gKGdhbWVGaWVsZHNBcnIsIGZpcnN0UG9zaXRpb24sIGxhc3RTaGlwUG9zaXRpb24sIHNoaXBJc0dvb2RTaXplLCBpbmRleE9iaikgPT4ge1xyXG4gICAgZm9yKGxldCBuID0gMDsgbiA8IGdhbWVGaWVsZHNBcnIubGVuZ3RoOyBuKyspe1xyXG4gICAgICAgIGlmKGdhbWVGaWVsZHNBcnJbbl0uaW5jbHVkZXMoZmlyc3RQb3NpdGlvbikpe1xyXG4gICAgICAgICAgICBpZihnYW1lRmllbGRzQXJyW25dLmluY2x1ZGVzKGxhc3RTaGlwUG9zaXRpb24pKXtcclxuICAgICAgICAgICAgICAgIHNoaXBJc0dvb2RTaXplID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHNoaXBOYW1lQW5kU2l6ZVtpbmRleE9ial0ubGFuZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNoaXBJc0dvb2RTaXplO1xyXG4gICAgICAgICAgICB9OyBcclxuICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIHNoaXBJc0dvb2RTaXplID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBhZGRZSW5BcnIgPSAoZ2FtZUZpZWxkc0FyciwgZmlyc3RQb3NpdGlvbiwgbGVuZ3RoU2hpcCwgaW5kZXhPYmosIGxhc3RTaGlwUG9zaXRpb24pID0+IHtcclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBnYW1lRmllbGRzQXJyLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgZ2FtZUZpZWxkc0FycltpXS5sZW5ndGg7IGorKyl7XHJcbiAgICAgICAgICAgIGlmKGdhbWVGaWVsZHNBcnJbaV1bal0gPT0gZmlyc3RQb3NpdGlvbil7XHJcbiAgICAgICAgICAgICAgICBpZihnYW1lRmllbGRzQXJyW2ldW2pdID09IDApe1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcihsZXQgayA9IDA7IGsgPCBsZW5ndGhTaGlwOyBrKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGlwTmFtZUFuZFNpemVbaW5kZXhPYmpdLnBvc2l0aW9uLnB1c2goZ2FtZUZpZWxkc0FycltpXVtqICsga10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2ldW2ogKyBrXSA9ICd4JztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpICsgMV1bal0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBwID0gMDsgcCA8IGxlbmd0aFNoaXA7IHArKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaSArIDFdW2ogKyBwXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtqICsgbGVuZ3RoU2hpcF0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZSBpZihnYW1lRmllbGRzQXJyW2ldW2pdID09IGdhbWVGaWVsZHNBcnJbMF1bal0pe1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcihsZXQgayA9IDA7IGsgPCBsZW5ndGhTaGlwOyBrKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGlwTmFtZUFuZFNpemVbaW5kZXhPYmpdLnBvc2l0aW9uLnB1c2goZ2FtZUZpZWxkc0FycltpXVtqICsga10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2ldW2ogKyBrXSA9ICd4JztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpICsgMV1bal0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBwID0gMDsgcCA8IGxlbmd0aFNoaXA7IHArKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaSArIDFdW2ogKyBwXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtmaXJzdFBvc2l0aW9uIC0gMV0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtsYXN0U2hpcFBvc2l0aW9uICsgMV0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZSBpZihnYW1lRmllbGRzQXJyW2ldW2pdID09IGdhbWVGaWVsZHNBcnJbOV1bal0gJiYgaiAhPSAwKXtcclxuICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGsgPSAwOyBrIDwgbGVuZ3RoU2hpcDsgaysrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hpcE5hbWVBbmRTaXplW2luZGV4T2JqXS5wb3NpdGlvbi5wdXNoKGdhbWVGaWVsZHNBcnJbaV1baiArIGtdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtqICsga10gPSAneCc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGZvcihsZXQgcCA9IDA7IHAgPCBsZW5ndGhTaGlwOyBwKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2kgLSAxXVtqICsgcF0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaV1bbGVuZ3RoU2hpcCArIGpdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaV1baiAtIDFdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgfWVsc2UgaWYoZ2FtZUZpZWxkc0FycltpXVtqXSA9PSBnYW1lRmllbGRzQXJyWzldW2pdKXtcclxuICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGsgPSAwOyBrIDwgbGVuZ3RoU2hpcDsgaysrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hpcE5hbWVBbmRTaXplW2luZGV4T2JqXS5wb3NpdGlvbi5wdXNoKGdhbWVGaWVsZHNBcnJbaV1baiArIGtdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtqICsga10gPSAneCc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGZvcihsZXQgcCA9IDA7IHAgPCBsZW5ndGhTaGlwOyBwKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2kgLSAxXVtqICsgcF0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaV1bbGVuZ3RoU2hpcF0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGsgPSAwOyBrIDwgbGVuZ3RoU2hpcDsgaysrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hpcE5hbWVBbmRTaXplW2luZGV4T2JqXS5wb3NpdGlvbi5wdXNoKGdhbWVGaWVsZHNBcnJbaV1baiArIGtdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtqICsga10gPSAneCc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaSArIDFdW2pdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaSAtIDFdW2pdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaV1baiAtIDFdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaV1baiArIGxlbmd0aFNoaXBdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcihsZXQgcCA9IDA7IHAgPCBsZW5ndGhTaGlwOyBwKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2kgKyAxXVtqICsgcF0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaSAtIDFdW2ogKyBwXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkcm9wXCIsIChlKSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgaWYoZS50YXJnZXQuY2xhc3NOYW1lID09ICdnYW1lRmllbGQnKXtcclxuICAgICAgICBlLnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kID0gXCJcIjtcclxuICAgICAgICBlLnRhcmdldC5hcHBlbmRDaGlsZChkcmFnZ2VkKTtcclxuXHJcbiAgICAgICAgbGV0IHNoaXBJc0dvb2RTaXplID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IHJlc3VsdFBvc2l0aW9uID0gZS50YXJnZXQuZGF0YXNldC5yb3cgKyBlLnRhcmdldC5kYXRhc2V0LmNvbHVtbjtcclxuICAgICAgICBsZXQgc3RyaW5nVG9JbnQgPSBOdW1iZXIocmVzdWx0UG9zaXRpb24pO1xyXG4gICAgXHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHJlc3VsdFBvc2l0aW9uLnNwbGl0KCcnKS5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgIGlmKHJlc3VsdFBvc2l0aW9uLnNwbGl0KCcnKVswXSA9PSAwKXtcclxuICAgICAgICAgICAgICAgIHJlc3VsdFBvc2l0aW9uID0gcmVzdWx0UG9zaXRpb24uc3BsaXQoJycpWzFdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSAgIFxyXG5cclxuICAgICAgICBjb25zdCBuYW1lU2hpcCA9IGUudGFyZ2V0LmZpcnN0Q2hpbGQuY2xhc3NOYW1lLnNwbGl0KCcgJylbMV07XHJcbiAgICAgICAgbGV0IGxlbmd0aFNoaXA7XHJcbiAgICAgICAgbGV0IGluZGV4T2JqO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCBzaGlwTmFtZUFuZFNpemUubGVuZ3RoOyBqKyspe1xyXG4gICAgICAgICAgICBpZihzaGlwTmFtZUFuZFNpemVbal0ubmFtZSA9PSBuYW1lU2hpcCl7XHJcbiAgICAgICAgICAgICAgICBsZW5ndGhTaGlwID0gc2hpcE5hbWVBbmRTaXplW2pdLnNpemU7XHJcbiAgICAgICAgICAgICAgICBpbmRleE9iaiA9IGpcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBmaXJzdFBvc2l0aW9uID0gc3RyaW5nVG9JbnQ7XHJcbiAgICAgICAgY29uc3QgbGFzdFNoaXBQb3NpdGlvbiA9IHN0cmluZ1RvSW50ICsgbGVuZ3RoU2hpcCAtIDE7XHJcbiAgICAgICAgY29uc3Qgc2hpcEFyclBvc2l0aW9uID0gW107XHJcblxyXG4gICAgICAgIGZvcihsZXQgeCA9IGZpcnN0UG9zaXRpb247IHggPD0gbGFzdFNoaXBQb3NpdGlvbjsgeCsrKXtcclxuICAgICAgICAgICAgc2hpcEFyclBvc2l0aW9uLnB1c2goeCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjcmVhdGVTaGlwKHNoaXBOYW1lQW5kU2l6ZSk7XHJcblxyXG4gICAgICAgIGlmKCFpc1RydWUoZ2FtZUZpZWxkc0FyciwgZmlyc3RQb3NpdGlvbiwgbGFzdFNoaXBQb3NpdGlvbiwgc2hpcElzR29vZFNpemUsIGluZGV4T2JqKSl7XHJcbiAgICAgICAgICAgIGUudGFyZ2V0LnN0eWxlLmJhY2tncm91bmQgPSBcIlwiO1xyXG4gICAgICAgICAgICBkcmFnZ2VkLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZHJhZ2dlZCk7XHJcbiAgICAgICAgICAgIHNoaXBOYW1lQW5kU2l6ZVtpbmRleE9ial0ubGFuZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBjcmVhdGVTaGlwKHNoaXBOYW1lQW5kU2l6ZSk7XHJcbiAgICAgICAgICAgIGdhbWVCb2FyZEZpZWxkcyhnYW1lRmllbGRzQXJyKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgZS50YXJnZXQuc3R5bGUuYmFja2dyb3VuZCA9IFwiXCI7XHJcbiAgICAgICAgICAgIGUudGFyZ2V0LmFwcGVuZENoaWxkKGRyYWdnZWQpO1xyXG4gICAgICAgICAgICBkcmFnZ2VkLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZHJhZ2dlZCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBhZGRZSW5BcnIoZ2FtZUZpZWxkc0FyciwgZmlyc3RQb3NpdGlvbiwgbGVuZ3RoU2hpcCwgaW5kZXhPYmosIGxhc3RTaGlwUG9zaXRpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjcmVhdGVTaGlwKHNoaXBOYW1lQW5kU2l6ZSk7ICBcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBpc1Bvc2l0aW9uVHJ1ZSA9IChzaGlwTmFtZUFuZFNpemUpID0+IHtcclxuICAgICAgICBsZXQgY291bnQgPSAwO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBzaGlwTmFtZUFuZFNpemUubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICBpZihzaGlwTmFtZUFuZFNpemVbaV0ucG9zaXRpb24ubGVuZ3RoKXtcclxuICAgICAgICAgICAgICAgIGNvdW50Kys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKGNvdW50ID09IDUpe1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgZ2FtZUJvYXJkRmllbGRzKGdhbWVGaWVsZHNBcnIpO1xyXG5cclxuICAgIGlmKGlzUG9zaXRpb25UcnVlKHNoaXBOYW1lQW5kU2l6ZSkpe1xyXG4gICAgICAgIHN0YXJ0R2FtZSgpO1xyXG5cclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbn0sIGZhbHNlKTtcclxuXHJcbmNvbnN0IHN0YXJ0R2FtZSA9ICgpID0+IHtcclxuICAgIGNvbnN0IHNoaXBzQ2xhc3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2hpcHMnKTtcclxuICAgIHNoaXBzQ2xhc3MucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzaGlwc0NsYXNzKTtcclxuXHJcbiAgICBjb25zdCBnYW1lYm9hcmRNYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbXB1dGVyR2FtZUJvYXJkJyk7XHJcbiAgICBjb25zdCB0ZXN0R2FtZUJvYXJkID0gWy4uLmdhbWVib2FyZE1haW4uY2hpbGROb2Rlc107XHJcblxyXG4gICAgdGVzdEdhbWVCb2FyZC5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4geyAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZihlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BsYXlzJykpe1xyXG4gICAgICAgICAgICAgICAgbGV0IGlzTGVuZ2h0VG9aZXJvID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBOdW1iZXIoU3RyaW5nKGUudGFyZ2V0LmRhdGFzZXQucm93KSArIFN0cmluZyhlLnRhcmdldC5kYXRhc2V0LmNvbHVtbikpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBzaGlwTmFtZUFuZFNpemVDb21wdXRlci5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW2ldLnBvc2l0aW9uLmxlbmd0aDsgaisrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbaV0ucG9zaXRpb25bal0gPT0gaW5kZXgpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbaV0ucG9zaXRpb24uc3BsaWNlKGosIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2ZpZWxkJyk7XHJcbiAgICAgICAgICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdwbGF5cycpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcihsZXQgbyA9IDA7IG8gPCBzaGlwTmFtZUFuZFNpemVDb21wdXRlci5sZW5ndGg7IG8rKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbb10ucG9zaXRpb24ubGVuZ3RoID09IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0xlbmdodFRvWmVyby5wdXNoKCd0cnVlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmKGlzTGVuZ2h0VG9aZXJvLmxlbmd0aCA9PSA1KXtcclxuICAgICAgICAgICAgICAgICAgICB3aW5uZXJQYWdlKCd5b3UsIFtwbGF5ZXJdJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbXB1dGVyUmFuZG9tUGxheXMoKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coY29tcHV0ZXJQbGF5c1JhbmRvbS5sZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgY29uc29sZS5sb2coc2hpcE5hbWVBbmRTaXplKTtcclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufVxyXG5cclxuY29uc3QgY29tcHV0ZXJSYW5kb21QbGF5cyA9ICgpID0+IHtcclxuICAgIGZvcihsZXQgZiA9IDA7IGYgPCAxMDAwOyBmKyspe1xyXG4gICAgICAgIGNvbnN0IHJhbmRvbU51bWJlciA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDk5KTtcclxuXHJcbiAgICAgICAgaWYoY29tcHV0ZXJQbGF5c1JhbmRvbS5maW5kSW5kZXgoaXRlbSA9PiBpdGVtID09IHJhbmRvbU51bWJlcikgPiAtMSl7XHJcbiAgICAgICAgICAgIGxldCBpbmRleCA9IGNvbXB1dGVyUGxheXNSYW5kb20uZmluZEluZGV4KGl0ZW0gPT4gaXRlbSA9PSByYW5kb21OdW1iZXIpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGlmKHJhbmRvbU51bWJlci50b1N0cmluZygpLnNwbGl0KCcnKS5sZW5ndGggPT0gMSl7XHJcbiAgICAgICAgICAgICAgICByb3cgPSAwO1xyXG4gICAgICAgICAgICAgICAgY29sdW1uID0gTnVtYmVyKHJhbmRvbU51bWJlci50b1N0cmluZygpLnNwbGl0KCcnKVswXSk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgcm93ID0gTnVtYmVyKHJhbmRvbU51bWJlci50b1N0cmluZygpLnNwbGl0KCcnKVswXSk7XHJcbiAgICAgICAgICAgICAgICBjb2x1bW4gPSBOdW1iZXIocmFuZG9tTnVtYmVyLnRvU3RyaW5nKCkuc3BsaXQoJycpWzFdKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IHJlbW92ZWRJdGVtID0gY29tcHV0ZXJQbGF5c1JhbmRvbS5zcGxpY2UoaW5kZXgsIDEpO1xyXG5cclxuICAgICAgICAgICAgaWYocmVtb3ZlZEl0ZW0pe1xyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHNoaXBOYW1lQW5kU2l6ZS5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IHNoaXBOYW1lQW5kU2l6ZVtpXS5wb3NpdGlvbi5sZW5ndGg7IGorKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNoaXBOYW1lQW5kU2l6ZVtpXS5wb3NpdGlvbltqXSA9PSByZW1vdmVkSXRlbSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaXNMZW5naHRUb1plcm8gPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoaXBOYW1lQW5kU2l6ZVtpXS5wb3NpdGlvbi5zcGxpY2UoaiwgMSk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgbyA9IDA7IG8gPCBzaGlwTmFtZUFuZFNpemUubGVuZ3RoOyBvKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNoaXBOYW1lQW5kU2l6ZVtvXS5wb3NpdGlvbi5sZW5ndGggPT0gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTGVuZ2h0VG9aZXJvLnB1c2goJ3RydWUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaXNMZW5naHRUb1plcm8ubGVuZ3RoID09IDUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbm5lclBhZ2UoJ2NvbXB1dGVyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHBvc2l0aW9uTGVuZ3RoQXJyID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBiID0gMDsgYiA8IHNoaXBOYW1lQW5kU2l6ZS5sZW5ndGg7IGIrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBjID0gMDsgYyA8IHNoaXBOYW1lQW5kU2l6ZVtiXS5wb3NpdGlvbi5sZW5ndGg7IGMrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uTGVuZ3RoQXJyLnB1c2goc2hpcE5hbWVBbmRTaXplW2JdLnBvc2l0aW9uW2NdKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1lvdSBub3QgYmxvdycsIGNvbXB1dGVyUGxheXNSYW5kb20ubGVuZ3RoLCBwb3NpdGlvbkxlbmd0aEFyci5sZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuY29uc3Qgd2lubmVyUGFnZSA9ICh3aW5uZXIpID0+IHtcclxuICAgIGNvbnN0IGdhbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FtZScpO1xyXG4gICAgXHJcbiAgICBjb25zdCBmaXhlZFdpbm5lclBhZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGZpeGVkV2lubmVyUGFnZS5jbGFzc0xpc3QuYWRkKCdmaXhlZFdpbm5lclBhZ2UnKTtcclxuICAgIFxyXG4gICAgY29uc3QgaDEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMScpO1xyXG4gICAgaDEudGV4dENvbnRlbnQgPSBgVGhlIHdpbm5lciBpcyBbJHt3aW5uZXJ9XWA7XHJcblxyXG4gICAgZml4ZWRXaW5uZXJQYWdlLmFwcGVuZENoaWxkKGgxKTtcclxuXHJcbiAgICBnYW1lLmFwcGVuZENoaWxkKGZpeGVkV2lubmVyUGFnZSk7XHJcbn0iXSwibmFtZXMiOlsiZ2FtZUZpZWxkc0FyciIsImdhbWVCb2FyZENsYXNzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwidGV4dENvbnRlbnQiLCJpIiwiaiIsImdhbWVGaWVsZCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJkYXRhc2V0Iiwicm93IiwiY29sdW1uIiwiYXBwZW5kQ2hpbGQiLCJzaGlwTmFtZUFuZFNpemUiLCJzaGlwc0NsYXNzIiwibGVuZ3RoIiwibGFuZCIsInNoaXAiLCJpZCIsIm5hbWUiLCJzdHlsZSIsImdyaWRUZW1wbGF0ZUNvbHVtbnMiLCJzaXplIiwid2lkdGgiLCJoZWlnaHQiLCJiYWNrZ3JvdW5kQ29sb3IiLCJkcmFnZ2FibGUiLCJzcXVhcmUiLCJjb21wdXRlckFyciIsImNvbXB1dGVyR2FtZWJvYXJkIiwiYWRkQ291bnRJblRlbkFyciIsImFyciIsImNvdW50IiwibmV3QXJyIiwicHVzaCIsInBvc2l0aW9uIiwic2hpcE5hbWVBbmRTaXplQ29tcHV0ZXIiLCJjb21wdXRlclBsYXlzUmFuZG9tIiwiYWRkSHVuZHJlZE51bWJlcnMiLCJ0cnVlT3JGYWxzZSIsIml0ZW0iLCJjb3VudEFyciIsImIiLCJ4IiwiZXZlcnkiLCJvIiwiZmlsdGVyIiwiY29uc29sZSIsImxvZyIsInZhbHVlIiwibnVtIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwidG9TdHJpbmciLCJOdW1iZXIiLCJzcGxpdCIsImZpbmRJbmRleENvbXB1dGVyIiwiZmluZEluZGV4IiwiY29tcHV0ZXIiLCJjb3BweUNvbXB1dGVyQXJyIiwiZHJhZ2dlZCIsImNvdW50Q29tcHV0ZXJDb3BweSIsIm0iLCJwIiwiY29tcHV0ZXJBcnJUd28iLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInRhcmdldCIsIm9wYWNpdHkiLCJmaXJzdENoaWxkIiwicHJldmVudERlZmF1bHQiLCJjbGFzc05hbWUiLCJiYWNrZ3JvdW5kIiwic2hpcElzR29vZFNpemUiLCJyZXN1bHRQb3NpdGlvbiIsInN0cmluZ1RvSW50IiwibmFtZVNoaXAiLCJsZW5ndGhTaGlwIiwiaW5kZXhPYmoiLCJmaXJzdFBvc2l0aW9uIiwibGFzdFNoaXBQb3NpdGlvbiIsInNoaXBBcnJQb3NpdGlvbiIsIm4iLCJpbmNsdWRlcyIsImlzVHJ1ZSIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsImsiLCJhZGRZSW5BcnIiLCJpc1Bvc2l0aW9uVHJ1ZSIsInN0YXJ0R2FtZSIsImNoaWxkTm9kZXMiLCJmb3JFYWNoIiwiY29udGFpbnMiLCJpc0xlbmdodFRvWmVybyIsImluZGV4IiwiU3RyaW5nIiwic3BsaWNlIiwicmVtb3ZlIiwid2lubmVyUGFnZSIsImNvbXB1dGVyUmFuZG9tUGxheXMiLCJmIiwicmFuZG9tTnVtYmVyIiwicmVtb3ZlZEl0ZW0iLCJwb3NpdGlvbkxlbmd0aEFyciIsImMiLCJ3aW5uZXIiLCJnYW1lIiwiZml4ZWRXaW5uZXJQYWdlIiwiaDEiXSwic291cmNlUm9vdCI6IiJ9