(()=>{"use strict";const e=e=>{const t=document.querySelector(".gameboard");t.textContent="";for(let o=0;o<10;o++)for(let n=0;n<10;n++)if("x"==e[o][n]){const e=document.createElement("div");e.classList.add("checked"),e.dataset.row=o,e.dataset.column=n,t.appendChild(e)}else if("y"==e[o][n]){const e=document.createElement("div");e.classList.add("blocked"),e.dataset.row=o,e.dataset.column=n,t.appendChild(e)}else{const e=document.createElement("div");e.classList.add("gameField"),e.dataset.row=o,e.dataset.column=n,t.appendChild(e)}},t=e=>{const t=document.querySelector(".ships");t.textContent="";for(let o=0;o<e.length;o++)if(1==e[o].land);else{const n=document.createElement("div");n.classList.add("ship"),n.dataset.id=e[o].id,n.classList.add(e[o].name),n.style.gridTemplateColumns=`repeat(${e[o].size}, 1fr)`,n.style.width=`calc(${e[o].id} * 50px)`,n.style.height="50px",n.style.backgroundColor="black",n.draggable=!0;for(let t=0;t<e[o].size;t++){const e=document.createElement("div");e.classList.add("square"),n.appendChild(e)}t.appendChild(n)}},o=e=>{const t=document.querySelector(".computerGameBoard");t.textContent="";for(let o=0;o<10;o++)for(let n=0;n<10;n++)if("X"==e[o][n]){const e=document.createElement("div");e.classList.add("plays"),e.dataset.row=o,e.dataset.column=n,t.appendChild(e)}else if("Y"==e[o][n]){const e=document.createElement("div");e.classList.add("blocked"),e.dataset.row=o,e.dataset.column=n,t.appendChild(e)}else{const e=document.createElement("div");e.classList.add("field"),e.dataset.row=o,e.dataset.column=n,t.appendChild(e)}},n=[],l=e=>{let t=0;for(let o=0;o<10;o++){const o=[];for(let e=0;e<10;e++)o.push(t),t++;e.push(o)}};l(n);const i=[{name:"Destroyer",size:2,id:2,land:!1,position:[]},{name:"Submarine",size:3,id:3,land:!1,position:[]},{name:"Cruiser",size:3,id:3,land:!1,position:[]},{name:"Battleship",size:4,id:4,land:!1,position:[]},{name:"Carrier",size:5,id:5,land:!1,position:[]}],s=[{name:"Destroyer",size:2,position:[]},{name:"Submarine",size:3,position:[]},{name:"Cruiser",size:3,position:[]},{name:"Battleship",size:4,position:[]},{name:"Carrier",size:5,position:[]}];let r=[];const a=e=>{for(let t=0;t<100;t++)e.push(t)};a([]),a(r);const d=e=>"X"!==e,c=e=>"Y"!=e;let p=[];l(p),(()=>{let e=0;p.length=0,l(p),o(p);for(let n=0;n<1e3;n++){for(let e=0;e<s.length;e++)s[e].position.every(d)||(s[e].position.length=0);if(s[0].position.length&&s[1].position.length&&s[2].position.length&&s[3].position.length&&s[4].position.length){for(let t=0;t<10;t++)p[t].filter((e=>"X"==e))&&(e+=p[t].filter((e=>"X"==e)).length);return console.log(e),{computerArr:p,shipNameAndSizeComputer:s}}for(let e=0;e<s.length;e++)if(s[e].position.length>1);else{const n=(t=e,Math.floor(94*Math.random())+s[t].size);let i,r;1==n.toString().length?(i=0,r=Number(n.toString().split("")[0])):(i=Number(n.toString().split("")[0]),r=Number(n.toString().split("")[1]));const a=p[i].findIndex((e=>e==n));if(a>0&&a-s[e].size>=0){for(let t=0;t<s[e].size;t++)s[e].position.push(p[i][a-t]),p[i][a-t]="X";if(0==i&&0==a){p[i+1][a+1]="Y";for(let t=0;t<s[e].size;t++)p[i+1][a-t]="Y"}else if(9==i&&a>0){p[i][a-s[e].size]="Y";for(let t=0;t<s[e].size;t++)p[i-1][a-t]="Y"}else if(9==i&&0==a)p[i][a+1]="Y",p[i][a-s[e].size]="Y";else if(0==i&&a>0){p[i][a+1]="Y",p[i][a-s[e].size]="Y";for(let t=0;t<s[e].size;t++)p[i+1][a-t]="Y"}else{p[i][a+1]="Y",p[i][a-s[e].size]="Y";for(let t=0;t<s[e].size;t++)p[i+1][a-t]="Y",p[i-1][a-t]="Y"}for(let e=0;e<s.length;e++)if(!s[e].position.every(c)){for(let e=0;e<s.length;e++)s[e].position.length=0;p.length=0,l(p),console.log(!1);break}o(p),console.log(s)}}}var t})();const g=[];l(g);let u,h=0;(()=>{for(let e=0;e<1e3;e++)for(let e=0;e<s.length;e++)for(let t=0;t<s[e].position.length;t++){let o,n;1==s[e].position[t].toString().split("").length?(o=0,n=s[e].position[t].toString().split("")[0]):(o=s[e].position[t].toString().split("")[0],n=s[e].position[t].toString().split("")[1]),h++,g[o][n]="X"}})(),console.log(g,h),o(g),e(n),t(i),document.addEventListener("dragstart",(e=>{u=e.target,e.target.style.opacity=.3}),!1),document.addEventListener("dragend",(e=>{e.target.style.opacity="",e.target.dataset.row=e.target.firstChild.dataset.row,e.target.dataset.column=e.target.firstChild.dataset.column}),!1),document.addEventListener("dragover",(e=>{e.preventDefault()}),!1),document.addEventListener("dragenter",(e=>{"gameField"==e.target.className&&(e.target.style.background="yellow")}),!1),document.addEventListener("dragleave",(e=>{"gameField"==e.target.className&&(e.target.style.background="")}),!1),document.addEventListener("drop",(o=>{if(o.preventDefault(),"gameField"==o.target.className){o.target.style.background="",o.target.appendChild(u);let l=!1,s=o.target.dataset.row+o.target.dataset.column,r=Number(s);for(let e=0;e<s.split("").length;e++)0==s.split("")[0]&&(s=s.split("")[1]);const a=o.target.firstChild.className.split(" ")[1];let d,c;for(let e=0;e<i.length;e++)i[e].name==a&&(d=i[e].size,c=e);const p=r,g=r+d-1,h=[];for(let e=p;e<=g;e++)h.push(e);t(i),((e,t,o,n,l)=>{for(let s=0;s<e.length;s++)if(e[s].includes(t))return!!e[s].includes(o)&&(n=!0,i[l].land=!0,n)})(n,p,g,l,c)?(o.target.style.background="",o.target.appendChild(u),u.parentNode.removeChild(u),((e,t,o,n,l)=>{for(let s=0;s<e.length;s++)for(let r=0;r<e[s].length;r++)if(e[s][r]==t)if(0==e[s][r]){for(let t=0;t<o;t++)i[n].position.push(e[s][r+t]),e[s][r+t]="x";e[s+1][r]="y";for(let t=0;t<o;t++)e[s+1][r+t]="y";e[s][r+o]="y"}else if(e[s][r]==e[0][r]){for(let t=0;t<o;t++)i[n].position.push(e[s][r+t]),e[s][r+t]="x";e[s+1][r]="y";for(let t=0;t<o;t++)e[s+1][r+t]="y";e[s][t-1]="y",e[s][l+1]="y"}else if(e[s][r]==e[9][r]&&0!=r){for(let t=0;t<o;t++)i[n].position.push(e[s][r+t]),e[s][r+t]="x";for(let t=0;t<o;t++)e[s-1][r+t]="y";e[s][o+r]="y",e[s][r-1]="y"}else if(e[s][r]==e[9][r]){for(let t=0;t<o;t++)i[n].position.push(e[s][r+t]),e[s][r+t]="x";for(let t=0;t<o;t++)e[s-1][r+t]="y";e[s][o]="y"}else{for(let t=0;t<o;t++)i[n].position.push(e[s][r+t]),e[s][r+t]="x";e[s+1][r]="y",e[s-1][r]="y",e[s][r-1]="y",e[s][r+o]="y";for(let t=0;t<o;t++)e[s+1][r+t]="y",e[s-1][r+t]="y"}})(n,p,d,c,g)):(o.target.style.background="",u.parentNode.removeChild(u),i[c].land=!1,t(i),e(n)),t(i)}e(n),(e=>{let t=0;for(let o=0;o<e.length;o++)e[o].position.length&&t++;return 5==t})(i)&&m()}),!1);const m=()=>{const e=document.querySelector(".ships");e.parentNode.removeChild(e),[...document.querySelector(".computerGameBoard").childNodes].forEach((e=>{e.addEventListener("click",(e=>{if(e.target.classList.contains("plays")){let t=[];const o=Number(String(e.target.dataset.row)+String(e.target.dataset.column));for(let e=0;e<s.length;e++)for(let t=0;t<s[e].position.length;t++)s[e].position[t]==o&&s[e].position.splice(t,1);e.target.classList.add("field"),e.target.classList.remove("plays");for(let e=0;e<s.length;e++)0==s[e].position.length&&t.push("true");if(5==t.length)return void y("you, [player]")}f(),console.log(r.length),console.log(i)}))}))},f=()=>{for(let e=0;e<1e3;e++){const e=Math.floor(99*Math.random());if(r.findIndex((t=>t==e))>-1){let t=r.findIndex((t=>t==e));1==e.toString().split("").length?(row=0,column=Number(e.toString().split("")[0])):(row=Number(e.toString().split("")[0]),column=Number(e.toString().split("")[1]));let o=r.splice(t,1);if(o){for(let e=0;e<i.length;e++)for(let t=0;t<i[e].position.length;t++)if(i[e].position[t]==o){let o=[];i[e].position.splice(t,1);for(let e=0;e<i.length;e++)0==i[e].position.length&&o.push("true");return 5==o.length?void y("computer"):void 0}let e=[];for(let t=0;t<i.length;t++)for(let o=0;o<i[t].position.length;o++)e.push(i[t].position[o]);return void console.log("You not blow",r.length,e.length)}}}},y=e=>{const t=document.querySelector(".game"),o=document.createElement("div");o.classList.add("fixedWinnerPage");const n=document.createElement("h1");n.textContent=`The winner is [${e}]`,o.appendChild(n),t.appendChild(o)}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFJakMsRUFBZ0JFLE9BQVErQixJQUNFLEdBQXRDakMsRUFBZ0JpQyxHQUFHWCxTQUFTcEIsUUFDM0JtRixFQUFlaEUsS0FBSyxRQUk1QixPQUE0QixHQUF6QmdFLEVBQWVuRixZQUNkd0YsRUFBVyxpQkFJZixFQUtaLElBQUlLLEVBQW9CLEdBRXhCLElBQUksSUFBSWpFLEVBQUksRUFBR0EsRUFBSTlCLEVBQWdCRSxPQUFRNEIsSUFDdkMsSUFBSSxJQUFJbUIsRUFBSSxFQUFHQSxFQUFJakQsRUFBZ0I4QixHQUFHUixTQUFTcEIsT0FBUStDLElBQ25EOEMsRUFBa0IxRSxLQUFLckIsRUFBZ0I4QixHQUFHUixTQUFTMkIsSUFNM0QsWUFGQWQsUUFBUUMsSUFBSSxlQUFnQlosRUFBb0J0QixPQUFRNkYsRUFBa0I3RixZQVFwRndGLEVBQWNNLElBQ2hCLE1BQU1DLEVBQU85RyxTQUFTQyxjQUFjLFNBRTlCOEcsRUFBa0IvRyxTQUFTTSxjQUFjLE9BQy9DeUcsRUFBZ0J4RyxVQUFVQyxJQUFJLG1CQUU5QixNQUFNd0csRUFBS2hILFNBQVNNLGNBQWMsTUFDbEMwRyxFQUFHOUcsWUFBYyxrQkFBa0IyRyxLQUVuQ0UsRUFBZ0JuRyxZQUFZb0csR0FFNUJGLEVBQUtsRyxZQUFZbUcsSyIsInNvdXJjZXMiOlsid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvY29tcG9uZW50cy9nYW1lQm9hcmRGaWVsZHMuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9jb21wb25lbnRzL2NyZWF0ZVNoaXAuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9jb21wb25lbnRzL2NvbXB1dGVyR2FtZUJvYXJkRmllbGQuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBnYW1lQm9hcmRGaWVsZHMgPSAoZ2FtZUZpZWxkc0FycikgPT4ge1xyXG4gICAgY29uc3QgZ2FtZUJvYXJkQ2xhc3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FtZWJvYXJkJyk7XHJcblxyXG4gICAgZ2FtZUJvYXJkQ2xhc3MudGV4dENvbnRlbnQgPSAnJztcclxuXHJcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgMTA7IGkrKyl7XHJcbiAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IDEwOyBqKyspe1xyXG4gICAgICAgICAgICBpZihnYW1lRmllbGRzQXJyW2ldW2pdID09ICd4Jyl7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBnYW1lRmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5jbGFzc0xpc3QuYWRkKCdjaGVja2VkJyk7XHJcbiAgICAgICAgICAgICAgICBnYW1lRmllbGQuZGF0YXNldC5yb3cgPSBpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmRhdGFzZXQuY29sdW1uID0gajtcclxuXHJcbiAgICAgICAgICAgICAgICBnYW1lQm9hcmRDbGFzcy5hcHBlbmRDaGlsZChnYW1lRmllbGQpO1xyXG4gICAgICAgICAgICB9ZWxzZSBpZihnYW1lRmllbGRzQXJyW2ldW2pdID09ICd5Jyl7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBnYW1lRmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5jbGFzc0xpc3QuYWRkKCdibG9ja2VkJyk7XHJcbiAgICAgICAgICAgICAgICBnYW1lRmllbGQuZGF0YXNldC5yb3cgPSBpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmRhdGFzZXQuY29sdW1uID0gajtcclxuXHJcbiAgICAgICAgICAgICAgICBnYW1lQm9hcmRDbGFzcy5hcHBlbmRDaGlsZChnYW1lRmllbGQpO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGdhbWVGaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmNsYXNzTGlzdC5hZGQoJ2dhbWVGaWVsZCcpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmRhdGFzZXQucm93ID0gaTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5kYXRhc2V0LmNvbHVtbiA9IGo7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGdhbWVCb2FyZENsYXNzLmFwcGVuZENoaWxkKGdhbWVGaWVsZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGdhbWVCb2FyZEZpZWxkczsiLCJjb25zdCBjcmVhdGVTaGlwID0gKHNoaXBOYW1lQW5kU2l6ZSkgPT4ge1xyXG4gICAgY29uc3Qgc2hpcHNDbGFzcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaGlwcycpO1xyXG5cclxuICAgIHNoaXBzQ2xhc3MudGV4dENvbnRlbnQgPSAnJztcclxuXHJcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgc2hpcE5hbWVBbmRTaXplLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICBpZihzaGlwTmFtZUFuZFNpemVbaV0ubGFuZCA9PSB0cnVlKXtcclxuXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGNvbnN0IHNoaXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgc2hpcC5jbGFzc0xpc3QuYWRkKCdzaGlwJyk7XHJcbiAgICAgICAgICAgIHNoaXAuZGF0YXNldC5pZCA9IHNoaXBOYW1lQW5kU2l6ZVtpXS5pZDtcclxuICAgICAgICAgICAgc2hpcC5jbGFzc0xpc3QuYWRkKHNoaXBOYW1lQW5kU2l6ZVtpXS5uYW1lKTtcclxuICAgICAgICAgICAgc2hpcC5zdHlsZS5ncmlkVGVtcGxhdGVDb2x1bW5zID0gYHJlcGVhdCgke3NoaXBOYW1lQW5kU2l6ZVtpXS5zaXplfSwgMWZyKWA7XHJcbiAgICAgICAgICAgIHNoaXAuc3R5bGUud2lkdGggPSBgY2FsYygke3NoaXBOYW1lQW5kU2l6ZVtpXS5pZH0gKiA1MHB4KWA7XHJcbiAgICAgICAgICAgIHNoaXAuc3R5bGUuaGVpZ2h0ID0gJzUwcHgnO1xyXG4gICAgICAgICAgICBzaGlwLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdibGFjayc7IFxyXG4gICAgICAgICAgICBzaGlwLmRyYWdnYWJsZSA9IHRydWU7XHJcblxyXG5cclxuICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IHNoaXBOYW1lQW5kU2l6ZVtpXS5zaXplOyBqKyspe1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3F1YXJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBzcXVhcmUuY2xhc3NMaXN0LmFkZCgnc3F1YXJlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgc2hpcC5hcHBlbmRDaGlsZChzcXVhcmUpO1xyXG4gICAgICAgICAgICB9ICAgXHJcblxyXG4gICAgICAgICAgICBzaGlwc0NsYXNzLmFwcGVuZENoaWxkKHNoaXApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlU2hpcDsiLCJjb25zdCBjb21wdXRlckdhbWVCb2FyZEZpZWxkID0gKGNvbXB1dGVyQXJyKSA9PiB7XHJcbiAgICBcclxuICAgIGNvbnN0IGNvbXB1dGVyR2FtZWJvYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbXB1dGVyR2FtZUJvYXJkJyk7XHJcbiAgICBjb21wdXRlckdhbWVib2FyZC50ZXh0Q29udGVudCA9ICcnO1xyXG5cclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKXtcclxuICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgMTA7IGorKyl7XHJcbiAgICAgICAgICAgIGlmKGNvbXB1dGVyQXJyW2ldW2pdID09ICdYJyl7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBnYW1lRmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5jbGFzc0xpc3QuYWRkKCdwbGF5cycpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmRhdGFzZXQucm93ID0gaTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5kYXRhc2V0LmNvbHVtbiA9IGo7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbXB1dGVyR2FtZWJvYXJkLmFwcGVuZENoaWxkKGdhbWVGaWVsZCk7XHJcbiAgICAgICAgICAgIH1lbHNlIGlmKGNvbXB1dGVyQXJyW2ldW2pdID09ICdZJyl7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBnYW1lRmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5jbGFzc0xpc3QuYWRkKCdibG9ja2VkJyk7XHJcbiAgICAgICAgICAgICAgICBnYW1lRmllbGQuZGF0YXNldC5yb3cgPSBpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmRhdGFzZXQuY29sdW1uID0gajtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29tcHV0ZXJHYW1lYm9hcmQuYXBwZW5kQ2hpbGQoZ2FtZUZpZWxkKTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBnYW1lRmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5jbGFzc0xpc3QuYWRkKCdmaWVsZCcpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmRhdGFzZXQucm93ID0gaTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5kYXRhc2V0LmNvbHVtbiA9IGo7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbXB1dGVyR2FtZWJvYXJkLmFwcGVuZENoaWxkKGdhbWVGaWVsZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNvbXB1dGVyR2FtZUJvYXJkRmllbGQ7IiwiaW1wb3J0IGdhbWVCb2FyZEZpZWxkcyBmcm9tIFwiLi9jb21wb25lbnRzL2dhbWVCb2FyZEZpZWxkc1wiO1xyXG5pbXBvcnQgY3JlYXRlU2hpcCBmcm9tIFwiLi9jb21wb25lbnRzL2NyZWF0ZVNoaXBcIjtcclxuaW1wb3J0IGNvbXB1dGVyR2FtZUJvYXJkRmllbGQgZnJvbSBcIi4vY29tcG9uZW50cy9jb21wdXRlckdhbWVCb2FyZEZpZWxkXCI7XHJcblxyXG5jb25zdCBnYW1lRmllbGRzQXJyID0gW107XHJcblxyXG5jb25zdCBhZGRDb3VudEluVGVuQXJyID0gKGFycikgPT4ge1xyXG4gICAgbGV0IGNvdW50ID0gMDtcclxuXHJcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgMTA7IGkrKyl7XHJcbiAgICAgICAgY29uc3QgbmV3QXJyID0gW107XHJcbiAgICBcclxuICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgMTA7IGorKyl7XHJcbiAgICAgICAgICAgIG5ld0Fyci5wdXNoKGNvdW50KTtcclxuICAgICAgICAgICAgY291bnQrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgYXJyLnB1c2gobmV3QXJyKTtcclxuICAgIH1cclxufVxyXG5cclxuYWRkQ291bnRJblRlbkFycihnYW1lRmllbGRzQXJyKTtcclxuXHJcbmNvbnN0IHNoaXBOYW1lQW5kU2l6ZSA9IFtcclxuICAgIHtuYW1lOiAnRGVzdHJveWVyJywgc2l6ZTogMiwgaWQ6IDIsIGxhbmQ6IGZhbHNlLCBwb3NpdGlvbjogW119LFxyXG4gICAge25hbWU6ICdTdWJtYXJpbmUnLCBzaXplOiAzLCBpZDogMywgbGFuZDogZmFsc2UsIHBvc2l0aW9uOiBbXX0sXHJcbiAgICB7bmFtZTogJ0NydWlzZXInLCBzaXplOiAzLCBpZDogMywgbGFuZDogZmFsc2UsIHBvc2l0aW9uOiBbXX0sXHJcbiAgICB7bmFtZTogJ0JhdHRsZXNoaXAnLCBzaXplOiA0LCBpZDogNCwgbGFuZDogZmFsc2UsIHBvc2l0aW9uOiBbXX0sXHJcbiAgICB7bmFtZTogJ0NhcnJpZXInLCBzaXplOiA1LCBpZDogNSwgbGFuZDogZmFsc2UsIHBvc2l0aW9uOiBbXX0sXHJcbl1cclxuXHJcbmNvbnN0IHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyID0gW1xyXG4gICAge25hbWU6ICdEZXN0cm95ZXInLCBzaXplOiAyLCBwb3NpdGlvbjogW119LFxyXG4gICAge25hbWU6ICdTdWJtYXJpbmUnLCBzaXplOiAzLCBwb3NpdGlvbjogW119LFxyXG4gICAge25hbWU6ICdDcnVpc2VyJywgc2l6ZTogMywgcG9zaXRpb246IFtdfSxcclxuICAgIHtuYW1lOiAnQmF0dGxlc2hpcCcsIHNpemU6IDQsIHBvc2l0aW9uOiBbXX0sXHJcbiAgICB7bmFtZTogJ0NhcnJpZXInLCBzaXplOiA1LCBwb3NpdGlvbjogW119LFxyXG5dXHJcblxyXG5sZXQgY29tcHV0ZXJQbGF5c1JhbmRvbSA9IFtdO1xyXG5sZXQgcGxheWVySW5kZXhQbGF5cyA9IFtdO1xyXG5cclxuY29uc3QgYWRkSHVuZHJlZE51bWJlcnMgPSAoYXJyKSA9PiB7XHJcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgMTAwOyBpKyspe1xyXG4gICAgICAgIGFyci5wdXNoKGkpO1xyXG4gICAgfVxyXG59XHJcblxyXG5hZGRIdW5kcmVkTnVtYmVycyhwbGF5ZXJJbmRleFBsYXlzKTtcclxuYWRkSHVuZHJlZE51bWJlcnMoY29tcHV0ZXJQbGF5c1JhbmRvbSk7XHJcblxyXG5jb25zdCB0cnVlT3JGYWxzZSA9IChpdGVtKSA9PiB7XHJcbiAgICByZXR1cm4gaXRlbSAhPT0gJ1gnO1xyXG59XHJcblxyXG5jb25zdCBub3RZID0gKGl0ZW0pID0+IHtcclxuICAgIHJldHVybiBpdGVtICE9ICdZJztcclxufVxyXG5cclxubGV0IGNvbXB1dGVyQXJyID0gW107XHJcblxyXG5hZGRDb3VudEluVGVuQXJyKGNvbXB1dGVyQXJyKTtcclxuXHJcbmNvbnN0IHJhbmRvbVBvc2l0aW9uID0gKG51bSkgPT4ge1xyXG4gICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDk0KSArIHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW251bV0uc2l6ZTtcclxufVxyXG5cclxuY29uc3QgY29tcHV0ZXIgPSAoKSA9PiB7XHJcbiAgICBsZXQgY291bnRBcnIgPSAwO1xyXG4gICAgY29tcHV0ZXJBcnIubGVuZ3RoID0gMDtcclxuXHJcbiAgICBhZGRDb3VudEluVGVuQXJyKGNvbXB1dGVyQXJyKTtcclxuICAgIGNvbXB1dGVyR2FtZUJvYXJkRmllbGQoY29tcHV0ZXJBcnIpO1xyXG5cclxuICAgIGZvcihsZXQgYiA9IDA7IGIgPCAxMDAwOyBiKyspe1xyXG4gICAgICAgIGZvcihsZXQgeCA9IDA7IHggPCBzaGlwTmFtZUFuZFNpemVDb21wdXRlci5sZW5ndGg7IHgrKyl7XHJcbiAgICAgICAgICAgIGlmKHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW3hdLnBvc2l0aW9uLmV2ZXJ5KHRydWVPckZhbHNlKSl7XHJcblxyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW3hdLnBvc2l0aW9uLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyWzBdLnBvc2l0aW9uLmxlbmd0aCAmJiBzaGlwTmFtZUFuZFNpemVDb21wdXRlclsxXS5wb3NpdGlvbi5sZW5ndGggJiYgc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbMl0ucG9zaXRpb24ubGVuZ3RoICYmIHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyWzNdLnBvc2l0aW9uLmxlbmd0aCAmJiBzaGlwTmFtZUFuZFNpemVDb21wdXRlcls0XS5wb3NpdGlvbi5sZW5ndGgpe1xyXG4gICAgICAgICAgICBmb3IobGV0IG8gPSAwOyBvIDwgMTA7IG8rKyl7XHJcbiAgICAgICAgICAgICAgICBpZihjb21wdXRlckFycltvXS5maWx0ZXIoaXRlbSA9PiAgaXRlbSA9PSAnWCcpKXtcclxuICAgICAgICAgICAgICAgICAgICBjb3VudEFyciArPSBjb21wdXRlckFycltvXS5maWx0ZXIoaXRlbSA9PiBpdGVtID09ICdYJykubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhjb3VudEFycik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgY29tcHV0ZXJBcnIsXHJcbiAgICAgICAgICAgICAgICBzaGlwTmFtZUFuZFNpemVDb21wdXRlcixcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgIGlmKHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW2ldLnBvc2l0aW9uLmxlbmd0aCA+IDEpe1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHJhbmRvbVBvc2l0aW9uKGkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCByb3c7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNvbHVtbjtcclxuICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZih2YWx1ZS50b1N0cmluZygpLmxlbmd0aCA9PSAxKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm93ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gTnVtYmVyKHZhbHVlLnRvU3RyaW5nKCkuc3BsaXQoJycpWzBdKTtcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm93ID0gTnVtYmVyKHZhbHVlLnRvU3RyaW5nKCkuc3BsaXQoJycpWzBdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gTnVtYmVyKHZhbHVlLnRvU3RyaW5nKCkuc3BsaXQoJycpWzFdKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmluZEluZGV4Q29tcHV0ZXIgPSBjb21wdXRlckFycltyb3ddLmZpbmRJbmRleChpdGVtID0+IGl0ZW0gPT0gdmFsdWUpO1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmKGZpbmRJbmRleENvbXB1dGVyID4gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGZpbmRJbmRleENvbXB1dGVyIC0gc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbaV0uc2l6ZSA+PSAwKXsgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW2ldLnNpemU7IGorKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbaV0ucG9zaXRpb24ucHVzaChjb21wdXRlckFycltyb3ddW2ZpbmRJbmRleENvbXB1dGVyIC0gal0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXB1dGVyQXJyW3Jvd11bZmluZEluZGV4Q29tcHV0ZXIgLSBqXSA9ICdYJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJvdyA9PSAwICYmIGZpbmRJbmRleENvbXB1dGVyID09IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXB1dGVyQXJyW3JvdyArIDFdW2ZpbmRJbmRleENvbXB1dGVyICsgMV0gPSAnWSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBxID0gMDsgcSA8IHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW2ldLnNpemU7IHErKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXB1dGVyQXJyW3JvdyArIDFdW2ZpbmRJbmRleENvbXB1dGVyIC0gcV0gPSAnWSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYocm93ID09IDkgJiYgZmluZEluZGV4Q29tcHV0ZXIgPiAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wdXRlckFycltyb3ddW2ZpbmRJbmRleENvbXB1dGVyIC0gc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbaV0uc2l6ZV0gPSAnWSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBxID0gMDsgcSA8IHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW2ldLnNpemU7IHErKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXB1dGVyQXJyW3JvdyAtIDFdW2ZpbmRJbmRleENvbXB1dGVyIC0gcV0gPSAnWSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYocm93ID09IDkgJiYgZmluZEluZGV4Q29tcHV0ZXIgPT0gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcHV0ZXJBcnJbcm93XVtmaW5kSW5kZXhDb21wdXRlciArIDFdID0gJ1knO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXB1dGVyQXJyW3Jvd11bZmluZEluZGV4Q29tcHV0ZXIgLSBzaGlwTmFtZUFuZFNpemVDb21wdXRlcltpXS5zaXplXSA9ICdZJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKHJvdyA9PSAwICYmIGZpbmRJbmRleENvbXB1dGVyID4gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcHV0ZXJBcnJbcm93XVtmaW5kSW5kZXhDb21wdXRlciArIDFdID0gJ1knO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXB1dGVyQXJyW3Jvd11bZmluZEluZGV4Q29tcHV0ZXIgLSBzaGlwTmFtZUFuZFNpemVDb21wdXRlcltpXS5zaXplXSA9ICdZJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IHEgPSAwOyBxIDwgc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbaV0uc2l6ZTsgcSsrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcHV0ZXJBcnJbcm93ICsgMV1bZmluZEluZGV4Q29tcHV0ZXIgLSBxXSA9ICdZJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wdXRlckFycltyb3ddW2ZpbmRJbmRleENvbXB1dGVyICsgMV0gPSAnWSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcHV0ZXJBcnJbcm93XVtmaW5kSW5kZXhDb21wdXRlciAtIHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW2ldLnNpemVdID0gJ1knO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgcSA9IDA7IHEgPCBzaGlwTmFtZUFuZFNpemVDb21wdXRlcltpXS5zaXplOyBxKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wdXRlckFycltyb3cgKyAxXVtmaW5kSW5kZXhDb21wdXRlciAtIHFdID0gJ1knO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wdXRlckFycltyb3cgLSAxXVtmaW5kSW5kZXhDb21wdXRlciAtIHFdID0gJ1knO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgZSA9IDA7IGUgPCBzaGlwTmFtZUFuZFNpemVDb21wdXRlci5sZW5ndGg7IGUrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW2VdLnBvc2l0aW9uLmV2ZXJ5KG5vdFkpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBjID0gMDsgYyA8IHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyLmxlbmd0aDsgYysrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW2NdLnBvc2l0aW9uLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcHV0ZXJBcnIubGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkQ291bnRJblRlbkFycihjb21wdXRlckFycik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhmYWxzZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wdXRlckdhbWVCb2FyZEZpZWxkKGNvbXB1dGVyQXJyKTsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzaGlwTmFtZUFuZFNpemVDb21wdXRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuY29tcHV0ZXIoKTtcclxuXHJcbmNvbnN0IGNvcHB5Q29tcHV0ZXJBcnIgPSBbXTtcclxuXHJcbmFkZENvdW50SW5UZW5BcnIoY29wcHlDb21wdXRlckFycik7XHJcblxyXG5sZXQgY291bnRDb21wdXRlckNvcHB5ID0gMDtcclxuXHJcbmNvbnN0IGNvbXB1dGVyQXJyVHdvID0gKCkgPT4ge1xyXG4gICAgZm9yKGxldCBoID0gMDsgaCA8IDEwMDA7IGgrKyl7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW2ldLnBvc2l0aW9uLmxlbmd0aDsgaisrKXtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgbGV0IHJvdztcclxuICAgICAgICAgICAgICAgIGxldCBjb2x1bW47XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZihzaGlwTmFtZUFuZFNpemVDb21wdXRlcltpXS5wb3NpdGlvbltqXS50b1N0cmluZygpLnNwbGl0KCcnKS5sZW5ndGggPT0gMSl7XHJcbiAgICAgICAgICAgICAgICAgICAgcm93ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSBzaGlwTmFtZUFuZFNpemVDb21wdXRlcltpXS5wb3NpdGlvbltqXS50b1N0cmluZygpLnNwbGl0KCcnKVswXTtcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIHJvdyA9IHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW2ldLnBvc2l0aW9uW2pdLnRvU3RyaW5nKCkuc3BsaXQoJycpWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbiA9IHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW2ldLnBvc2l0aW9uW2pdLnRvU3RyaW5nKCkuc3BsaXQoJycpWzFdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY291bnRDb21wdXRlckNvcHB5Kys7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGNvcHB5Q29tcHV0ZXJBcnJbcm93XVtjb2x1bW5dID0gJ1gnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5jb21wdXRlckFyclR3bygpO1xyXG5cclxuY29uc29sZS5sb2coY29wcHlDb21wdXRlckFyciwgY291bnRDb21wdXRlckNvcHB5KTtcclxuXHJcblxyXG5jb21wdXRlckdhbWVCb2FyZEZpZWxkKGNvcHB5Q29tcHV0ZXJBcnIpO1xyXG5cclxuY29uc3Qgc2hpcCA9IChib2R5TGVuZ3RoLCB3aGVyZUhpdHMsIHN1bmspID0+IHtcclxuICAgIFxyXG4gICAgcmV0dXJue1xyXG4gICAgICAgIGJvZHlMZW5ndGgsXHJcbiAgICAgICAgd2hlcmVIaXRzLFxyXG4gICAgICAgIHN1bmssXHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IGhpdCA9IChoaXRQb3NpdGlvbikgPT4ge1xyXG4gICAgXHJcbiAgICByZXR1cm57XHJcbiAgICAgICAgaGl0UG9zaXRpb24sXHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IGlzU3VuayA9IChib2R5TGVuZ3RoKSA9PiB7XHJcbiAgICBjb25zdCBoaXRzID0gYm9keUxlbmd0aCAtIHNoaXAoKS5zdW5rO1xyXG5cclxuICAgIGlmKGhpdHMgPT0gMCl7XHJcbiAgICAgICAgcmV0dXJuICdzaGlwIGlzIHN1bmsnO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBoaXRzO1xyXG59XHJcblxyXG5sZXQgZHJhZ2dlZDtcclxuXHJcbmdhbWVCb2FyZEZpZWxkcyhnYW1lRmllbGRzQXJyKTtcclxuY3JlYXRlU2hpcChzaGlwTmFtZUFuZFNpemUpO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdzdGFydFwiLCAoZSkgPT4ge1xyXG4gICAgZHJhZ2dlZCA9IGUudGFyZ2V0O1xyXG5cclxuICAgIGUudGFyZ2V0LnN0eWxlLm9wYWNpdHkgPSAuMztcclxuXHJcbn0sIGZhbHNlKTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnZW5kXCIsIChlKSA9PiB7XHJcbiAgICBlLnRhcmdldC5zdHlsZS5vcGFjaXR5ID0gXCJcIjtcclxuICAgIGUudGFyZ2V0LmRhdGFzZXQucm93ID0gZS50YXJnZXQuZmlyc3RDaGlsZC5kYXRhc2V0LnJvdztcclxuICAgIGUudGFyZ2V0LmRhdGFzZXQuY29sdW1uID0gZS50YXJnZXQuZmlyc3RDaGlsZC5kYXRhc2V0LmNvbHVtbjtcclxufSwgZmFsc2UpO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdvdmVyXCIsIChlKSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbn0sIGZhbHNlKTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnZW50ZXJcIiwgKGUpID0+IHtcclxuICAgIGlmKGUudGFyZ2V0LmNsYXNzTmFtZSA9PSBcImdhbWVGaWVsZFwiKXtcclxuICAgICAgICBlLnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kID0gXCJ5ZWxsb3dcIjtcclxuICAgIH1cclxufSwgZmFsc2UpO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdsZWF2ZVwiLCAoZSkgPT4ge1xyXG4gICAgaWYoZS50YXJnZXQuY2xhc3NOYW1lID09IFwiZ2FtZUZpZWxkXCIpe1xyXG4gICAgICAgIGUudGFyZ2V0LnN0eWxlLmJhY2tncm91bmQgPSBcIlwiO1xyXG4gICAgfVxyXG59LCBmYWxzZSk7XHJcblxyXG5jb25zdCBpc1RydWUgPSAoZ2FtZUZpZWxkc0FyciwgZmlyc3RQb3NpdGlvbiwgbGFzdFNoaXBQb3NpdGlvbiwgc2hpcElzR29vZFNpemUsIGluZGV4T2JqKSA9PiB7XHJcbiAgICBmb3IobGV0IG4gPSAwOyBuIDwgZ2FtZUZpZWxkc0Fyci5sZW5ndGg7IG4rKyl7XHJcbiAgICAgICAgaWYoZ2FtZUZpZWxkc0FycltuXS5pbmNsdWRlcyhmaXJzdFBvc2l0aW9uKSl7XHJcbiAgICAgICAgICAgIGlmKGdhbWVGaWVsZHNBcnJbbl0uaW5jbHVkZXMobGFzdFNoaXBQb3NpdGlvbikpe1xyXG4gICAgICAgICAgICAgICAgc2hpcElzR29vZFNpemUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgc2hpcE5hbWVBbmRTaXplW2luZGV4T2JqXS5sYW5kID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2hpcElzR29vZFNpemU7XHJcbiAgICAgICAgICAgIH07IFxyXG4gICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gc2hpcElzR29vZFNpemUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IGFkZFlJbkFyciA9IChnYW1lRmllbGRzQXJyLCBmaXJzdFBvc2l0aW9uLCBsZW5ndGhTaGlwLCBpbmRleE9iaiwgbGFzdFNoaXBQb3NpdGlvbikgPT4ge1xyXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IGdhbWVGaWVsZHNBcnIubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCBnYW1lRmllbGRzQXJyW2ldLmxlbmd0aDsgaisrKXtcclxuICAgICAgICAgICAgaWYoZ2FtZUZpZWxkc0FycltpXVtqXSA9PSBmaXJzdFBvc2l0aW9uKXtcclxuICAgICAgICAgICAgICAgIGlmKGdhbWVGaWVsZHNBcnJbaV1bal0gPT0gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBrID0gMDsgayA8IGxlbmd0aFNoaXA7IGsrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoaXBOYW1lQW5kU2l6ZVtpbmRleE9ial0ucG9zaXRpb24ucHVzaChnYW1lRmllbGRzQXJyW2ldW2ogKyBrXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaV1baiArIGtdID0gJ3gnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2kgKyAxXVtqXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICBmb3IobGV0IHAgPSAwOyBwIDwgbGVuZ3RoU2hpcDsgcCsrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpICsgMV1baiArIHBdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2ldW2ogKyBsZW5ndGhTaGlwXSA9ICd5JztcclxuICAgICAgICAgICAgICAgIH1lbHNlIGlmKGdhbWVGaWVsZHNBcnJbaV1bal0gPT0gZ2FtZUZpZWxkc0FyclswXVtqXSl7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBrID0gMDsgayA8IGxlbmd0aFNoaXA7IGsrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoaXBOYW1lQW5kU2l6ZVtpbmRleE9ial0ucG9zaXRpb24ucHVzaChnYW1lRmllbGRzQXJyW2ldW2ogKyBrXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaV1baiArIGtdID0gJ3gnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2kgKyAxXVtqXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICBmb3IobGV0IHAgPSAwOyBwIDwgbGVuZ3RoU2hpcDsgcCsrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpICsgMV1baiArIHBdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2ldW2ZpcnN0UG9zaXRpb24gLSAxXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2ldW2xhc3RTaGlwUG9zaXRpb24gKyAxXSA9ICd5JztcclxuICAgICAgICAgICAgICAgIH1lbHNlIGlmKGdhbWVGaWVsZHNBcnJbaV1bal0gPT0gZ2FtZUZpZWxkc0Fycls5XVtqXSAmJiBqICE9IDApe1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcihsZXQgayA9IDA7IGsgPCBsZW5ndGhTaGlwOyBrKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGlwTmFtZUFuZFNpemVbaW5kZXhPYmpdLnBvc2l0aW9uLnB1c2goZ2FtZUZpZWxkc0FycltpXVtqICsga10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2ldW2ogKyBrXSA9ICd4JztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBwID0gMDsgcCA8IGxlbmd0aFNoaXA7IHArKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaSAtIDFdW2ogKyBwXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtsZW5ndGhTaGlwICsgal0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtqIC0gMV0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZSBpZihnYW1lRmllbGRzQXJyW2ldW2pdID09IGdhbWVGaWVsZHNBcnJbOV1bal0pe1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcihsZXQgayA9IDA7IGsgPCBsZW5ndGhTaGlwOyBrKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGlwTmFtZUFuZFNpemVbaW5kZXhPYmpdLnBvc2l0aW9uLnB1c2goZ2FtZUZpZWxkc0FycltpXVtqICsga10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2ldW2ogKyBrXSA9ICd4JztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBwID0gMDsgcCA8IGxlbmd0aFNoaXA7IHArKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaSAtIDFdW2ogKyBwXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtsZW5ndGhTaGlwXSA9ICd5JztcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcihsZXQgayA9IDA7IGsgPCBsZW5ndGhTaGlwOyBrKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGlwTmFtZUFuZFNpemVbaW5kZXhPYmpdLnBvc2l0aW9uLnB1c2goZ2FtZUZpZWxkc0FycltpXVtqICsga10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2ldW2ogKyBrXSA9ICd4JztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpICsgMV1bal0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpIC0gMV1bal0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtqIC0gMV0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtqICsgbGVuZ3RoU2hpcF0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBwID0gMDsgcCA8IGxlbmd0aFNoaXA7IHArKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaSArIDFdW2ogKyBwXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpIC0gMV1baiArIHBdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyb3BcIiwgKGUpID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICBpZihlLnRhcmdldC5jbGFzc05hbWUgPT0gJ2dhbWVGaWVsZCcpe1xyXG4gICAgICAgIGUudGFyZ2V0LnN0eWxlLmJhY2tncm91bmQgPSBcIlwiO1xyXG4gICAgICAgIGUudGFyZ2V0LmFwcGVuZENoaWxkKGRyYWdnZWQpO1xyXG5cclxuICAgICAgICBsZXQgc2hpcElzR29vZFNpemUgPSBmYWxzZTtcclxuICAgICAgICBsZXQgcmVzdWx0UG9zaXRpb24gPSBlLnRhcmdldC5kYXRhc2V0LnJvdyArIGUudGFyZ2V0LmRhdGFzZXQuY29sdW1uO1xyXG4gICAgICAgIGxldCBzdHJpbmdUb0ludCA9IE51bWJlcihyZXN1bHRQb3NpdGlvbik7XHJcbiAgICBcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgcmVzdWx0UG9zaXRpb24uc3BsaXQoJycpLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgaWYocmVzdWx0UG9zaXRpb24uc3BsaXQoJycpWzBdID09IDApe1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0UG9zaXRpb24gPSByZXN1bHRQb3NpdGlvbi5zcGxpdCgnJylbMV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ICAgXHJcblxyXG4gICAgICAgIGNvbnN0IG5hbWVTaGlwID0gZS50YXJnZXQuZmlyc3RDaGlsZC5jbGFzc05hbWUuc3BsaXQoJyAnKVsxXTtcclxuICAgICAgICBsZXQgbGVuZ3RoU2hpcDtcclxuICAgICAgICBsZXQgaW5kZXhPYmo7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IHNoaXBOYW1lQW5kU2l6ZS5sZW5ndGg7IGorKyl7XHJcbiAgICAgICAgICAgIGlmKHNoaXBOYW1lQW5kU2l6ZVtqXS5uYW1lID09IG5hbWVTaGlwKXtcclxuICAgICAgICAgICAgICAgIGxlbmd0aFNoaXAgPSBzaGlwTmFtZUFuZFNpemVbal0uc2l6ZTtcclxuICAgICAgICAgICAgICAgIGluZGV4T2JqID0galxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGZpcnN0UG9zaXRpb24gPSBzdHJpbmdUb0ludDtcclxuICAgICAgICBjb25zdCBsYXN0U2hpcFBvc2l0aW9uID0gc3RyaW5nVG9JbnQgKyBsZW5ndGhTaGlwIC0gMTtcclxuICAgICAgICBjb25zdCBzaGlwQXJyUG9zaXRpb24gPSBbXTtcclxuXHJcbiAgICAgICAgZm9yKGxldCB4ID0gZmlyc3RQb3NpdGlvbjsgeCA8PSBsYXN0U2hpcFBvc2l0aW9uOyB4Kyspe1xyXG4gICAgICAgICAgICBzaGlwQXJyUG9zaXRpb24ucHVzaCh4KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNyZWF0ZVNoaXAoc2hpcE5hbWVBbmRTaXplKTtcclxuXHJcbiAgICAgICAgaWYoIWlzVHJ1ZShnYW1lRmllbGRzQXJyLCBmaXJzdFBvc2l0aW9uLCBsYXN0U2hpcFBvc2l0aW9uLCBzaGlwSXNHb29kU2l6ZSwgaW5kZXhPYmopKXtcclxuICAgICAgICAgICAgZS50YXJnZXQuc3R5bGUuYmFja2dyb3VuZCA9IFwiXCI7XHJcbiAgICAgICAgICAgIGRyYWdnZWQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkcmFnZ2VkKTtcclxuICAgICAgICAgICAgc2hpcE5hbWVBbmRTaXplW2luZGV4T2JqXS5sYW5kID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGNyZWF0ZVNoaXAoc2hpcE5hbWVBbmRTaXplKTtcclxuICAgICAgICAgICAgZ2FtZUJvYXJkRmllbGRzKGdhbWVGaWVsZHNBcnIpO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBlLnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kID0gXCJcIjtcclxuICAgICAgICAgICAgZS50YXJnZXQuYXBwZW5kQ2hpbGQoZHJhZ2dlZCk7XHJcbiAgICAgICAgICAgIGRyYWdnZWQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkcmFnZ2VkKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGFkZFlJbkFycihnYW1lRmllbGRzQXJyLCBmaXJzdFBvc2l0aW9uLCBsZW5ndGhTaGlwLCBpbmRleE9iaiwgbGFzdFNoaXBQb3NpdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNyZWF0ZVNoaXAoc2hpcE5hbWVBbmRTaXplKTsgIFxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGlzUG9zaXRpb25UcnVlID0gKHNoaXBOYW1lQW5kU2l6ZSkgPT4ge1xyXG4gICAgICAgIGxldCBjb3VudCA9IDA7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHNoaXBOYW1lQW5kU2l6ZS5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgIGlmKHNoaXBOYW1lQW5kU2l6ZVtpXS5wb3NpdGlvbi5sZW5ndGgpe1xyXG4gICAgICAgICAgICAgICAgY291bnQrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoY291bnQgPT0gNSl7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBnYW1lQm9hcmRGaWVsZHMoZ2FtZUZpZWxkc0Fycik7XHJcblxyXG4gICAgaWYoaXNQb3NpdGlvblRydWUoc2hpcE5hbWVBbmRTaXplKSl7XHJcbiAgICAgICAgc3RhcnRHYW1lKCk7XHJcblxyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxufSwgZmFsc2UpO1xyXG5cclxuY29uc3Qgc3RhcnRHYW1lID0gKCkgPT4ge1xyXG4gICAgY29uc3Qgc2hpcHNDbGFzcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaGlwcycpO1xyXG4gICAgc2hpcHNDbGFzcy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNoaXBzQ2xhc3MpO1xyXG5cclxuICAgIGNvbnN0IGdhbWVib2FyZE1haW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29tcHV0ZXJHYW1lQm9hcmQnKTtcclxuICAgIGNvbnN0IHRlc3RHYW1lQm9hcmQgPSBbLi4uZ2FtZWJvYXJkTWFpbi5jaGlsZE5vZGVzXTtcclxuXHJcbiAgICB0ZXN0R2FtZUJvYXJkLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7ICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncGxheXMnKSl7XHJcbiAgICAgICAgICAgICAgICBsZXQgaXNMZW5naHRUb1plcm8gPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IE51bWJlcihTdHJpbmcoZS50YXJnZXQuZGF0YXNldC5yb3cpICsgU3RyaW5nKGUudGFyZ2V0LmRhdGFzZXQuY29sdW1uKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbaV0ucG9zaXRpb24ubGVuZ3RoOyBqKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzaGlwTmFtZUFuZFNpemVDb21wdXRlcltpXS5wb3NpdGlvbltqXSA9PSBpbmRleCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGlwTmFtZUFuZFNpemVDb21wdXRlcltpXS5wb3NpdGlvbi5zcGxpY2UoaiwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnZmllbGQnKTtcclxuICAgICAgICAgICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ3BsYXlzJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBvID0gMDsgbyA8IHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyLmxlbmd0aDsgbysrKXtcclxuICAgICAgICAgICAgICAgICAgICBpZihzaGlwTmFtZUFuZFNpemVDb21wdXRlcltvXS5wb3NpdGlvbi5sZW5ndGggPT0gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzTGVuZ2h0VG9aZXJvLnB1c2goJ3RydWUnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoaXNMZW5naHRUb1plcm8ubGVuZ3RoID09IDUpe1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbm5lclBhZ2UoJ3lvdSwgW3BsYXllcl0nKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29tcHV0ZXJSYW5kb21QbGF5cygpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhjb21wdXRlclBsYXlzUmFuZG9tLmxlbmd0aCk7XHJcblxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhzaGlwTmFtZUFuZFNpemUpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59XHJcblxyXG5jb25zdCBjb21wdXRlclJhbmRvbVBsYXlzID0gKCkgPT4ge1xyXG4gICAgZm9yKGxldCBmID0gMDsgZiA8IDEwMDA7IGYrKyl7XHJcbiAgICAgICAgY29uc3QgcmFuZG9tTnVtYmVyID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogOTkpO1xyXG5cclxuICAgICAgICBpZihjb21wdXRlclBsYXlzUmFuZG9tLmZpbmRJbmRleChpdGVtID0+IGl0ZW0gPT0gcmFuZG9tTnVtYmVyKSA+IC0xKXtcclxuICAgICAgICAgICAgbGV0IGluZGV4ID0gY29tcHV0ZXJQbGF5c1JhbmRvbS5maW5kSW5kZXgoaXRlbSA9PiBpdGVtID09IHJhbmRvbU51bWJlcik7XHJcbiAgICBcclxuICAgICAgICAgICAgaWYocmFuZG9tTnVtYmVyLnRvU3RyaW5nKCkuc3BsaXQoJycpLmxlbmd0aCA9PSAxKXtcclxuICAgICAgICAgICAgICAgIHJvdyA9IDA7XHJcbiAgICAgICAgICAgICAgICBjb2x1bW4gPSBOdW1iZXIocmFuZG9tTnVtYmVyLnRvU3RyaW5nKCkuc3BsaXQoJycpWzBdKTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICByb3cgPSBOdW1iZXIocmFuZG9tTnVtYmVyLnRvU3RyaW5nKCkuc3BsaXQoJycpWzBdKTtcclxuICAgICAgICAgICAgICAgIGNvbHVtbiA9IE51bWJlcihyYW5kb21OdW1iZXIudG9TdHJpbmcoKS5zcGxpdCgnJylbMV0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgcmVtb3ZlZEl0ZW0gPSBjb21wdXRlclBsYXlzUmFuZG9tLnNwbGljZShpbmRleCwgMSk7XHJcblxyXG4gICAgICAgICAgICBpZihyZW1vdmVkSXRlbSl7XHJcbiAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgc2hpcE5hbWVBbmRTaXplLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgc2hpcE5hbWVBbmRTaXplW2ldLnBvc2l0aW9uLmxlbmd0aDsgaisrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2hpcE5hbWVBbmRTaXplW2ldLnBvc2l0aW9uW2pdID09IHJlbW92ZWRJdGVtKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpc0xlbmdodFRvWmVybyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hpcE5hbWVBbmRTaXplW2ldLnBvc2l0aW9uLnNwbGljZShqLCAxKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBvID0gMDsgbyA8IHNoaXBOYW1lQW5kU2l6ZS5sZW5ndGg7IG8rKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2hpcE5hbWVBbmRTaXplW29dLnBvc2l0aW9uLmxlbmd0aCA9PSAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNMZW5naHRUb1plcm8ucHVzaCgndHJ1ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihpc0xlbmdodFRvWmVyby5sZW5ndGggPT0gNSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lubmVyUGFnZSgnY29tcHV0ZXInKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgcG9zaXRpb25MZW5ndGhBcnIgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IobGV0IGIgPSAwOyBiIDwgc2hpcE5hbWVBbmRTaXplLmxlbmd0aDsgYisrKXtcclxuICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGMgPSAwOyBjIDwgc2hpcE5hbWVBbmRTaXplW2JdLnBvc2l0aW9uLmxlbmd0aDsgYysrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25MZW5ndGhBcnIucHVzaChzaGlwTmFtZUFuZFNpemVbYl0ucG9zaXRpb25bY10pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnWW91IG5vdCBibG93JywgY29tcHV0ZXJQbGF5c1JhbmRvbS5sZW5ndGgsIHBvc2l0aW9uTGVuZ3RoQXJyLmxlbmd0aCk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCB3aW5uZXJQYWdlID0gKHdpbm5lcikgPT4ge1xyXG4gICAgY29uc3QgZ2FtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYW1lJyk7XHJcbiAgICBcclxuICAgIGNvbnN0IGZpeGVkV2lubmVyUGFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgZml4ZWRXaW5uZXJQYWdlLmNsYXNzTGlzdC5hZGQoJ2ZpeGVkV2lubmVyUGFnZScpO1xyXG4gICAgXHJcbiAgICBjb25zdCBoMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gxJyk7XHJcbiAgICBoMS50ZXh0Q29udGVudCA9IGBUaGUgd2lubmVyIGlzIFske3dpbm5lcn1dYDtcclxuXHJcbiAgICBmaXhlZFdpbm5lclBhZ2UuYXBwZW5kQ2hpbGQoaDEpO1xyXG5cclxuICAgIGdhbWUuYXBwZW5kQ2hpbGQoZml4ZWRXaW5uZXJQYWdlKTtcclxufSJdLCJuYW1lcyI6WyJnYW1lRmllbGRzQXJyIiwiZ2FtZUJvYXJkQ2xhc3MiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0ZXh0Q29udGVudCIsImkiLCJqIiwiZ2FtZUZpZWxkIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImRhdGFzZXQiLCJyb3ciLCJjb2x1bW4iLCJhcHBlbmRDaGlsZCIsInNoaXBOYW1lQW5kU2l6ZSIsInNoaXBzQ2xhc3MiLCJsZW5ndGgiLCJsYW5kIiwic2hpcCIsImlkIiwibmFtZSIsInN0eWxlIiwiZ3JpZFRlbXBsYXRlQ29sdW1ucyIsInNpemUiLCJ3aWR0aCIsImhlaWdodCIsImJhY2tncm91bmRDb2xvciIsImRyYWdnYWJsZSIsInNxdWFyZSIsImNvbXB1dGVyQXJyIiwiY29tcHV0ZXJHYW1lYm9hcmQiLCJhZGRDb3VudEluVGVuQXJyIiwiYXJyIiwiY291bnQiLCJuZXdBcnIiLCJwdXNoIiwicG9zaXRpb24iLCJzaGlwTmFtZUFuZFNpemVDb21wdXRlciIsImNvbXB1dGVyUGxheXNSYW5kb20iLCJhZGRIdW5kcmVkTnVtYmVycyIsInRydWVPckZhbHNlIiwiaXRlbSIsIm5vdFkiLCJjb3VudEFyciIsImIiLCJ4IiwiZXZlcnkiLCJvIiwiZmlsdGVyIiwiY29uc29sZSIsImxvZyIsInZhbHVlIiwibnVtIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwidG9TdHJpbmciLCJOdW1iZXIiLCJzcGxpdCIsImZpbmRJbmRleENvbXB1dGVyIiwiZmluZEluZGV4IiwicSIsImUiLCJjIiwiY29tcHV0ZXIiLCJjb3BweUNvbXB1dGVyQXJyIiwiZHJhZ2dlZCIsImNvdW50Q29tcHV0ZXJDb3BweSIsImgiLCJjb21wdXRlckFyclR3byIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0YXJnZXQiLCJvcGFjaXR5IiwiZmlyc3RDaGlsZCIsInByZXZlbnREZWZhdWx0IiwiY2xhc3NOYW1lIiwiYmFja2dyb3VuZCIsInNoaXBJc0dvb2RTaXplIiwicmVzdWx0UG9zaXRpb24iLCJzdHJpbmdUb0ludCIsIm5hbWVTaGlwIiwibGVuZ3RoU2hpcCIsImluZGV4T2JqIiwiZmlyc3RQb3NpdGlvbiIsImxhc3RTaGlwUG9zaXRpb24iLCJzaGlwQXJyUG9zaXRpb24iLCJuIiwiaW5jbHVkZXMiLCJpc1RydWUiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJrIiwicCIsImFkZFlJbkFyciIsImlzUG9zaXRpb25UcnVlIiwic3RhcnRHYW1lIiwiY2hpbGROb2RlcyIsImZvckVhY2giLCJjb250YWlucyIsImlzTGVuZ2h0VG9aZXJvIiwiaW5kZXgiLCJTdHJpbmciLCJzcGxpY2UiLCJyZW1vdmUiLCJ3aW5uZXJQYWdlIiwiY29tcHV0ZXJSYW5kb21QbGF5cyIsImYiLCJyYW5kb21OdW1iZXIiLCJyZW1vdmVkSXRlbSIsInBvc2l0aW9uTGVuZ3RoQXJyIiwid2lubmVyIiwiZ2FtZSIsImZpeGVkV2lubmVyUGFnZSIsImgxIl0sInNvdXJjZVJvb3QiOiIifQ==