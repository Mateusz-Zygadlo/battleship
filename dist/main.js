(()=>{"use strict";const e=e=>{const t=document.querySelector(".gameboard");t.textContent="";for(let a=0;a<10;a++)for(let l=0;l<10;l++)if("x"==e[a][l]){const e=document.createElement("div");e.classList.add("checked"),e.dataset.row=a,e.dataset.column=l,t.appendChild(e)}else if("y"==e[a][l]){const e=document.createElement("div");e.classList.add("blocked"),e.dataset.row=a,e.dataset.column=l,t.appendChild(e)}else{const e=document.createElement("div");e.classList.add("gameField"),e.dataset.row=a,e.dataset.column=l,t.appendChild(e)}},t=e=>{const t=document.querySelector(".ships");t.textContent="";for(let a=0;a<e.length;a++)if(1==e[a].land);else{const l=document.createElement("div");l.classList.add("ship"),l.dataset.id=e[a].id,l.classList.add(e[a].name),l.style.gridTemplateColumns=`repeat(${e[a].size}, 1fr)`,l.style.width=`calc(${e[a].id} * 50px)`,l.style.height="50px",l.style.backgroundColor="black",l.draggable=!0;for(let t=0;t<e[a].size;t++){const e=document.createElement("div");e.classList.add("square"),l.appendChild(e)}t.appendChild(l)}},a=[{name:"Destroyer",size:2,id:2,land:!1,position:[]},{name:"Submarine",size:3,id:3,land:!1,position:[]},{name:"Cruiser",size:3,id:3,land:!1,position:[]},{name:"Battleship",size:4,id:4,land:!1,position:[]},{name:"Carrier",size:5,id:5,land:!1,position:[]}];let l;const s=[];let o=0;for(let e=0;e<10;e++){const e=[];for(let t=0;t<10;t++)e.push(o),o++;s.push(e)}e(s),t(a),document.addEventListener("dragstart",(e=>{l=e.target,e.target.style.opacity=.3}),!1),document.addEventListener("dragend",(e=>{e.target.style.opacity="",e.target.dataset.row=e.target.firstChild.dataset.row,e.target.dataset.column=e.target.firstChild.dataset.column}),!1),document.addEventListener("dragover",(e=>{e.preventDefault()}),!1),document.addEventListener("dragenter",(e=>{"gameField"==e.target.className&&(e.target.style.background="yellow")}),!1),document.addEventListener("dragleave",(e=>{"gameField"==e.target.className&&(e.target.style.background="")}),!1),document.addEventListener("drop",(o=>{if(o.preventDefault(),"gameField"==o.target.className){o.target.style.background="",o.target.appendChild(l);let n=!1,d=o.target.dataset.row+o.target.dataset.column,r=Number(d);for(let e=0;e<d.split("").length;e++)0==d.split("")[0]&&(d=d.split("")[1]);const i=o.target.firstChild.className.split(" ")[1];let c,g;for(let e=0;e<a.length;e++)a[e].name==i&&(c=a[e].size,g=e);const p=r,m=r+c-1,u=[];for(let e=p;e<=m;e++)u.push(e);const f=(e,t,l,s)=>{for(let s=0;s<e.length;s++)if(e[s].includes(t))return!!e[s].includes(l)&&(!0,a[g].land=!0,true)};if(t(a),f(s,p,m,n)){o.target.style.background="",l.parentNode.removeChild(l),o.target.appendChild(l);for(let e=0;e<s.length;e++)for(let t=0;t<s[e].length;t++)if(s[e][t]==p)if(0==s[e][t]){for(let l=0;l<c;l++)a[g].position.push(s[e][t+l]),s[e][t+l]="x";s[e+1][t]="y";for(let a=0;a<c;a++)s[e+1][t+a]="y";s[e][t+c]="y",console.log(e)}else if(s[e][t]==s[0][t]){for(let l=0;l<c;l++)a[g].position.push(s[e][t+l]),s[e][t+l]="x";s[e+1][t]="y";for(let a=0;a<c;a++)s[e+1][t+a]="y";s[e][p-1]="y",s[e][m+1]="y"}else if(s[e][t]==s[9][t]&&0!=t){for(let l=0;l<c;l++)a[g].position.push(s[e][t+l]),s[e][t+l]="x";for(let a=0;a<c;a++)s[e-1][t+a]="y";console.log(!0,!1),s[e][c+t]="y",s[e][t-1]="y"}else if(s[e][t]==s[9][t]){for(let l=0;l<c;l++)a[g].position.push(s[e][t+l]),s[e][t+l]="x";for(let a=0;a<c;a++)s[e-1][t+a]="y";console.log(!0,!1),s[e][c]="y"}else{for(let l=0;l<c;l++)a[g].position.push(s[e][t+l]),s[e][t+l]="x";s[e+1][t]="y",s[e-1][t]="y",s[e][t-1]="y",s[e][t+c]="y";for(let a=0;a<c;a++)s[e+1][t+a]="y",s[e-1][t+a]="y";console.log(e,t)}l.parentNode.removeChild(l)}else l.parentNode.removeChild(l),o.target.style.background="",t(a),a[g].land=!1,e(s);t(a)}(e=>{let t=0;for(let a=0;a<e.length;a++)e[a].position.length&&t++;return 5==t})(a)&&console.log("start game"),e(s),console.log(s),console.log(a)}),!1)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoibUJBQUEsTUFpQ0EsRUFqQ3lCQSxJQUNyQixNQUFNQyxFQUFpQkMsU0FBU0MsY0FBYyxjQUU5Q0YsRUFBZUcsWUFBYyxHQUU3QixJQUFJLElBQUlDLEVBQUksRUFBR0EsRUFBSSxHQUFJQSxJQUNuQixJQUFJLElBQUlDLEVBQUksRUFBR0EsRUFBSSxHQUFJQSxJQUNuQixHQUEwQixLQUF2Qk4sRUFBY0ssR0FBR0MsR0FBVSxDQUMxQixNQUFNQyxFQUFZTCxTQUFTTSxjQUFjLE9BQ3pDRCxFQUFVRSxVQUFVQyxJQUFJLFdBQ3hCSCxFQUFVSSxRQUFRQyxJQUFNUCxFQUN4QkUsRUFBVUksUUFBUUUsT0FBU1AsRUFFM0JMLEVBQWVhLFlBQVlQLFFBQ3pCLEdBQTBCLEtBQXZCUCxFQUFjSyxHQUFHQyxHQUFVLENBQ2hDLE1BQU1DLEVBQVlMLFNBQVNNLGNBQWMsT0FDekNELEVBQVVFLFVBQVVDLElBQUksV0FDeEJILEVBQVVJLFFBQVFDLElBQU1QLEVBQ3hCRSxFQUFVSSxRQUFRRSxPQUFTUCxFQUUzQkwsRUFBZWEsWUFBWVAsT0FDMUIsQ0FDRCxNQUFNQSxFQUFZTCxTQUFTTSxjQUFjLE9BQ3pDRCxFQUFVRSxVQUFVQyxJQUFJLGFBQ3hCSCxFQUFVSSxRQUFRQyxJQUFNUCxFQUN4QkUsRUFBVUksUUFBUUUsT0FBU1AsRUFFM0JMLEVBQWVhLFlBQVlQLEtDSzNDLEVBaENvQlEsSUFDaEIsTUFBTUMsRUFBYWQsU0FBU0MsY0FBYyxVQUUxQ2EsRUFBV1osWUFBYyxHQUV6QixJQUFJLElBQUlDLEVBQUksRUFBR0EsRUFBSVUsRUFBZ0JFLE9BQVFaLElBQ3ZDLEdBQThCLEdBQTNCVSxFQUFnQlYsR0FBR2EsVUFFakIsQ0FDRCxNQUFNQyxFQUFPakIsU0FBU00sY0FBYyxPQUNwQ1csRUFBS1YsVUFBVUMsSUFBSSxRQUNuQlMsRUFBS1IsUUFBUVMsR0FBS0wsRUFBZ0JWLEdBQUdlLEdBQ3JDRCxFQUFLVixVQUFVQyxJQUFJSyxFQUFnQlYsR0FBR2dCLE1BQ3RDRixFQUFLRyxNQUFNQyxvQkFBc0IsVUFBVVIsRUFBZ0JWLEdBQUdtQixhQUM5REwsRUFBS0csTUFBTUcsTUFBUSxRQUFRVixFQUFnQlYsR0FBR2UsYUFDOUNELEVBQUtHLE1BQU1JLE9BQVMsT0FDcEJQLEVBQUtHLE1BQU1LLGdCQUFrQixRQUM3QlIsRUFBS1MsV0FBWSxFQUdqQixJQUFJLElBQUl0QixFQUFJLEVBQUdBLEVBQUlTLEVBQWdCVixHQUFHbUIsS0FBTWxCLElBQUksQ0FDNUMsTUFBTXVCLEVBQVMzQixTQUFTTSxjQUFjLE9BQ3RDcUIsRUFBT3BCLFVBQVVDLElBQUksVUFFckJTLEVBQUtMLFlBQVllLEdBR3JCYixFQUFXRixZQUFZSyxLQ3ZCN0JKLEVBQWtCLENBQ3BCLENBQUNNLEtBQU0sWUFBYUcsS0FBTSxFQUFHSixHQUFJLEVBQUdGLE1BQU0sRUFBT1ksU0FBVSxJQUMzRCxDQUFDVCxLQUFNLFlBQWFHLEtBQU0sRUFBR0osR0FBSSxFQUFHRixNQUFNLEVBQU9ZLFNBQVUsSUFDM0QsQ0FBQ1QsS0FBTSxVQUFXRyxLQUFNLEVBQUdKLEdBQUksRUFBR0YsTUFBTSxFQUFPWSxTQUFVLElBQ3pELENBQUNULEtBQU0sYUFBY0csS0FBTSxFQUFHSixHQUFJLEVBQUdGLE1BQU0sRUFBT1ksU0FBVSxJQUM1RCxDQUFDVCxLQUFNLFVBQVdHLEtBQU0sRUFBR0osR0FBSSxFQUFHRixNQUFNLEVBQU9ZLFNBQVUsS0E2QjdELElBQUlDLEVBRUosTUFBTS9CLEVBQWdCLEdBQ3RCLElBQUlnQyxFQUFRLEVBRVosSUFBSSxJQUFJM0IsRUFBSSxFQUFHQSxFQUFJLEdBQUlBLElBQUksQ0FDdkIsTUFBTTRCLEVBQVMsR0FFZixJQUFJLElBQUkzQixFQUFJLEVBQUdBLEVBQUksR0FBSUEsSUFDbkIyQixFQUFPQyxLQUFLRixHQUNaQSxJQUVKaEMsRUFBY2tDLEtBQUtELEdBR3ZCLEVBQWdCakMsR0FDaEIsRUFBV2UsR0FFWGIsU0FBU2lDLGlCQUFpQixhQUFjQyxJQUNwQ0wsRUFBVUssRUFBRUMsT0FFWkQsRUFBRUMsT0FBT2YsTUFBTWdCLFFBQVUsTUFFMUIsR0FFSHBDLFNBQVNpQyxpQkFBaUIsV0FBWUMsSUFDbENBLEVBQUVDLE9BQU9mLE1BQU1nQixRQUFVLEdBQ3pCRixFQUFFQyxPQUFPMUIsUUFBUUMsSUFBTXdCLEVBQUVDLE9BQU9FLFdBQVc1QixRQUFRQyxJQUNuRHdCLEVBQUVDLE9BQU8xQixRQUFRRSxPQUFTdUIsRUFBRUMsT0FBT0UsV0FBVzVCLFFBQVFFLFVBQ3ZELEdBRUhYLFNBQVNpQyxpQkFBaUIsWUFBYUMsSUFDbkNBLEVBQUVJLG9CQUNILEdBRUh0QyxTQUFTaUMsaUJBQWlCLGFBQWNDLElBQ1gsYUFBdEJBLEVBQUVDLE9BQU9JLFlBQ1JMLEVBQUVDLE9BQU9mLE1BQU1vQixXQUFhLGFBRWpDLEdBRUh4QyxTQUFTaUMsaUJBQWlCLGFBQWNDLElBRVYsYUFBdEJBLEVBQUVDLE9BQU9JLFlBQ1RMLEVBQUVDLE9BQU9mLE1BQU1vQixXQUFhLE9BRWpDLEdBRUh4QyxTQUFTaUMsaUJBQWlCLFFBQVNDLElBRy9CLEdBRkFBLEVBQUVJLGlCQUV1QixhQUF0QkosRUFBRUMsT0FBT0ksVUFBeUIsQ0FDakNMLEVBQUVDLE9BQU9mLE1BQU1vQixXQUFhLEdBQzVCTixFQUFFQyxPQUFPdkIsWUFBWWlCLEdBRXJCLElBQUlZLEdBQWlCLEVBRWpCQyxFQUFpQlIsRUFBRUMsT0FBTzFCLFFBQVFDLElBQU13QixFQUFFQyxPQUFPMUIsUUFBUUUsT0FFekRnQyxFQUFjQyxPQUFPRixHQUV6QixJQUFJLElBQUl2QyxFQUFJLEVBQUdBLEVBQUl1QyxFQUFlRyxNQUFNLElBQUk5QixPQUFRWixJQUNkLEdBQS9CdUMsRUFBZUcsTUFBTSxJQUFJLEtBQ3hCSCxFQUFpQkEsRUFBZUcsTUFBTSxJQUFJLElBSWxELE1BQU1DLEVBQVdaLEVBQUVDLE9BQU9FLFdBQVdFLFVBQVVNLE1BQU0sS0FBSyxHQUMxRCxJQUFJRSxFQUVBQyxFQUVKLElBQUksSUFBSTVDLEVBQUksRUFBR0EsRUFBSVMsRUFBZ0JFLE9BQVFYLElBQ3BDUyxFQUFnQlQsR0FBR2UsTUFBUTJCLElBQzFCQyxFQUFhbEMsRUFBZ0JULEdBQUdrQixLQUNoQzBCLEVBQVc1QyxHQUduQixNQUFNNkMsRUFBZ0JOLEVBQ2hCTyxFQUFtQlAsRUFBY0ksRUFBYSxFQUM5Q0ksRUFBa0IsR0FFeEIsSUFBSSxJQUFJQyxFQUFJSCxFQUFlRyxHQUFLRixFQUFrQkUsSUFDOUNELEVBQWdCbkIsS0FBS29CLEdBR3pCLE1BQU1DLEVBQVMsQ0FBQ3ZELEVBQWVtRCxFQUFlQyxFQUFrQlQsS0FDNUQsSUFBSSxJQUFJYSxFQUFJLEVBQUdBLEVBQUl4RCxFQUFjaUIsT0FBUXVDLElBQ3JDLEdBQUd4RCxFQUFjd0QsR0FBR0MsU0FBU04sR0FDekIsUUFBR25ELEVBQWN3RCxHQUFHQyxTQUFTTCxNQUNSLEVBQ2pCckMsRUFBZ0JtQyxHQUFVaEMsTUFBTyxFQURoQixPQWFqQyxHQUZBLEVBQVdILEdBRVB3QyxFQUFPdkQsRUFBZW1ELEVBQWVDLEVBQWtCVCxHQU90RCxDQUNEUCxFQUFFQyxPQUFPZixNQUFNb0IsV0FBYSxHQUM1QlgsRUFBUTJCLFdBQVdDLFlBQVk1QixHQUMvQkssRUFBRUMsT0FBT3ZCLFlBQVlpQixHQUVyQixJQUFJLElBQUkxQixFQUFJLEVBQUdBLEVBQUlMLEVBQWNpQixPQUFRWixJQUNyQyxJQUFJLElBQUlDLEVBQUksRUFBR0EsRUFBSU4sRUFBY0ssR0FBR1ksT0FBUVgsSUFDeEMsR0FBR04sRUFBY0ssR0FBR0MsSUFBTTZDLEVBQ3RCLEdBQTBCLEdBQXZCbkQsRUFBY0ssR0FBR0MsR0FBUSxDQUN4QixJQUFJLElBQUlzRCxFQUFJLEVBQUdBLEVBQUlYLEVBQVlXLElBQzNCN0MsRUFBZ0JtQyxHQUFVcEIsU0FBU0ksS0FBS2xDLEVBQWNLLEdBQUdDLEVBQUlzRCxJQUM3RDVELEVBQWNLLEdBQUdDLEVBQUlzRCxHQUFLLElBRTlCNUQsRUFBY0ssRUFBSSxHQUFHQyxHQUFLLElBQzFCLElBQUksSUFBSXVELEVBQUksRUFBR0EsRUFBSVosRUFBWVksSUFDM0I3RCxFQUFjSyxFQUFJLEdBQUdDLEVBQUl1RCxHQUFLLElBRWxDN0QsRUFBY0ssR0FBR0MsRUFBSTJDLEdBQWMsSUFFbkNhLFFBQVFDLElBQUkxRCxRQUNWLEdBQUdMLEVBQWNLLEdBQUdDLElBQU1OLEVBQWMsR0FBR00sR0FBRyxDQUNoRCxJQUFJLElBQUlzRCxFQUFJLEVBQUdBLEVBQUlYLEVBQVlXLElBQzNCN0MsRUFBZ0JtQyxHQUFVcEIsU0FBU0ksS0FBS2xDLEVBQWNLLEdBQUdDLEVBQUlzRCxJQUM3RDVELEVBQWNLLEdBQUdDLEVBQUlzRCxHQUFLLElBRTlCNUQsRUFBY0ssRUFBSSxHQUFHQyxHQUFLLElBQzFCLElBQUksSUFBSXVELEVBQUksRUFBR0EsRUFBSVosRUFBWVksSUFDM0I3RCxFQUFjSyxFQUFJLEdBQUdDLEVBQUl1RCxHQUFLLElBRWxDN0QsRUFBY0ssR0FBRzhDLEVBQWdCLEdBQUssSUFDdENuRCxFQUFjSyxHQUFHK0MsRUFBbUIsR0FBSyxTQUN2QyxHQUFHcEQsRUFBY0ssR0FBR0MsSUFBTU4sRUFBYyxHQUFHTSxJQUFXLEdBQUxBLEVBQU8sQ0FDMUQsSUFBSSxJQUFJc0QsRUFBSSxFQUFHQSxFQUFJWCxFQUFZVyxJQUMzQjdDLEVBQWdCbUMsR0FBVXBCLFNBQVNJLEtBQUtsQyxFQUFjSyxHQUFHQyxFQUFJc0QsSUFDN0Q1RCxFQUFjSyxHQUFHQyxFQUFJc0QsR0FBSyxJQUU5QixJQUFJLElBQUlDLEVBQUksRUFBR0EsRUFBSVosRUFBWVksSUFDM0I3RCxFQUFjSyxFQUFJLEdBQUdDLEVBQUl1RCxHQUFLLElBRWxDQyxRQUFRQyxLQUFJLEdBQU0sR0FDbEIvRCxFQUFjSyxHQUFHNEMsRUFBYTNDLEdBQUssSUFDbkNOLEVBQWNLLEdBQUdDLEVBQUksR0FBSyxTQUN4QixHQUFHTixFQUFjSyxHQUFHQyxJQUFNTixFQUFjLEdBQUdNLEdBQUcsQ0FDaEQsSUFBSSxJQUFJc0QsRUFBSSxFQUFHQSxFQUFJWCxFQUFZVyxJQUMzQjdDLEVBQWdCbUMsR0FBVXBCLFNBQVNJLEtBQUtsQyxFQUFjSyxHQUFHQyxFQUFJc0QsSUFDN0Q1RCxFQUFjSyxHQUFHQyxFQUFJc0QsR0FBSyxJQUU5QixJQUFJLElBQUlDLEVBQUksRUFBR0EsRUFBSVosRUFBWVksSUFDM0I3RCxFQUFjSyxFQUFJLEdBQUdDLEVBQUl1RCxHQUFLLElBRWxDQyxRQUFRQyxLQUFJLEdBQU0sR0FDbEIvRCxFQUFjSyxHQUFHNEMsR0FBYyxRQUM5QixDQUNELElBQUksSUFBSVcsRUFBSSxFQUFHQSxFQUFJWCxFQUFZVyxJQUMzQjdDLEVBQWdCbUMsR0FBVXBCLFNBQVNJLEtBQUtsQyxFQUFjSyxHQUFHQyxFQUFJc0QsSUFDN0Q1RCxFQUFjSyxHQUFHQyxFQUFJc0QsR0FBSyxJQUU5QjVELEVBQWNLLEVBQUksR0FBR0MsR0FBSyxJQUMxQk4sRUFBY0ssRUFBSSxHQUFHQyxHQUFLLElBQzFCTixFQUFjSyxHQUFHQyxFQUFJLEdBQUssSUFDMUJOLEVBQWNLLEdBQUdDLEVBQUkyQyxHQUFjLElBQ25DLElBQUksSUFBSVksRUFBSSxFQUFHQSxFQUFJWixFQUFZWSxJQUMzQjdELEVBQWNLLEVBQUksR0FBR0MsRUFBSXVELEdBQUssSUFDOUI3RCxFQUFjSyxFQUFJLEdBQUdDLEVBQUl1RCxHQUFLLElBRWxDQyxRQUFRQyxJQUFJMUQsRUFBR0MsR0FLL0J5QixFQUFRMkIsV0FBV0MsWUFBWTVCLFFBNUUvQkEsRUFBUTJCLFdBQVdDLFlBQVk1QixHQUMvQkssRUFBRUMsT0FBT2YsTUFBTW9CLFdBQWEsR0FDNUIsRUFBVzNCLEdBQ1hBLEVBQWdCbUMsR0FBVWhDLE1BQU8sRUFFakMsRUFBZ0JsQixHQXlFcEIsRUFBV2UsR0FHUSxDQUFDQSxJQUNwQixJQUFJaUIsRUFBUSxFQUNaLElBQUksSUFBSTNCLEVBQUksRUFBR0EsRUFBSVUsRUFBZ0JFLE9BQVFaLElBQ3BDVSxFQUFnQlYsR0FBR3lCLFNBQVNiLFFBQzNCZSxJQUlSLE9BQVksR0FBVEEsR0FPSmdDLENBQWVqRCxJQUNkK0MsUUFBUUMsSUFBSSxjQUdoQixFQUFnQi9ELEdBRWhCOEQsUUFBUUMsSUFBSS9ELEdBQ1o4RCxRQUFRQyxJQUFJaEQsTUFDYixJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9jb21wb25lbnRzL2dhbWVCb2FyZEZpZWxkcy5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2NvbXBvbmVudHMvY3JlYXRlU2hpcC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGdhbWVCb2FyZEZpZWxkcyA9IChnYW1lRmllbGRzQXJyKSA9PiB7XHJcbiAgICBjb25zdCBnYW1lQm9hcmRDbGFzcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYW1lYm9hcmQnKTtcclxuXHJcbiAgICBnYW1lQm9hcmRDbGFzcy50ZXh0Q29udGVudCA9ICcnO1xyXG5cclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKXtcclxuICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgMTA7IGorKyl7XHJcbiAgICAgICAgICAgIGlmKGdhbWVGaWVsZHNBcnJbaV1bal0gPT0gJ3gnKXtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGdhbWVGaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmNsYXNzTGlzdC5hZGQoJ2NoZWNrZWQnKTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5kYXRhc2V0LnJvdyA9IGk7XHJcbiAgICAgICAgICAgICAgICBnYW1lRmllbGQuZGF0YXNldC5jb2x1bW4gPSBqO1xyXG5cclxuICAgICAgICAgICAgICAgIGdhbWVCb2FyZENsYXNzLmFwcGVuZENoaWxkKGdhbWVGaWVsZCk7XHJcbiAgICAgICAgICAgIH1lbHNlIGlmKGdhbWVGaWVsZHNBcnJbaV1bal0gPT0gJ3knKXtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGdhbWVGaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmNsYXNzTGlzdC5hZGQoJ2Jsb2NrZWQnKTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5kYXRhc2V0LnJvdyA9IGk7XHJcbiAgICAgICAgICAgICAgICBnYW1lRmllbGQuZGF0YXNldC5jb2x1bW4gPSBqO1xyXG5cclxuICAgICAgICAgICAgICAgIGdhbWVCb2FyZENsYXNzLmFwcGVuZENoaWxkKGdhbWVGaWVsZCk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZ2FtZUZpZWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBnYW1lRmllbGQuY2xhc3NMaXN0LmFkZCgnZ2FtZUZpZWxkJyk7XHJcbiAgICAgICAgICAgICAgICBnYW1lRmllbGQuZGF0YXNldC5yb3cgPSBpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmRhdGFzZXQuY29sdW1uID0gajtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgZ2FtZUJvYXJkQ2xhc3MuYXBwZW5kQ2hpbGQoZ2FtZUZpZWxkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgZ2FtZUJvYXJkRmllbGRzOyIsImNvbnN0IGNyZWF0ZVNoaXAgPSAoc2hpcE5hbWVBbmRTaXplKSA9PiB7XHJcbiAgICBjb25zdCBzaGlwc0NsYXNzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNoaXBzJyk7XHJcblxyXG4gICAgc2hpcHNDbGFzcy50ZXh0Q29udGVudCA9ICcnO1xyXG5cclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBzaGlwTmFtZUFuZFNpemUubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgIGlmKHNoaXBOYW1lQW5kU2l6ZVtpXS5sYW5kID09IHRydWUpe1xyXG5cclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgY29uc3Qgc2hpcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBzaGlwLmNsYXNzTGlzdC5hZGQoJ3NoaXAnKTtcclxuICAgICAgICAgICAgc2hpcC5kYXRhc2V0LmlkID0gc2hpcE5hbWVBbmRTaXplW2ldLmlkO1xyXG4gICAgICAgICAgICBzaGlwLmNsYXNzTGlzdC5hZGQoc2hpcE5hbWVBbmRTaXplW2ldLm5hbWUpO1xyXG4gICAgICAgICAgICBzaGlwLnN0eWxlLmdyaWRUZW1wbGF0ZUNvbHVtbnMgPSBgcmVwZWF0KCR7c2hpcE5hbWVBbmRTaXplW2ldLnNpemV9LCAxZnIpYDtcclxuICAgICAgICAgICAgc2hpcC5zdHlsZS53aWR0aCA9IGBjYWxjKCR7c2hpcE5hbWVBbmRTaXplW2ldLmlkfSAqIDUwcHgpYDtcclxuICAgICAgICAgICAgc2hpcC5zdHlsZS5oZWlnaHQgPSAnNTBweCc7XHJcbiAgICAgICAgICAgIHNoaXAuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ2JsYWNrJzsgXHJcbiAgICAgICAgICAgIHNoaXAuZHJhZ2dhYmxlID0gdHJ1ZTtcclxuXHJcblxyXG4gICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgc2hpcE5hbWVBbmRTaXplW2ldLnNpemU7IGorKyl7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzcXVhcmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIHNxdWFyZS5jbGFzc0xpc3QuYWRkKCdzcXVhcmUnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzaGlwLmFwcGVuZENoaWxkKHNxdWFyZSk7XHJcbiAgICAgICAgICAgIH0gICBcclxuXHJcbiAgICAgICAgICAgIHNoaXBzQ2xhc3MuYXBwZW5kQ2hpbGQoc2hpcCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVTaGlwOyIsImltcG9ydCBnYW1lQm9hcmRGaWVsZHMgZnJvbSBcIi4vY29tcG9uZW50cy9nYW1lQm9hcmRGaWVsZHNcIjtcclxuaW1wb3J0IGNyZWF0ZVNoaXAgZnJvbSBcIi4vY29tcG9uZW50cy9jcmVhdGVTaGlwXCI7XHJcblxyXG5cclxuY29uc3Qgc2hpcE5hbWVBbmRTaXplID0gW1xyXG4gICAge25hbWU6ICdEZXN0cm95ZXInLCBzaXplOiAyLCBpZDogMiwgbGFuZDogZmFsc2UsIHBvc2l0aW9uOiBbXX0sXHJcbiAgICB7bmFtZTogJ1N1Ym1hcmluZScsIHNpemU6IDMsIGlkOiAzLCBsYW5kOiBmYWxzZSwgcG9zaXRpb246IFtdfSxcclxuICAgIHtuYW1lOiAnQ3J1aXNlcicsIHNpemU6IDMsIGlkOiAzLCBsYW5kOiBmYWxzZSwgcG9zaXRpb246IFtdfSxcclxuICAgIHtuYW1lOiAnQmF0dGxlc2hpcCcsIHNpemU6IDQsIGlkOiA0LCBsYW5kOiBmYWxzZSwgcG9zaXRpb246IFtdfSxcclxuICAgIHtuYW1lOiAnQ2FycmllcicsIHNpemU6IDUsIGlkOiA1LCBsYW5kOiBmYWxzZSwgcG9zaXRpb246IFtdfSxcclxuXVxyXG5cclxuY29uc3Qgc2hpcCA9IChib2R5TGVuZ3RoLCB3aGVyZUhpdHMsIHN1bmspID0+IHtcclxuICAgIFxyXG4gICAgcmV0dXJue1xyXG4gICAgICAgIGJvZHlMZW5ndGgsXHJcbiAgICAgICAgd2hlcmVIaXRzLFxyXG4gICAgICAgIHN1bmssXHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IGhpdCA9IChoaXRQb3NpdGlvbikgPT4ge1xyXG4gICAgXHJcbiAgICByZXR1cm57XHJcbiAgICAgICAgaGl0UG9zaXRpb24sXHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IGlzU3VuayA9IChib2R5TGVuZ3RoKSA9PiB7XHJcbiAgICBjb25zdCBoaXRzID0gYm9keUxlbmd0aCAtIHNoaXAoKS5zdW5rO1xyXG5cclxuICAgIGlmKGhpdHMgPT0gMCl7XHJcbiAgICAgICAgcmV0dXJuICdzaGlwIGlzIHN1bmsnO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBoaXRzO1xyXG59XHJcblxyXG5sZXQgZHJhZ2dlZDtcclxuXHJcbmNvbnN0IGdhbWVGaWVsZHNBcnIgPSBbXTtcclxubGV0IGNvdW50ID0gMDtcclxuXHJcbmZvcihsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKXtcclxuICAgIGNvbnN0IG5ld0FyciA9IFtdO1xyXG5cclxuICAgIGZvcihsZXQgaiA9IDA7IGogPCAxMDsgaisrKXtcclxuICAgICAgICBuZXdBcnIucHVzaChjb3VudCk7XHJcbiAgICAgICAgY291bnQrKztcclxuICAgIH1cclxuICAgIGdhbWVGaWVsZHNBcnIucHVzaChuZXdBcnIpO1xyXG59XHJcblxyXG5nYW1lQm9hcmRGaWVsZHMoZ2FtZUZpZWxkc0Fycik7XHJcbmNyZWF0ZVNoaXAoc2hpcE5hbWVBbmRTaXplKTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnc3RhcnRcIiwgKGUpID0+IHtcclxuICAgIGRyYWdnZWQgPSBlLnRhcmdldDtcclxuXHJcbiAgICBlLnRhcmdldC5zdHlsZS5vcGFjaXR5ID0gLjM7XHJcblxyXG59LCBmYWxzZSk7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ2VuZFwiLCAoZSkgPT4ge1xyXG4gICAgZS50YXJnZXQuc3R5bGUub3BhY2l0eSA9IFwiXCI7XHJcbiAgICBlLnRhcmdldC5kYXRhc2V0LnJvdyA9IGUudGFyZ2V0LmZpcnN0Q2hpbGQuZGF0YXNldC5yb3c7XHJcbiAgICBlLnRhcmdldC5kYXRhc2V0LmNvbHVtbiA9IGUudGFyZ2V0LmZpcnN0Q2hpbGQuZGF0YXNldC5jb2x1bW47XHJcbn0sIGZhbHNlKTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnb3ZlclwiLCAoZSkgPT4ge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG59LCBmYWxzZSk7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ2VudGVyXCIsIChlKSA9PiB7XHJcbiAgICBpZihlLnRhcmdldC5jbGFzc05hbWUgPT0gXCJnYW1lRmllbGRcIil7XHJcbiAgICAgICAgZS50YXJnZXQuc3R5bGUuYmFja2dyb3VuZCA9IFwieWVsbG93XCI7XHJcbiAgICB9XHJcbn0sIGZhbHNlKTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnbGVhdmVcIiwgKGUpID0+IHtcclxuXHJcbiAgICBpZiAoZS50YXJnZXQuY2xhc3NOYW1lID09IFwiZ2FtZUZpZWxkXCIpe1xyXG4gICAgICAgIGUudGFyZ2V0LnN0eWxlLmJhY2tncm91bmQgPSBcIlwiO1xyXG4gICAgfVxyXG59LCBmYWxzZSk7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZHJvcFwiLCAoZSkgPT4ge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgIGlmKGUudGFyZ2V0LmNsYXNzTmFtZSA9PSAnZ2FtZUZpZWxkJyl7XHJcbiAgICAgICAgZS50YXJnZXQuc3R5bGUuYmFja2dyb3VuZCA9IFwiXCI7XHJcbiAgICAgICAgZS50YXJnZXQuYXBwZW5kQ2hpbGQoZHJhZ2dlZCk7XHJcblxyXG4gICAgICAgIGxldCBzaGlwSXNHb29kU2l6ZSA9IGZhbHNlO1xyXG4gXHJcbiAgICAgICAgbGV0IHJlc3VsdFBvc2l0aW9uID0gZS50YXJnZXQuZGF0YXNldC5yb3cgKyBlLnRhcmdldC5kYXRhc2V0LmNvbHVtbjtcclxuXHJcbiAgICAgICAgbGV0IHN0cmluZ1RvSW50ID0gTnVtYmVyKHJlc3VsdFBvc2l0aW9uKTtcclxuICAgIFxyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCByZXN1bHRQb3NpdGlvbi5zcGxpdCgnJykubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICBpZihyZXN1bHRQb3NpdGlvbi5zcGxpdCgnJylbMF0gPT0gMCl7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRQb3NpdGlvbiA9IHJlc3VsdFBvc2l0aW9uLnNwbGl0KCcnKVsxXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gICBcclxuXHJcbiAgICAgICAgY29uc3QgbmFtZVNoaXAgPSBlLnRhcmdldC5maXJzdENoaWxkLmNsYXNzTmFtZS5zcGxpdCgnICcpWzFdO1xyXG4gICAgICAgIGxldCBsZW5ndGhTaGlwO1xyXG5cclxuICAgICAgICBsZXQgaW5kZXhPYmo7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IHNoaXBOYW1lQW5kU2l6ZS5sZW5ndGg7IGorKyl7XHJcbiAgICAgICAgICAgIGlmKHNoaXBOYW1lQW5kU2l6ZVtqXS5uYW1lID09IG5hbWVTaGlwKXtcclxuICAgICAgICAgICAgICAgIGxlbmd0aFNoaXAgPSBzaGlwTmFtZUFuZFNpemVbal0uc2l6ZTtcclxuICAgICAgICAgICAgICAgIGluZGV4T2JqID0galxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGZpcnN0UG9zaXRpb24gPSBzdHJpbmdUb0ludDtcclxuICAgICAgICBjb25zdCBsYXN0U2hpcFBvc2l0aW9uID0gc3RyaW5nVG9JbnQgKyBsZW5ndGhTaGlwIC0gMTtcclxuICAgICAgICBjb25zdCBzaGlwQXJyUG9zaXRpb24gPSBbXTtcclxuXHJcbiAgICAgICAgZm9yKGxldCB4ID0gZmlyc3RQb3NpdGlvbjsgeCA8PSBsYXN0U2hpcFBvc2l0aW9uOyB4Kyspe1xyXG4gICAgICAgICAgICBzaGlwQXJyUG9zaXRpb24ucHVzaCh4KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGlzVHJ1ZSA9IChnYW1lRmllbGRzQXJyLCBmaXJzdFBvc2l0aW9uLCBsYXN0U2hpcFBvc2l0aW9uLCBzaGlwSXNHb29kU2l6ZSkgPT4ge1xyXG4gICAgICAgICAgICBmb3IobGV0IG4gPSAwOyBuIDwgZ2FtZUZpZWxkc0Fyci5sZW5ndGg7IG4rKyl7XHJcbiAgICAgICAgICAgICAgICBpZihnYW1lRmllbGRzQXJyW25dLmluY2x1ZGVzKGZpcnN0UG9zaXRpb24pKXtcclxuICAgICAgICAgICAgICAgICAgICBpZihnYW1lRmllbGRzQXJyW25dLmluY2x1ZGVzKGxhc3RTaGlwUG9zaXRpb24pKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hpcElzR29vZFNpemUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGlwTmFtZUFuZFNpemVbaW5kZXhPYmpdLmxhbmQgPSB0cnVlO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzaGlwSXNHb29kU2l6ZTtcclxuICAgICAgICAgICAgICAgICAgICB9OyBcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzaGlwSXNHb29kU2l6ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjcmVhdGVTaGlwKHNoaXBOYW1lQW5kU2l6ZSk7XHJcblxyXG4gICAgICAgIGlmKCFpc1RydWUoZ2FtZUZpZWxkc0FyciwgZmlyc3RQb3NpdGlvbiwgbGFzdFNoaXBQb3NpdGlvbiwgc2hpcElzR29vZFNpemUpKXtcclxuICAgICAgICAgICAgZHJhZ2dlZC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGRyYWdnZWQpO1xyXG4gICAgICAgICAgICBlLnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kID0gXCJcIjtcclxuICAgICAgICAgICAgY3JlYXRlU2hpcChzaGlwTmFtZUFuZFNpemUpO1xyXG4gICAgICAgICAgICBzaGlwTmFtZUFuZFNpemVbaW5kZXhPYmpdLmxhbmQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGdhbWVCb2FyZEZpZWxkcyhnYW1lRmllbGRzQXJyKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgZS50YXJnZXQuc3R5bGUuYmFja2dyb3VuZCA9IFwiXCI7XHJcbiAgICAgICAgICAgIGRyYWdnZWQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkcmFnZ2VkKTtcclxuICAgICAgICAgICAgZS50YXJnZXQuYXBwZW5kQ2hpbGQoZHJhZ2dlZCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgZ2FtZUZpZWxkc0Fyci5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgZ2FtZUZpZWxkc0FycltpXS5sZW5ndGg7IGorKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZ2FtZUZpZWxkc0FycltpXVtqXSA9PSBmaXJzdFBvc2l0aW9uKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoZ2FtZUZpZWxkc0FycltpXVtqXSA9PSAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgayA9IDA7IGsgPCBsZW5ndGhTaGlwOyBrKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoaXBOYW1lQW5kU2l6ZVtpbmRleE9ial0ucG9zaXRpb24ucHVzaChnYW1lRmllbGRzQXJyW2ldW2ogKyBrXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtqICsga10gPSAneCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2kgKyAxXVtqXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgcCA9IDA7IHAgPCBsZW5ndGhTaGlwOyBwKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaSArIDFdW2ogKyBwXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaV1baiArIGxlbmd0aFNoaXBdID0gJ3knO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihnYW1lRmllbGRzQXJyW2ldW2pdID09IGdhbWVGaWVsZHNBcnJbMF1bal0pe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBrID0gMDsgayA8IGxlbmd0aFNoaXA7IGsrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hpcE5hbWVBbmRTaXplW2luZGV4T2JqXS5wb3NpdGlvbi5wdXNoKGdhbWVGaWVsZHNBcnJbaV1baiArIGtdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2ldW2ogKyBrXSA9ICd4JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaSArIDFdW2pdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBwID0gMDsgcCA8IGxlbmd0aFNoaXA7IHArKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpICsgMV1baiArIHBdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtmaXJzdFBvc2l0aW9uIC0gMV0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2ldW2xhc3RTaGlwUG9zaXRpb24gKyAxXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoZ2FtZUZpZWxkc0FycltpXVtqXSA9PSBnYW1lRmllbGRzQXJyWzldW2pdICYmIGogIT0gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGsgPSAwOyBrIDwgbGVuZ3RoU2hpcDsgaysrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGlwTmFtZUFuZFNpemVbaW5kZXhPYmpdLnBvc2l0aW9uLnB1c2goZ2FtZUZpZWxkc0FycltpXVtqICsga10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaV1baiArIGtdID0gJ3gnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBwID0gMDsgcCA8IGxlbmd0aFNoaXA7IHArKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpIC0gMV1baiArIHBdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codHJ1ZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtsZW5ndGhTaGlwICsgal0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2ldW2ogLSAxXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoZ2FtZUZpZWxkc0FycltpXVtqXSA9PSBnYW1lRmllbGRzQXJyWzldW2pdKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgayA9IDA7IGsgPCBsZW5ndGhTaGlwOyBrKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoaXBOYW1lQW5kU2l6ZVtpbmRleE9ial0ucG9zaXRpb24ucHVzaChnYW1lRmllbGRzQXJyW2ldW2ogKyBrXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtqICsga10gPSAneCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IHAgPSAwOyBwIDwgbGVuZ3RoU2hpcDsgcCsrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2kgLSAxXVtqICsgcF0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0cnVlLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2ldW2xlbmd0aFNoaXBdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgayA9IDA7IGsgPCBsZW5ndGhTaGlwOyBrKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoaXBOYW1lQW5kU2l6ZVtpbmRleE9ial0ucG9zaXRpb24ucHVzaChnYW1lRmllbGRzQXJyW2ldW2ogKyBrXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtqICsga10gPSAneCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2kgKyAxXVtqXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaSAtIDFdW2pdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtqIC0gMV0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2ldW2ogKyBsZW5ndGhTaGlwXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgcCA9IDA7IHAgPCBsZW5ndGhTaGlwOyBwKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaSArIDFdW2ogKyBwXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2kgLSAxXVtqICsgcF0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhpLCBqKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkcmFnZ2VkLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZHJhZ2dlZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNyZWF0ZVNoaXAoc2hpcE5hbWVBbmRTaXplKTsgIFxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGlzUG9zaXRpb25UcnVlID0gKHNoaXBOYW1lQW5kU2l6ZSkgPT4ge1xyXG4gICAgICAgIGxldCBjb3VudCA9IDA7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHNoaXBOYW1lQW5kU2l6ZS5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgIGlmKHNoaXBOYW1lQW5kU2l6ZVtpXS5wb3NpdGlvbi5sZW5ndGgpe1xyXG4gICAgICAgICAgICAgICAgY291bnQrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoY291bnQgPT0gNSl7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmKGlzUG9zaXRpb25UcnVlKHNoaXBOYW1lQW5kU2l6ZSkpe1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdzdGFydCBnYW1lJylcclxuICAgIH1cclxuXHJcbiAgICBnYW1lQm9hcmRGaWVsZHMoZ2FtZUZpZWxkc0Fycik7XHJcblxyXG4gICAgY29uc29sZS5sb2coZ2FtZUZpZWxkc0Fycik7XHJcbiAgICBjb25zb2xlLmxvZyhzaGlwTmFtZUFuZFNpemUpO1xyXG59LCBmYWxzZSk7Il0sIm5hbWVzIjpbImdhbWVGaWVsZHNBcnIiLCJnYW1lQm9hcmRDbGFzcyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInRleHRDb250ZW50IiwiaSIsImoiLCJnYW1lRmllbGQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiZGF0YXNldCIsInJvdyIsImNvbHVtbiIsImFwcGVuZENoaWxkIiwic2hpcE5hbWVBbmRTaXplIiwic2hpcHNDbGFzcyIsImxlbmd0aCIsImxhbmQiLCJzaGlwIiwiaWQiLCJuYW1lIiwic3R5bGUiLCJncmlkVGVtcGxhdGVDb2x1bW5zIiwic2l6ZSIsIndpZHRoIiwiaGVpZ2h0IiwiYmFja2dyb3VuZENvbG9yIiwiZHJhZ2dhYmxlIiwic3F1YXJlIiwicG9zaXRpb24iLCJkcmFnZ2VkIiwiY291bnQiLCJuZXdBcnIiLCJwdXNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJ0YXJnZXQiLCJvcGFjaXR5IiwiZmlyc3RDaGlsZCIsInByZXZlbnREZWZhdWx0IiwiY2xhc3NOYW1lIiwiYmFja2dyb3VuZCIsInNoaXBJc0dvb2RTaXplIiwicmVzdWx0UG9zaXRpb24iLCJzdHJpbmdUb0ludCIsIk51bWJlciIsInNwbGl0IiwibmFtZVNoaXAiLCJsZW5ndGhTaGlwIiwiaW5kZXhPYmoiLCJmaXJzdFBvc2l0aW9uIiwibGFzdFNoaXBQb3NpdGlvbiIsInNoaXBBcnJQb3NpdGlvbiIsIngiLCJpc1RydWUiLCJuIiwiaW5jbHVkZXMiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJrIiwicCIsImNvbnNvbGUiLCJsb2ciLCJpc1Bvc2l0aW9uVHJ1ZSJdLCJzb3VyY2VSb290IjoiIn0=