(()=>{"use strict";const e=e=>{const t=document.querySelector(".gameboard");t.textContent="";for(let o=0;o<10;o++)for(let s=0;s<10;s++)if("x"==e[o][s]){const e=document.createElement("div");e.classList.add("checked"),e.dataset.row=o,e.dataset.column=s,t.appendChild(e)}else if("y"==e[o][s]){const e=document.createElement("div");e.classList.add("blocked"),e.dataset.row=o,e.dataset.column=s,t.appendChild(e)}else{const e=document.createElement("div");e.classList.add("gameField"),e.dataset.row=o,e.dataset.column=s,t.appendChild(e)}},t=e=>{const t=document.querySelector(".ships");t.textContent="";for(let o=0;o<e.length;o++)if(1==e[o].land);else{const s=document.createElement("div");s.classList.add("ship"),s.dataset.id=e[o].id,s.classList.add(e[o].name),s.style.gridTemplateColumns=`repeat(${e[o].size}, 1fr)`,s.style.width=`calc(${e[o].id} * 50px)`,s.style.height="50px",s.style.backgroundColor="black",s.draggable=!0;for(let t=0;t<e[o].size;t++){const e=document.createElement("div");e.classList.add("square"),s.appendChild(e)}t.appendChild(s)}},o=()=>({rowChoice:Math.floor(9*Math.random()),columnChoice:Math.floor(99*Math.random())});(()=>{const e=document.querySelector(".computerGameBoard");e.textContent="";for(let t=0;t<10;t++)for(let o=0;o<10;o++){const s=document.createElement("div");s.classList.add("field"),s.dataset.row=t,s.dataset.column=o,e.appendChild(s)}})();const s=[];let n=0;for(let e=0;e<10;e++){const e=[];for(let t=0;t<10;t++)e.push(n),n++;s.push(e)}const l=[{name:"Destroyer",size:2,id:2,land:!1,position:[]},{name:"Submarine",size:3,id:3,land:!1,position:[]},{name:"Cruiser",size:3,id:3,land:!1,position:[]},{name:"Battleship",size:4,id:4,land:!1,position:[]},{name:"Carrier",size:5,id:5,land:!1,position:[]}];let i;console.log((()=>{o().rowChoice,o().columnChoice;let e=[];const t=e=>Math.floor(94*Math.random())+s[e].size,s=[{name:"Destroyer",size:2,id:2,land:!1,position:[]},{name:"Submarine",size:3,id:3,land:!1,position:[]},{name:"Cruiser",size:3,id:3,land:!1,position:[]},{name:"Battleship",size:4,id:4,land:!1,position:[]},{name:"Carrier",size:5,id:5,land:!1,position:[]}];let n=0;for(let t=0;t<10;t++){const t=[];for(let e=0;e<10;e++)t.push(n),n++;e.push(t)}for(let o=0;o<1e3;o++){if(s[0].position.length&&s[1].position.length&&s[2].position.length&&s[3].position.length&&s[4].position.length)return{computerArr:e,shipNameAndSizeComputer:s};for(let o=0;o<s.length;o++)if(s[o].position.length>1);else{const n=t(o);let l,i;1==n.toString().length?(l=0,i=Number(n.toString().split("")[0])):(l=Number(n.toString().split("")[0]),i=Number(n.toString().split("")[1]));const a=e[l].findIndex((e=>e==n));if(a>=0)if(a-s[o].size>0)for(let t=1;t<=s[o].size;t++)s[o].position.push(e[l][a-t]),e[l][a-t]="X";else{const n=t(o);let l,i;for(let t=0;t<1e3;t++)if(l=Number(n.toString().split("")[0]),i=Number(n.toString().split("")[1]),a>=0&&a-s[o].size>0){for(let t=1;t<=s[o].size;t++)s[o].position.push(e[l][a-t]),e[l][a-t]="X";break}}}}})()),e(s),t(l),document.addEventListener("dragstart",(e=>{i=e.target,e.target.style.opacity=.3}),!1),document.addEventListener("dragend",(e=>{e.target.style.opacity="",e.target.dataset.row=e.target.firstChild.dataset.row,e.target.dataset.column=e.target.firstChild.dataset.column}),!1),document.addEventListener("dragover",(e=>{e.preventDefault()}),!1),document.addEventListener("dragenter",(e=>{"gameField"==e.target.className&&(e.target.style.background="yellow")}),!1),document.addEventListener("dragleave",(e=>{"gameField"==e.target.className&&(e.target.style.background="")}),!1),document.addEventListener("drop",(o=>{if(o.preventDefault(),"gameField"==o.target.className){o.target.style.background="",o.target.appendChild(i);let n=!1,a=o.target.dataset.row+o.target.dataset.column,r=Number(a);for(let e=0;e<a.split("").length;e++)0==a.split("")[0]&&(a=a.split("")[1]);const d=o.target.firstChild.className.split(" ")[1];let c,p;for(let e=0;e<l.length;e++)l[e].name==d&&(c=l[e].size,p=e);const m=r,g=r+c-1,u=[];for(let e=m;e<=g;e++)u.push(e);const h=(e,t,o,s)=>{for(let s=0;s<e.length;s++)if(e[s].includes(t))return!!e[s].includes(o)&&(!0,l[p].land=!0,true)};if(t(l),h(s,m,g,n)){o.target.style.background="",i.parentNode.removeChild(i),o.target.appendChild(i);for(let e=0;e<s.length;e++)for(let t=0;t<s[e].length;t++)if(s[e][t]==m)if(0==s[e][t]){for(let o=0;o<c;o++)l[p].position.push(s[e][t+o]),s[e][t+o]="x";s[e+1][t]="y";for(let o=0;o<c;o++)s[e+1][t+o]="y";s[e][t+c]="y",console.log(e)}else if(s[e][t]==s[0][t]){for(let o=0;o<c;o++)l[p].position.push(s[e][t+o]),s[e][t+o]="x";s[e+1][t]="y";for(let o=0;o<c;o++)s[e+1][t+o]="y";s[e][m-1]="y",s[e][g+1]="y"}else if(s[e][t]==s[9][t]&&0!=t){for(let o=0;o<c;o++)l[p].position.push(s[e][t+o]),s[e][t+o]="x";for(let o=0;o<c;o++)s[e-1][t+o]="y";console.log(!0,!1),s[e][c+t]="y",s[e][t-1]="y"}else if(s[e][t]==s[9][t]){for(let o=0;o<c;o++)l[p].position.push(s[e][t+o]),s[e][t+o]="x";for(let o=0;o<c;o++)s[e-1][t+o]="y";console.log(!0,!1),s[e][c]="y"}else{for(let o=0;o<c;o++)l[p].position.push(s[e][t+o]),s[e][t+o]="x";s[e+1][t]="y",s[e-1][t]="y",s[e][t-1]="y",s[e][t+c]="y";for(let o=0;o<c;o++)s[e+1][t+o]="y",s[e-1][t+o]="y"}i.parentNode.removeChild(i)}else i.parentNode.removeChild(i),o.target.style.background="",t(l),l[p].land=!1,e(s);t(l)}(e=>{let t=0;for(let o=0;o<e.length;o++)e[o].position.length&&t++;return 5==t})(l)&&console.log("start game"),e(s),console.log(s),console.log(l)}),!1)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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aUQsR0FBSyxJQUM5QnZELEVBQWNLLEVBQUksR0FBR0MsRUFBSWlELEdBQUssSUFNbERmLEVBQVFzQyxXQUFXQyxZQUFZdkMsUUEzRS9CQSxFQUFRc0MsV0FBV0MsWUFBWXZDLEdBQy9Ca0IsRUFBRUMsT0FBT3JDLE1BQU0wQyxXQUFhLEdBQzVCLEVBQVdqRCxHQUNYQSxFQUFnQnVELEdBQVVwRCxNQUFPLEVBRWpDLEVBQWdCbEIsR0F3RXBCLEVBQVdlLEdBR1EsQ0FBQ0EsSUFDcEIsSUFBSXFCLEVBQVEsRUFDWixJQUFJLElBQUkvQixFQUFJLEVBQUdBLEVBQUlVLEVBQWdCRSxPQUFRWixJQUNwQ1UsRUFBZ0JWLEdBQUdrQyxTQUFTdEIsUUFDM0JtQixJQUlSLE9BQVksR0FBVEEsR0FPSjZDLENBQWVsRSxJQUNkMEIsUUFBUUMsSUFBSSxjQUdoQixFQUFnQjFDLEdBRWhCeUMsUUFBUUMsSUFBSTFDLEdBQ1p5QyxRQUFRQyxJQUFJM0IsTUFDYixJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9jb21wb25lbnRzL2dhbWVCb2FyZEZpZWxkcy5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2NvbXBvbmVudHMvY3JlYXRlU2hpcC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2NvbXBvbmVudHMvY29tcHV0ZXJDaG9pY2UuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9jb21wb25lbnRzL2NvbXB1dGVyR2FtZUJvYXJkRmllbGQuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBnYW1lQm9hcmRGaWVsZHMgPSAoZ2FtZUZpZWxkc0FycikgPT4ge1xyXG4gICAgY29uc3QgZ2FtZUJvYXJkQ2xhc3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FtZWJvYXJkJyk7XHJcblxyXG4gICAgZ2FtZUJvYXJkQ2xhc3MudGV4dENvbnRlbnQgPSAnJztcclxuXHJcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgMTA7IGkrKyl7XHJcbiAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IDEwOyBqKyspe1xyXG4gICAgICAgICAgICBpZihnYW1lRmllbGRzQXJyW2ldW2pdID09ICd4Jyl7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBnYW1lRmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5jbGFzc0xpc3QuYWRkKCdjaGVja2VkJyk7XHJcbiAgICAgICAgICAgICAgICBnYW1lRmllbGQuZGF0YXNldC5yb3cgPSBpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmRhdGFzZXQuY29sdW1uID0gajtcclxuXHJcbiAgICAgICAgICAgICAgICBnYW1lQm9hcmRDbGFzcy5hcHBlbmRDaGlsZChnYW1lRmllbGQpO1xyXG4gICAgICAgICAgICB9ZWxzZSBpZihnYW1lRmllbGRzQXJyW2ldW2pdID09ICd5Jyl7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBnYW1lRmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5jbGFzc0xpc3QuYWRkKCdibG9ja2VkJyk7XHJcbiAgICAgICAgICAgICAgICBnYW1lRmllbGQuZGF0YXNldC5yb3cgPSBpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmRhdGFzZXQuY29sdW1uID0gajtcclxuXHJcbiAgICAgICAgICAgICAgICBnYW1lQm9hcmRDbGFzcy5hcHBlbmRDaGlsZChnYW1lRmllbGQpO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGdhbWVGaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmNsYXNzTGlzdC5hZGQoJ2dhbWVGaWVsZCcpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmRhdGFzZXQucm93ID0gaTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5kYXRhc2V0LmNvbHVtbiA9IGo7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGdhbWVCb2FyZENsYXNzLmFwcGVuZENoaWxkKGdhbWVGaWVsZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGdhbWVCb2FyZEZpZWxkczsiLCJjb25zdCBjcmVhdGVTaGlwID0gKHNoaXBOYW1lQW5kU2l6ZSkgPT4ge1xyXG4gICAgY29uc3Qgc2hpcHNDbGFzcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaGlwcycpO1xyXG5cclxuICAgIHNoaXBzQ2xhc3MudGV4dENvbnRlbnQgPSAnJztcclxuXHJcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgc2hpcE5hbWVBbmRTaXplLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICBpZihzaGlwTmFtZUFuZFNpemVbaV0ubGFuZCA9PSB0cnVlKXtcclxuXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGNvbnN0IHNoaXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgc2hpcC5jbGFzc0xpc3QuYWRkKCdzaGlwJyk7XHJcbiAgICAgICAgICAgIHNoaXAuZGF0YXNldC5pZCA9IHNoaXBOYW1lQW5kU2l6ZVtpXS5pZDtcclxuICAgICAgICAgICAgc2hpcC5jbGFzc0xpc3QuYWRkKHNoaXBOYW1lQW5kU2l6ZVtpXS5uYW1lKTtcclxuICAgICAgICAgICAgc2hpcC5zdHlsZS5ncmlkVGVtcGxhdGVDb2x1bW5zID0gYHJlcGVhdCgke3NoaXBOYW1lQW5kU2l6ZVtpXS5zaXplfSwgMWZyKWA7XHJcbiAgICAgICAgICAgIHNoaXAuc3R5bGUud2lkdGggPSBgY2FsYygke3NoaXBOYW1lQW5kU2l6ZVtpXS5pZH0gKiA1MHB4KWA7XHJcbiAgICAgICAgICAgIHNoaXAuc3R5bGUuaGVpZ2h0ID0gJzUwcHgnO1xyXG4gICAgICAgICAgICBzaGlwLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdibGFjayc7IFxyXG4gICAgICAgICAgICBzaGlwLmRyYWdnYWJsZSA9IHRydWU7XHJcblxyXG5cclxuICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IHNoaXBOYW1lQW5kU2l6ZVtpXS5zaXplOyBqKyspe1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3F1YXJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBzcXVhcmUuY2xhc3NMaXN0LmFkZCgnc3F1YXJlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgc2hpcC5hcHBlbmRDaGlsZChzcXVhcmUpO1xyXG4gICAgICAgICAgICB9ICAgXHJcblxyXG4gICAgICAgICAgICBzaGlwc0NsYXNzLmFwcGVuZENoaWxkKHNoaXApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlU2hpcDsiLCJjb25zdCBjb21wdGVyQ2hvaWNlID0gKCkgPT4ge1xyXG4gICAgY29uc3Qgcm93Q2hvaWNlID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogOSk7XHJcbiAgICBjb25zdCBjb2x1bW5DaG9pY2UgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA5OSk7XHJcblxyXG4gICAgcmV0dXJue1xyXG4gICAgICAgIHJvd0Nob2ljZSxcclxuICAgICAgICBjb2x1bW5DaG9pY2UsXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNvbXB0ZXJDaG9pY2U7IiwiY29uc3QgY29tcHV0ZXJHYW1lQm9hcmRGaWVsZCA9ICgpID0+IHtcclxuICAgIFxyXG4gICAgY29uc3QgY29tcHV0ZXJHYW1lYm9hcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29tcHV0ZXJHYW1lQm9hcmQnKTtcclxuICAgIGNvbXB1dGVyR2FtZWJvYXJkLnRleHRDb250ZW50ID0gJyc7XHJcblxyXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IDEwOyBpKyspe1xyXG4gICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCAxMDsgaisrKXtcclxuICAgICAgICAgICAgY29uc3QgZ2FtZUZpZWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGdhbWVGaWVsZC5jbGFzc0xpc3QuYWRkKCdmaWVsZCcpO1xyXG4gICAgICAgICAgICBnYW1lRmllbGQuZGF0YXNldC5yb3cgPSBpO1xyXG4gICAgICAgICAgICBnYW1lRmllbGQuZGF0YXNldC5jb2x1bW4gPSBqO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbXB1dGVyR2FtZWJvYXJkLmFwcGVuZENoaWxkKGdhbWVGaWVsZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjb21wdXRlckdhbWVCb2FyZEZpZWxkOyIsImltcG9ydCBnYW1lQm9hcmRGaWVsZHMgZnJvbSBcIi4vY29tcG9uZW50cy9nYW1lQm9hcmRGaWVsZHNcIjtcclxuaW1wb3J0IGNyZWF0ZVNoaXAgZnJvbSBcIi4vY29tcG9uZW50cy9jcmVhdGVTaGlwXCI7XHJcbmltcG9ydCBjb21wdXRlckdhbWVCb2FyZEZpZWxkIGZyb20gXCIuL2NvbXBvbmVudHMvY29tcHV0ZXJHYW1lQm9hcmRGaWVsZFwiO1xyXG5pbXBvcnQgY29tcHRlckNob2ljZSBmcm9tICcuL2NvbXBvbmVudHMvY29tcHV0ZXJDaG9pY2UnO1xyXG5cclxuXHJcbmNvbXB1dGVyR2FtZUJvYXJkRmllbGQoKTtcclxuXHJcbmNvbnN0IGdhbWVGaWVsZHNBcnIgPSBbXTtcclxubGV0IGNvdW50ID0gMDtcclxuXHJcbmZvcihsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKXtcclxuICAgIGNvbnN0IG5ld0FyciA9IFtdO1xyXG5cclxuICAgIGZvcihsZXQgaiA9IDA7IGogPCAxMDsgaisrKXtcclxuICAgICAgICBuZXdBcnIucHVzaChjb3VudCk7XHJcbiAgICAgICAgY291bnQrKztcclxuICAgIH1cclxuICAgIGdhbWVGaWVsZHNBcnIucHVzaChuZXdBcnIpO1xyXG59XHJcblxyXG5jb25zdCBzaGlwTmFtZUFuZFNpemUgPSBbXHJcbiAgICB7bmFtZTogJ0Rlc3Ryb3llcicsIHNpemU6IDIsIGlkOiAyLCBsYW5kOiBmYWxzZSwgcG9zaXRpb246IFtdfSxcclxuICAgIHtuYW1lOiAnU3VibWFyaW5lJywgc2l6ZTogMywgaWQ6IDMsIGxhbmQ6IGZhbHNlLCBwb3NpdGlvbjogW119LFxyXG4gICAge25hbWU6ICdDcnVpc2VyJywgc2l6ZTogMywgaWQ6IDMsIGxhbmQ6IGZhbHNlLCBwb3NpdGlvbjogW119LFxyXG4gICAge25hbWU6ICdCYXR0bGVzaGlwJywgc2l6ZTogNCwgaWQ6IDQsIGxhbmQ6IGZhbHNlLCBwb3NpdGlvbjogW119LFxyXG4gICAge25hbWU6ICdDYXJyaWVyJywgc2l6ZTogNSwgaWQ6IDUsIGxhbmQ6IGZhbHNlLCBwb3NpdGlvbjogW119LFxyXG5dXHJcblxyXG5jb25zdCBjb21wdXRlciA9ICgpID0+IHtcclxuICAgIGNvbnN0IHJvdyA9IGNvbXB0ZXJDaG9pY2UoKS5yb3dDaG9pY2U7XHJcbiAgICBjb25zdCBjb2x1bW4gPSBjb21wdGVyQ2hvaWNlKCkuY29sdW1uQ2hvaWNlO1xyXG4gICAgbGV0IGNvbXB1dGVyQXJyID0gW107XHJcblxyXG4gICAgY29uc3QgcmFuZG9tUG9zaXRpb24gPSAobnVtKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDk0KSArIHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW251bV0uc2l6ZTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBzaGlwTmFtZUFuZFNpemVDb21wdXRlciA9IFtcclxuICAgICAgICB7bmFtZTogJ0Rlc3Ryb3llcicsIHNpemU6IDIsIGlkOiAyLCBsYW5kOiBmYWxzZSwgcG9zaXRpb246IFtdfSxcclxuICAgICAgICB7bmFtZTogJ1N1Ym1hcmluZScsIHNpemU6IDMsIGlkOiAzLCBsYW5kOiBmYWxzZSwgcG9zaXRpb246IFtdfSxcclxuICAgICAgICB7bmFtZTogJ0NydWlzZXInLCBzaXplOiAzLCBpZDogMywgbGFuZDogZmFsc2UsIHBvc2l0aW9uOiBbXX0sXHJcbiAgICAgICAge25hbWU6ICdCYXR0bGVzaGlwJywgc2l6ZTogNCwgaWQ6IDQsIGxhbmQ6IGZhbHNlLCBwb3NpdGlvbjogW119LFxyXG4gICAgICAgIHtuYW1lOiAnQ2FycmllcicsIHNpemU6IDUsIGlkOiA1LCBsYW5kOiBmYWxzZSwgcG9zaXRpb246IFtdfSxcclxuICAgIF1cclxuXHJcbiAgICBsZXQgY291bnQgPSAwO1xyXG5cclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKXtcclxuICAgICAgICBjb25zdCBuZXdBcnIgPSBbXTtcclxuICAgIFxyXG4gICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCAxMDsgaisrKXtcclxuICAgICAgICAgICAgbmV3QXJyLnB1c2goY291bnQpO1xyXG4gICAgICAgICAgICBjb3VudCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb21wdXRlckFyci5wdXNoKG5ld0Fycik7XHJcbiAgICB9XHJcblxyXG4gICAgZm9yKGxldCBiID0gMDsgYiA8IDEwMDA7IGIrKyl7XHJcbiAgICAgICAgaWYoc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbMF0ucG9zaXRpb24ubGVuZ3RoICYmIHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyWzFdLnBvc2l0aW9uLmxlbmd0aCAmJiBzaGlwTmFtZUFuZFNpemVDb21wdXRlclsyXS5wb3NpdGlvbi5sZW5ndGggJiYgc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbM10ucG9zaXRpb24ubGVuZ3RoICYmIHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyWzRdLnBvc2l0aW9uLmxlbmd0aCl7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBjb21wdXRlckFycixcclxuICAgICAgICAgICAgICAgIHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXIubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgaWYoc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbaV0ucG9zaXRpb24ubGVuZ3RoID4gMSl7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gcmFuZG9tUG9zaXRpb24oaSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgcm93O1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvbHVtbjtcclxuICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmKHZhbHVlLnRvU3RyaW5nKCkubGVuZ3RoID09IDEpe1xyXG4gICAgICAgICAgICAgICAgICAgIHJvdyA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gTnVtYmVyKHZhbHVlLnRvU3RyaW5nKCkuc3BsaXQoJycpWzBdKTtcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIHJvdyA9IE51bWJlcih2YWx1ZS50b1N0cmluZygpLnNwbGl0KCcnKVswXSk7XHJcbiAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSBOdW1iZXIodmFsdWUudG9TdHJpbmcoKS5zcGxpdCgnJylbMV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgZmluZEluZGV4Q29tcHV0ZXIgPSBjb21wdXRlckFycltyb3ddLmZpbmRJbmRleChpdGVtID0+IGl0ZW0gPT0gdmFsdWUpO1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYoZmluZEluZGV4Q29tcHV0ZXIgPj0gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZmluZEluZGV4Q29tcHV0ZXIgLSBzaGlwTmFtZUFuZFNpemVDb21wdXRlcltpXS5zaXplID4gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaiA9IDE7IGogPD0gc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbaV0uc2l6ZTsgaisrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW2ldLnBvc2l0aW9uLnB1c2goY29tcHV0ZXJBcnJbcm93XVtmaW5kSW5kZXhDb21wdXRlciAtIGpdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXB1dGVyQXJyW3Jvd11bZmluZEluZGV4Q29tcHV0ZXIgLSBqXSA9ICdYJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHJhbmRvbVBvc2l0aW9uKGkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcm93O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29sdW1uO1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IHAgPSAwOyBwIDwgMTAwMDsgcCsrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdyA9IE51bWJlcih2YWx1ZS50b1N0cmluZygpLnNwbGl0KCcnKVswXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSBOdW1iZXIodmFsdWUudG9TdHJpbmcoKS5zcGxpdCgnJylbMV0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZmluZEluZGV4Q29tcHV0ZXIgPj0gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZmluZEluZGV4Q29tcHV0ZXIgLSBzaGlwTmFtZUFuZFNpemVDb21wdXRlcltpXS5zaXplID4gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaiA9IDE7IGogPD0gc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbaV0uc2l6ZTsgaisrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW2ldLnBvc2l0aW9uLnB1c2goY29tcHV0ZXJBcnJbcm93XVtmaW5kSW5kZXhDb21wdXRlciAtIGpdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXB1dGVyQXJyW3Jvd11bZmluZEluZGV4Q29tcHV0ZXIgLSBqXSA9ICdYJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5jb25zb2xlLmxvZyhjb21wdXRlcigpKTtcclxuXHJcbmNvbnN0IHNoaXAgPSAoYm9keUxlbmd0aCwgd2hlcmVIaXRzLCBzdW5rKSA9PiB7XHJcbiAgICBcclxuICAgIHJldHVybntcclxuICAgICAgICBib2R5TGVuZ3RoLFxyXG4gICAgICAgIHdoZXJlSGl0cyxcclxuICAgICAgICBzdW5rLFxyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBoaXQgPSAoaGl0UG9zaXRpb24pID0+IHtcclxuICAgIFxyXG4gICAgcmV0dXJue1xyXG4gICAgICAgIGhpdFBvc2l0aW9uLFxyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBpc1N1bmsgPSAoYm9keUxlbmd0aCkgPT4ge1xyXG4gICAgY29uc3QgaGl0cyA9IGJvZHlMZW5ndGggLSBzaGlwKCkuc3VuaztcclxuXHJcbiAgICBpZihoaXRzID09IDApe1xyXG4gICAgICAgIHJldHVybiAnc2hpcCBpcyBzdW5rJztcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gaGl0cztcclxufVxyXG5cclxubGV0IGRyYWdnZWQ7XHJcblxyXG5nYW1lQm9hcmRGaWVsZHMoZ2FtZUZpZWxkc0Fycik7XHJcbmNyZWF0ZVNoaXAoc2hpcE5hbWVBbmRTaXplKTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnc3RhcnRcIiwgKGUpID0+IHtcclxuICAgIGRyYWdnZWQgPSBlLnRhcmdldDtcclxuXHJcbiAgICBlLnRhcmdldC5zdHlsZS5vcGFjaXR5ID0gLjM7XHJcblxyXG59LCBmYWxzZSk7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ2VuZFwiLCAoZSkgPT4ge1xyXG4gICAgZS50YXJnZXQuc3R5bGUub3BhY2l0eSA9IFwiXCI7XHJcbiAgICBlLnRhcmdldC5kYXRhc2V0LnJvdyA9IGUudGFyZ2V0LmZpcnN0Q2hpbGQuZGF0YXNldC5yb3c7XHJcbiAgICBlLnRhcmdldC5kYXRhc2V0LmNvbHVtbiA9IGUudGFyZ2V0LmZpcnN0Q2hpbGQuZGF0YXNldC5jb2x1bW47XHJcbn0sIGZhbHNlKTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnb3ZlclwiLCAoZSkgPT4ge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG59LCBmYWxzZSk7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ2VudGVyXCIsIChlKSA9PiB7XHJcbiAgICBpZihlLnRhcmdldC5jbGFzc05hbWUgPT0gXCJnYW1lRmllbGRcIil7XHJcbiAgICAgICAgZS50YXJnZXQuc3R5bGUuYmFja2dyb3VuZCA9IFwieWVsbG93XCI7XHJcbiAgICB9XHJcbn0sIGZhbHNlKTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnbGVhdmVcIiwgKGUpID0+IHtcclxuXHJcbiAgICBpZiAoZS50YXJnZXQuY2xhc3NOYW1lID09IFwiZ2FtZUZpZWxkXCIpe1xyXG4gICAgICAgIGUudGFyZ2V0LnN0eWxlLmJhY2tncm91bmQgPSBcIlwiO1xyXG4gICAgfVxyXG59LCBmYWxzZSk7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZHJvcFwiLCAoZSkgPT4ge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgIGlmKGUudGFyZ2V0LmNsYXNzTmFtZSA9PSAnZ2FtZUZpZWxkJyl7XHJcbiAgICAgICAgZS50YXJnZXQuc3R5bGUuYmFja2dyb3VuZCA9IFwiXCI7XHJcbiAgICAgICAgZS50YXJnZXQuYXBwZW5kQ2hpbGQoZHJhZ2dlZCk7XHJcblxyXG4gICAgICAgIGxldCBzaGlwSXNHb29kU2l6ZSA9IGZhbHNlO1xyXG4gXHJcbiAgICAgICAgbGV0IHJlc3VsdFBvc2l0aW9uID0gZS50YXJnZXQuZGF0YXNldC5yb3cgKyBlLnRhcmdldC5kYXRhc2V0LmNvbHVtbjtcclxuXHJcbiAgICAgICAgbGV0IHN0cmluZ1RvSW50ID0gTnVtYmVyKHJlc3VsdFBvc2l0aW9uKTtcclxuICAgIFxyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCByZXN1bHRQb3NpdGlvbi5zcGxpdCgnJykubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICBpZihyZXN1bHRQb3NpdGlvbi5zcGxpdCgnJylbMF0gPT0gMCl7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRQb3NpdGlvbiA9IHJlc3VsdFBvc2l0aW9uLnNwbGl0KCcnKVsxXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gICBcclxuXHJcbiAgICAgICAgY29uc3QgbmFtZVNoaXAgPSBlLnRhcmdldC5maXJzdENoaWxkLmNsYXNzTmFtZS5zcGxpdCgnICcpWzFdO1xyXG4gICAgICAgIGxldCBsZW5ndGhTaGlwO1xyXG5cclxuICAgICAgICBsZXQgaW5kZXhPYmo7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IHNoaXBOYW1lQW5kU2l6ZS5sZW5ndGg7IGorKyl7XHJcbiAgICAgICAgICAgIGlmKHNoaXBOYW1lQW5kU2l6ZVtqXS5uYW1lID09IG5hbWVTaGlwKXtcclxuICAgICAgICAgICAgICAgIGxlbmd0aFNoaXAgPSBzaGlwTmFtZUFuZFNpemVbal0uc2l6ZTtcclxuICAgICAgICAgICAgICAgIGluZGV4T2JqID0galxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGZpcnN0UG9zaXRpb24gPSBzdHJpbmdUb0ludDtcclxuICAgICAgICBjb25zdCBsYXN0U2hpcFBvc2l0aW9uID0gc3RyaW5nVG9JbnQgKyBsZW5ndGhTaGlwIC0gMTtcclxuICAgICAgICBjb25zdCBzaGlwQXJyUG9zaXRpb24gPSBbXTtcclxuXHJcbiAgICAgICAgZm9yKGxldCB4ID0gZmlyc3RQb3NpdGlvbjsgeCA8PSBsYXN0U2hpcFBvc2l0aW9uOyB4Kyspe1xyXG4gICAgICAgICAgICBzaGlwQXJyUG9zaXRpb24ucHVzaCh4KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGlzVHJ1ZSA9IChnYW1lRmllbGRzQXJyLCBmaXJzdFBvc2l0aW9uLCBsYXN0U2hpcFBvc2l0aW9uLCBzaGlwSXNHb29kU2l6ZSkgPT4ge1xyXG4gICAgICAgICAgICBmb3IobGV0IG4gPSAwOyBuIDwgZ2FtZUZpZWxkc0Fyci5sZW5ndGg7IG4rKyl7XHJcbiAgICAgICAgICAgICAgICBpZihnYW1lRmllbGRzQXJyW25dLmluY2x1ZGVzKGZpcnN0UG9zaXRpb24pKXtcclxuICAgICAgICAgICAgICAgICAgICBpZihnYW1lRmllbGRzQXJyW25dLmluY2x1ZGVzKGxhc3RTaGlwUG9zaXRpb24pKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hpcElzR29vZFNpemUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGlwTmFtZUFuZFNpemVbaW5kZXhPYmpdLmxhbmQgPSB0cnVlO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzaGlwSXNHb29kU2l6ZTtcclxuICAgICAgICAgICAgICAgICAgICB9OyBcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzaGlwSXNHb29kU2l6ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjcmVhdGVTaGlwKHNoaXBOYW1lQW5kU2l6ZSk7XHJcblxyXG4gICAgICAgIGlmKCFpc1RydWUoZ2FtZUZpZWxkc0FyciwgZmlyc3RQb3NpdGlvbiwgbGFzdFNoaXBQb3NpdGlvbiwgc2hpcElzR29vZFNpemUpKXtcclxuICAgICAgICAgICAgZHJhZ2dlZC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGRyYWdnZWQpO1xyXG4gICAgICAgICAgICBlLnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kID0gXCJcIjtcclxuICAgICAgICAgICAgY3JlYXRlU2hpcChzaGlwTmFtZUFuZFNpemUpO1xyXG4gICAgICAgICAgICBzaGlwTmFtZUFuZFNpemVbaW5kZXhPYmpdLmxhbmQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGdhbWVCb2FyZEZpZWxkcyhnYW1lRmllbGRzQXJyKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgZS50YXJnZXQuc3R5bGUuYmFja2dyb3VuZCA9IFwiXCI7XHJcbiAgICAgICAgICAgIGRyYWdnZWQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkcmFnZ2VkKTtcclxuICAgICAgICAgICAgZS50YXJnZXQuYXBwZW5kQ2hpbGQoZHJhZ2dlZCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgZ2FtZUZpZWxkc0Fyci5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgZ2FtZUZpZWxkc0FycltpXS5sZW5ndGg7IGorKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZ2FtZUZpZWxkc0FycltpXVtqXSA9PSBmaXJzdFBvc2l0aW9uKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoZ2FtZUZpZWxkc0FycltpXVtqXSA9PSAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgayA9IDA7IGsgPCBsZW5ndGhTaGlwOyBrKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoaXBOYW1lQW5kU2l6ZVtpbmRleE9ial0ucG9zaXRpb24ucHVzaChnYW1lRmllbGRzQXJyW2ldW2ogKyBrXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtqICsga10gPSAneCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2kgKyAxXVtqXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgcCA9IDA7IHAgPCBsZW5ndGhTaGlwOyBwKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaSArIDFdW2ogKyBwXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaV1baiArIGxlbmd0aFNoaXBdID0gJ3knO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihnYW1lRmllbGRzQXJyW2ldW2pdID09IGdhbWVGaWVsZHNBcnJbMF1bal0pe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBrID0gMDsgayA8IGxlbmd0aFNoaXA7IGsrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hpcE5hbWVBbmRTaXplW2luZGV4T2JqXS5wb3NpdGlvbi5wdXNoKGdhbWVGaWVsZHNBcnJbaV1baiArIGtdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2ldW2ogKyBrXSA9ICd4JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaSArIDFdW2pdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBwID0gMDsgcCA8IGxlbmd0aFNoaXA7IHArKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpICsgMV1baiArIHBdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtmaXJzdFBvc2l0aW9uIC0gMV0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2ldW2xhc3RTaGlwUG9zaXRpb24gKyAxXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoZ2FtZUZpZWxkc0FycltpXVtqXSA9PSBnYW1lRmllbGRzQXJyWzldW2pdICYmIGogIT0gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGsgPSAwOyBrIDwgbGVuZ3RoU2hpcDsgaysrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGlwTmFtZUFuZFNpemVbaW5kZXhPYmpdLnBvc2l0aW9uLnB1c2goZ2FtZUZpZWxkc0FycltpXVtqICsga10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaV1baiArIGtdID0gJ3gnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBwID0gMDsgcCA8IGxlbmd0aFNoaXA7IHArKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpIC0gMV1baiArIHBdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codHJ1ZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtsZW5ndGhTaGlwICsgal0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2ldW2ogLSAxXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoZ2FtZUZpZWxkc0FycltpXVtqXSA9PSBnYW1lRmllbGRzQXJyWzldW2pdKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgayA9IDA7IGsgPCBsZW5ndGhTaGlwOyBrKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoaXBOYW1lQW5kU2l6ZVtpbmRleE9ial0ucG9zaXRpb24ucHVzaChnYW1lRmllbGRzQXJyW2ldW2ogKyBrXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtqICsga10gPSAneCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IHAgPSAwOyBwIDwgbGVuZ3RoU2hpcDsgcCsrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2kgLSAxXVtqICsgcF0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0cnVlLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2ldW2xlbmd0aFNoaXBdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgayA9IDA7IGsgPCBsZW5ndGhTaGlwOyBrKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoaXBOYW1lQW5kU2l6ZVtpbmRleE9ial0ucG9zaXRpb24ucHVzaChnYW1lRmllbGRzQXJyW2ldW2ogKyBrXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtqICsga10gPSAneCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2kgKyAxXVtqXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaSAtIDFdW2pdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtqIC0gMV0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2ldW2ogKyBsZW5ndGhTaGlwXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgcCA9IDA7IHAgPCBsZW5ndGhTaGlwOyBwKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaSArIDFdW2ogKyBwXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2kgLSAxXVtqICsgcF0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZHJhZ2dlZC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGRyYWdnZWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjcmVhdGVTaGlwKHNoaXBOYW1lQW5kU2l6ZSk7ICBcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBpc1Bvc2l0aW9uVHJ1ZSA9IChzaGlwTmFtZUFuZFNpemUpID0+IHtcclxuICAgICAgICBsZXQgY291bnQgPSAwO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBzaGlwTmFtZUFuZFNpemUubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICBpZihzaGlwTmFtZUFuZFNpemVbaV0ucG9zaXRpb24ubGVuZ3RoKXtcclxuICAgICAgICAgICAgICAgIGNvdW50Kys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKGNvdW50ID09IDUpe1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZihpc1Bvc2l0aW9uVHJ1ZShzaGlwTmFtZUFuZFNpemUpKXtcclxuICAgICAgICBjb25zb2xlLmxvZygnc3RhcnQgZ2FtZScpXHJcbiAgICB9XHJcblxyXG4gICAgZ2FtZUJvYXJkRmllbGRzKGdhbWVGaWVsZHNBcnIpO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKGdhbWVGaWVsZHNBcnIpO1xyXG4gICAgY29uc29sZS5sb2coc2hpcE5hbWVBbmRTaXplKTtcclxufSwgZmFsc2UpOyJdLCJuYW1lcyI6WyJnYW1lRmllbGRzQXJyIiwiZ2FtZUJvYXJkQ2xhc3MiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0ZXh0Q29udGVudCIsImkiLCJqIiwiZ2FtZUZpZWxkIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImRhdGFzZXQiLCJyb3ciLCJjb2x1bW4iLCJhcHBlbmRDaGlsZCIsInNoaXBOYW1lQW5kU2l6ZSIsInNoaXBzQ2xhc3MiLCJsZW5ndGgiLCJsYW5kIiwic2hpcCIsImlkIiwibmFtZSIsInN0eWxlIiwiZ3JpZFRlbXBsYXRlQ29sdW1ucyIsInNpemUiLCJ3aWR0aCIsImhlaWdodCIsImJhY2tncm91bmRDb2xvciIsImRyYWdnYWJsZSIsInNxdWFyZSIsInJvd0Nob2ljZSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImNvbHVtbkNob2ljZSIsImNvbXB1dGVyR2FtZWJvYXJkIiwiY291bnQiLCJuZXdBcnIiLCJwdXNoIiwicG9zaXRpb24iLCJkcmFnZ2VkIiwiY29uc29sZSIsImxvZyIsImNvbXB1dGVyQXJyIiwicmFuZG9tUG9zaXRpb24iLCJudW0iLCJzaGlwTmFtZUFuZFNpemVDb21wdXRlciIsImIiLCJ2YWx1ZSIsInRvU3RyaW5nIiwiTnVtYmVyIiwic3BsaXQiLCJmaW5kSW5kZXhDb21wdXRlciIsImZpbmRJbmRleCIsIml0ZW0iLCJwIiwiY29tcHV0ZXIiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInRhcmdldCIsIm9wYWNpdHkiLCJmaXJzdENoaWxkIiwicHJldmVudERlZmF1bHQiLCJjbGFzc05hbWUiLCJiYWNrZ3JvdW5kIiwic2hpcElzR29vZFNpemUiLCJyZXN1bHRQb3NpdGlvbiIsInN0cmluZ1RvSW50IiwibmFtZVNoaXAiLCJsZW5ndGhTaGlwIiwiaW5kZXhPYmoiLCJmaXJzdFBvc2l0aW9uIiwibGFzdFNoaXBQb3NpdGlvbiIsInNoaXBBcnJQb3NpdGlvbiIsIngiLCJpc1RydWUiLCJuIiwiaW5jbHVkZXMiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJrIiwiaXNQb3NpdGlvblRydWUiXSwic291cmNlUm9vdCI6IiJ9