(()=>{"use strict";const t=t=>{const e=document.querySelector(".gameboard");e.textContent="";for(let o=0;o<10;o++)for(let i=0;i<10;i++)if("x"==t[o][i]){const t=document.createElement("div");t.classList.add("checked"),t.dataset.row=o,t.dataset.column=i,e.appendChild(t)}else if("y"==t[o][i]){const t=document.createElement("div");t.classList.add("blocked"),t.dataset.row=o,t.dataset.column=i,e.appendChild(t)}else{const t=document.createElement("div");t.classList.add("gameField"),t.dataset.row=o,t.dataset.column=i,e.appendChild(t)}},e=t=>{const e=document.querySelector(".ships");e.textContent="";for(let o=0;o<t.length;o++)if(1==t[o].land);else{const i=document.createElement("div");i.classList.add("ship"),i.dataset.id=t[o].id,i.classList.add(t[o].name),i.style.gridTemplateColumns=`repeat(${t[o].size}, 1fr)`,i.style.width=`calc(${t[o].id} * 50px)`,i.style.height="50px",i.style.backgroundColor="black",i.draggable=!0;for(let e=0;e<t[o].size;e++){const t=document.createElement("div");t.classList.add("square"),i.appendChild(t)}e.appendChild(i)}},o=t=>{const e=document.querySelector(".computerGameBoard");e.textContent="";for(let o=0;o<10;o++)for(let i=0;i<10;i++)if("X"==t[o][i]){const t=document.createElement("div");t.classList.add("plays"),t.dataset.row=o,t.dataset.column=i,e.appendChild(t)}else{const t=document.createElement("div");t.classList.add("field"),t.dataset.row=o,t.dataset.column=i,e.appendChild(t)}},i=()=>({rowChoice:Math.floor(9*Math.random()),columnChoice:Math.floor(99*Math.random())}),n=[];let l=0;for(let t=0;t<10;t++){const t=[];for(let e=0;e<10;e++)t.push(l),l++;n.push(t)}const s=[{name:"Destroyer",size:2,id:2,land:!1,position:[]},{name:"Submarine",size:3,id:3,land:!1,position:[]},{name:"Cruiser",size:3,id:3,land:!1,position:[]},{name:"Battleship",size:4,id:4,land:!1,position:[]},{name:"Carrier",size:5,id:5,land:!1,position:[]}],r=[{name:"Destroyer",size:2,id:2,position:[]},{name:"Submarine",size:3,id:3,position:[]},{name:"Cruiser",size:3,id:3,position:[]},{name:"Battleship",size:4,id:4,position:[]},{name:"Carrier",size:5,id:5,position:[]}];let a=[];for(let t=0;t<100;t++)a.push(t);let d=[];for(let t=0;t<100;t++)d.push(t);const c=t=>"X"!==t;let p=[];for(let t=0;t<10;t++){const t=[];for(let e=0;e<10;e++)t.push(l),l++;p.push(t)}(()=>{i().rowChoice,i().columnChoice,p.length=0;let t=0;for(let e=0;e<10;e++){const e=[];for(let o=0;o<10;o++)e.push(t),t++;p.push(e)}let e=0;o(p);for(let t=0;t<1e3;t++){for(let t=0;t<r.length;t++)r[t].position.every(c)||(r[t].position.length=0);if(r[0].position.length&&r[1].position.length&&r[2].position.length&&r[3].position.length&&r[4].position.length){for(let t=0;t<10;t++)p[t].filter((t=>"X"==t))&&(e+=p[t].filter((t=>"X"==t)).length);return console.log(e),{computerArr:p,shipNameAndSizeComputer:r}}for(let t=0;t<r.length;t++)if(r[t].position.length>1);else{const e=(n=t,Math.floor(94*Math.random())+r[n].size);let o,i;1==e.toString().length?(o=0,i=Number(e.toString().split("")[0])):(o=Number(e.toString().split("")[0]),i=Number(e.toString().split("")[1]));const l=p[o].findIndex((t=>t==e));if(l>0&&l-r[t].size>=0)for(let e=0;e<r[t].size;e++)r[t].position.push(p[o][l-e]),p[o][l-e]="X"}}var n})();const g=[];let h=0;for(let t=0;t<10;t++){const t=[];for(let e=0;e<10;e++)t.push(h),h++;g.push(t)}let u,m=0;(()=>{for(let t=0;t<r.length;t++)for(let e=0;e<r[t].position.length;e++){let o,i;1==r[t].position[e].toString().split("").length?(o=0,i=Number(r[t].position[e].toString().split("")[0])):(o=r[t].position[e].toString().split("")[0],i=r[t].position[e].toString().split("")[1]),m++,g[o][i]="X"}})(),console.log(g,m),o(g),t(n),e(s),document.addEventListener("dragstart",(t=>{u=t.target,t.target.style.opacity=.3}),!1),document.addEventListener("dragend",(t=>{t.target.style.opacity="",t.target.dataset.row=t.target.firstChild.dataset.row,t.target.dataset.column=t.target.firstChild.dataset.column}),!1),document.addEventListener("dragover",(t=>{t.preventDefault()}),!1),document.addEventListener("dragenter",(t=>{"gameField"==t.target.className&&(t.target.style.background="yellow")}),!1),document.addEventListener("dragleave",(t=>{"gameField"==t.target.className&&(t.target.style.background="")}),!1),document.addEventListener("drop",(o=>{if(o.preventDefault(),"gameField"==o.target.className){o.target.style.background="",o.target.appendChild(u);let i=!1,l=o.target.dataset.row+o.target.dataset.column,r=Number(l);for(let t=0;t<l.split("").length;t++)0==l.split("")[0]&&(l=l.split("")[1]);const a=o.target.firstChild.className.split(" ")[1];let d,c;for(let t=0;t<s.length;t++)s[t].name==a&&(d=s[t].size,c=t);const p=r,g=r+d-1,h=[];for(let t=p;t<=g;t++)h.push(t);const m=(t,e,o,i)=>{for(let i=0;i<t.length;i++)if(t[i].includes(e))return!!t[i].includes(o)&&(!0,s[c].land=!0,true)};if(e(s),m(n,p,g,i)){o.target.style.background="",u.parentNode.removeChild(u),o.target.appendChild(u);for(let t=0;t<n.length;t++)for(let e=0;e<n[t].length;e++)if(n[t][e]==p)if(0==n[t][e]){for(let o=0;o<d;o++)s[c].position.push(n[t][e+o]),n[t][e+o]="x";n[t+1][e]="y";for(let o=0;o<d;o++)n[t+1][e+o]="y";n[t][e+d]="y"}else if(n[t][e]==n[0][e]){for(let o=0;o<d;o++)s[c].position.push(n[t][e+o]),n[t][e+o]="x";n[t+1][e]="y";for(let o=0;o<d;o++)n[t+1][e+o]="y";n[t][p-1]="y",n[t][g+1]="y"}else if(n[t][e]==n[9][e]&&0!=e){for(let o=0;o<d;o++)s[c].position.push(n[t][e+o]),n[t][e+o]="x";for(let o=0;o<d;o++)n[t-1][e+o]="y";n[t][d+e]="y",n[t][e-1]="y"}else if(n[t][e]==n[9][e]){for(let o=0;o<d;o++)s[c].position.push(n[t][e+o]),n[t][e+o]="x";for(let o=0;o<d;o++)n[t-1][e+o]="y";n[t][d]="y"}else{for(let o=0;o<d;o++)s[c].position.push(n[t][e+o]),n[t][e+o]="x";n[t+1][e]="y",n[t-1][e]="y",n[t][e-1]="y",n[t][e+d]="y";for(let o=0;o<d;o++)n[t+1][e+o]="y",n[t-1][e+o]="y"}u.parentNode.removeChild(u)}else u.parentNode.removeChild(u),o.target.style.background="",e(s),s[c].land=!1,t(n);e(s)}t(n),(t=>{let e=0;for(let o=0;o<t.length;o++)t[o].position.length&&e++;return 5==e})(s)&&f()}),!1);const f=()=>{const t=document.querySelector(".ships");t.parentNode.removeChild(t),[...document.querySelector(".computerGameBoard").childNodes].forEach((t=>{t.addEventListener("click",(t=>{if(t.target.classList.contains("plays")){let e=[];const o=Number(String(t.target.dataset.row)+String(t.target.dataset.column));for(let t=0;t<r.length;t++)for(let e=0;e<r[t].position.length;e++)r[t].position[e]==o&&r[t].position.splice(e,1);t.target.classList.add("field"),t.target.classList.remove("plays");for(let t=0;t<r.length;t++)0==r[t].position.length&&e.push("true");if(5==e.length)return void console.log("You win")}for(let t=0;t<100;t++)y(),console.log(a.length)}))}))},y=()=>{for(let t=0;t<1e3;t++){const t=Math.floor(99*Math.random());if(a.findIndex((e=>e==t))>-1){let e,o,i=a.findIndex((e=>e==t));1==t.toString().split("").length?(e=0,o=Number(t.toString().split("")[0])):(e=Number(t.toString().split("")[0]),o=Number(t.toString().split("")[1]));for(let t=0;t<s.length;t++)for(let e=0;e<s[t].position.length;e++)if(s[t].position[e]==i)return s[t].position.splice(e,1),void a.splice(i,1)}}}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUN0Q29DLEVBQW9CeUQsT0FBT0YsRUFBTyxPIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9jb21wb25lbnRzL2dhbWVCb2FyZEZpZWxkcy5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2NvbXBvbmVudHMvY3JlYXRlU2hpcC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2NvbXBvbmVudHMvY29tcHV0ZXJHYW1lQm9hcmRGaWVsZC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2NvbXBvbmVudHMvY29tcHV0ZXJDaG9pY2UuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBnYW1lQm9hcmRGaWVsZHMgPSAoZ2FtZUZpZWxkc0FycikgPT4ge1xyXG4gICAgY29uc3QgZ2FtZUJvYXJkQ2xhc3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FtZWJvYXJkJyk7XHJcblxyXG4gICAgZ2FtZUJvYXJkQ2xhc3MudGV4dENvbnRlbnQgPSAnJztcclxuXHJcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgMTA7IGkrKyl7XHJcbiAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IDEwOyBqKyspe1xyXG4gICAgICAgICAgICBpZihnYW1lRmllbGRzQXJyW2ldW2pdID09ICd4Jyl7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBnYW1lRmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5jbGFzc0xpc3QuYWRkKCdjaGVja2VkJyk7XHJcbiAgICAgICAgICAgICAgICBnYW1lRmllbGQuZGF0YXNldC5yb3cgPSBpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmRhdGFzZXQuY29sdW1uID0gajtcclxuXHJcbiAgICAgICAgICAgICAgICBnYW1lQm9hcmRDbGFzcy5hcHBlbmRDaGlsZChnYW1lRmllbGQpO1xyXG4gICAgICAgICAgICB9ZWxzZSBpZihnYW1lRmllbGRzQXJyW2ldW2pdID09ICd5Jyl7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBnYW1lRmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5jbGFzc0xpc3QuYWRkKCdibG9ja2VkJyk7XHJcbiAgICAgICAgICAgICAgICBnYW1lRmllbGQuZGF0YXNldC5yb3cgPSBpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmRhdGFzZXQuY29sdW1uID0gajtcclxuXHJcbiAgICAgICAgICAgICAgICBnYW1lQm9hcmRDbGFzcy5hcHBlbmRDaGlsZChnYW1lRmllbGQpO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGdhbWVGaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmNsYXNzTGlzdC5hZGQoJ2dhbWVGaWVsZCcpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmRhdGFzZXQucm93ID0gaTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5kYXRhc2V0LmNvbHVtbiA9IGo7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGdhbWVCb2FyZENsYXNzLmFwcGVuZENoaWxkKGdhbWVGaWVsZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGdhbWVCb2FyZEZpZWxkczsiLCJjb25zdCBjcmVhdGVTaGlwID0gKHNoaXBOYW1lQW5kU2l6ZSkgPT4ge1xyXG4gICAgY29uc3Qgc2hpcHNDbGFzcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaGlwcycpO1xyXG5cclxuICAgIHNoaXBzQ2xhc3MudGV4dENvbnRlbnQgPSAnJztcclxuXHJcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgc2hpcE5hbWVBbmRTaXplLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICBpZihzaGlwTmFtZUFuZFNpemVbaV0ubGFuZCA9PSB0cnVlKXtcclxuXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGNvbnN0IHNoaXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgc2hpcC5jbGFzc0xpc3QuYWRkKCdzaGlwJyk7XHJcbiAgICAgICAgICAgIHNoaXAuZGF0YXNldC5pZCA9IHNoaXBOYW1lQW5kU2l6ZVtpXS5pZDtcclxuICAgICAgICAgICAgc2hpcC5jbGFzc0xpc3QuYWRkKHNoaXBOYW1lQW5kU2l6ZVtpXS5uYW1lKTtcclxuICAgICAgICAgICAgc2hpcC5zdHlsZS5ncmlkVGVtcGxhdGVDb2x1bW5zID0gYHJlcGVhdCgke3NoaXBOYW1lQW5kU2l6ZVtpXS5zaXplfSwgMWZyKWA7XHJcbiAgICAgICAgICAgIHNoaXAuc3R5bGUud2lkdGggPSBgY2FsYygke3NoaXBOYW1lQW5kU2l6ZVtpXS5pZH0gKiA1MHB4KWA7XHJcbiAgICAgICAgICAgIHNoaXAuc3R5bGUuaGVpZ2h0ID0gJzUwcHgnO1xyXG4gICAgICAgICAgICBzaGlwLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdibGFjayc7IFxyXG4gICAgICAgICAgICBzaGlwLmRyYWdnYWJsZSA9IHRydWU7XHJcblxyXG5cclxuICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IHNoaXBOYW1lQW5kU2l6ZVtpXS5zaXplOyBqKyspe1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3F1YXJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBzcXVhcmUuY2xhc3NMaXN0LmFkZCgnc3F1YXJlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgc2hpcC5hcHBlbmRDaGlsZChzcXVhcmUpO1xyXG4gICAgICAgICAgICB9ICAgXHJcblxyXG4gICAgICAgICAgICBzaGlwc0NsYXNzLmFwcGVuZENoaWxkKHNoaXApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlU2hpcDsiLCJjb25zdCBjb21wdXRlckdhbWVCb2FyZEZpZWxkID0gKGNvbXB1dGVyQXJyKSA9PiB7XHJcbiAgICBcclxuICAgIGNvbnN0IGNvbXB1dGVyR2FtZWJvYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbXB1dGVyR2FtZUJvYXJkJyk7XHJcbiAgICBjb21wdXRlckdhbWVib2FyZC50ZXh0Q29udGVudCA9ICcnO1xyXG5cclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKXtcclxuICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgMTA7IGorKyl7XHJcbiAgICAgICAgICAgIGlmKGNvbXB1dGVyQXJyW2ldW2pdID09ICdYJyl7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBnYW1lRmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5jbGFzc0xpc3QuYWRkKCdwbGF5cycpO1xyXG4gICAgICAgICAgICAgICAgZ2FtZUZpZWxkLmRhdGFzZXQucm93ID0gaTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5kYXRhc2V0LmNvbHVtbiA9IGo7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbXB1dGVyR2FtZWJvYXJkLmFwcGVuZENoaWxkKGdhbWVGaWVsZCk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZ2FtZUZpZWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBnYW1lRmllbGQuY2xhc3NMaXN0LmFkZCgnZmllbGQnKTtcclxuICAgICAgICAgICAgICAgIGdhbWVGaWVsZC5kYXRhc2V0LnJvdyA9IGk7XHJcbiAgICAgICAgICAgICAgICBnYW1lRmllbGQuZGF0YXNldC5jb2x1bW4gPSBqO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb21wdXRlckdhbWVib2FyZC5hcHBlbmRDaGlsZChnYW1lRmllbGQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjb21wdXRlckdhbWVCb2FyZEZpZWxkOyIsImNvbnN0IGNvbXB0ZXJDaG9pY2UgPSAoKSA9PiB7XHJcbiAgICBjb25zdCByb3dDaG9pY2UgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA5KTtcclxuICAgIGNvbnN0IGNvbHVtbkNob2ljZSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDk5KTtcclxuXHJcbiAgICByZXR1cm57XHJcbiAgICAgICAgcm93Q2hvaWNlLFxyXG4gICAgICAgIGNvbHVtbkNob2ljZSxcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY29tcHRlckNob2ljZTsiLCJpbXBvcnQgZ2FtZUJvYXJkRmllbGRzIGZyb20gXCIuL2NvbXBvbmVudHMvZ2FtZUJvYXJkRmllbGRzXCI7XHJcbmltcG9ydCBjcmVhdGVTaGlwIGZyb20gXCIuL2NvbXBvbmVudHMvY3JlYXRlU2hpcFwiO1xyXG5pbXBvcnQgY29tcHV0ZXJHYW1lQm9hcmRGaWVsZCBmcm9tIFwiLi9jb21wb25lbnRzL2NvbXB1dGVyR2FtZUJvYXJkRmllbGRcIjtcclxuaW1wb3J0IGNvbXB0ZXJDaG9pY2UgZnJvbSAnLi9jb21wb25lbnRzL2NvbXB1dGVyQ2hvaWNlJztcclxuXHJcbmNvbnN0IGdhbWVGaWVsZHNBcnIgPSBbXTtcclxubGV0IGNvdW50ID0gMDtcclxuXHJcbmZvcihsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKXtcclxuICAgIGNvbnN0IG5ld0FyciA9IFtdO1xyXG5cclxuICAgIGZvcihsZXQgaiA9IDA7IGogPCAxMDsgaisrKXtcclxuICAgICAgICBuZXdBcnIucHVzaChjb3VudCk7XHJcbiAgICAgICAgY291bnQrKztcclxuICAgIH1cclxuICAgIGdhbWVGaWVsZHNBcnIucHVzaChuZXdBcnIpO1xyXG59XHJcblxyXG5jb25zdCBzaGlwTmFtZUFuZFNpemUgPSBbXHJcbiAgICB7bmFtZTogJ0Rlc3Ryb3llcicsIHNpemU6IDIsIGlkOiAyLCBsYW5kOiBmYWxzZSwgcG9zaXRpb246IFtdfSxcclxuICAgIHtuYW1lOiAnU3VibWFyaW5lJywgc2l6ZTogMywgaWQ6IDMsIGxhbmQ6IGZhbHNlLCBwb3NpdGlvbjogW119LFxyXG4gICAge25hbWU6ICdDcnVpc2VyJywgc2l6ZTogMywgaWQ6IDMsIGxhbmQ6IGZhbHNlLCBwb3NpdGlvbjogW119LFxyXG4gICAge25hbWU6ICdCYXR0bGVzaGlwJywgc2l6ZTogNCwgaWQ6IDQsIGxhbmQ6IGZhbHNlLCBwb3NpdGlvbjogW119LFxyXG4gICAge25hbWU6ICdDYXJyaWVyJywgc2l6ZTogNSwgaWQ6IDUsIGxhbmQ6IGZhbHNlLCBwb3NpdGlvbjogW119LFxyXG5dXHJcblxyXG5jb25zdCBzaGlwTmFtZUFuZFNpemVDb21wdXRlciA9IFtcclxuICAgIHtuYW1lOiAnRGVzdHJveWVyJywgc2l6ZTogMiwgaWQ6IDIsIHBvc2l0aW9uOiBbXX0sXHJcbiAgICB7bmFtZTogJ1N1Ym1hcmluZScsIHNpemU6IDMsIGlkOiAzLCBwb3NpdGlvbjogW119LFxyXG4gICAge25hbWU6ICdDcnVpc2VyJywgc2l6ZTogMywgaWQ6IDMsIHBvc2l0aW9uOiBbXX0sXHJcbiAgICB7bmFtZTogJ0JhdHRsZXNoaXAnLCBzaXplOiA0LCBpZDogNCwgcG9zaXRpb246IFtdfSxcclxuICAgIHtuYW1lOiAnQ2FycmllcicsIHNpemU6IDUsIGlkOiA1LCBwb3NpdGlvbjogW119LFxyXG5dXHJcblxyXG5sZXQgY29tcHV0ZXJQbGF5c1JhbmRvbSA9IFtdO1xyXG5cclxuZm9yKGxldCBpID0gMDsgaSA8IDEwMDsgaSsrKXtcclxuICAgIGNvbXB1dGVyUGxheXNSYW5kb20ucHVzaChpKTtcclxufVxyXG5cclxubGV0IHBsYXllckluZGV4UGxheXMgPSBbXTtcclxuXHJcbmZvcihsZXQgaSA9IDA7IGkgPCAxMDA7IGkrKyl7XHJcbiAgICBwbGF5ZXJJbmRleFBsYXlzLnB1c2goaSk7XHJcbn1cclxuXHJcbmNvbnN0IHRydWVPckZhbHNlID0gKGl0ZW0pID0+IHtcclxuICAgIHJldHVybiBpdGVtICE9PSAnWCc7XHJcbn1cclxuXHJcbmNvbnN0IHRydWVPckZhbHNlVHdvID0gKGl0ZW0pID0+IHtcclxuICAgIHJldHVybiBpdGVtID09ICdYJztcclxufVxyXG5cclxubGV0IGNvbXB1dGVyQXJyID0gW107XHJcblxyXG5mb3IobGV0IGkgPSAwOyBpIDwgMTA7IGkrKyl7XHJcbiAgICBjb25zdCBuZXdBcnIgPSBbXTtcclxuXHJcbiAgICBmb3IobGV0IGogPSAwOyBqIDwgMTA7IGorKyl7XHJcbiAgICAgICAgbmV3QXJyLnB1c2goY291bnQpO1xyXG4gICAgICAgIGNvdW50Kys7XHJcbiAgICB9XHJcbiAgICBjb21wdXRlckFyci5wdXNoKG5ld0Fycik7XHJcbn1cclxuXHJcbmNvbnN0IGNvbXB1dGVyID0gKCkgPT4ge1xyXG4gICAgY29uc3Qgcm93ID0gY29tcHRlckNob2ljZSgpLnJvd0Nob2ljZTtcclxuICAgIGNvbnN0IGNvbHVtbiA9IGNvbXB0ZXJDaG9pY2UoKS5jb2x1bW5DaG9pY2U7XHJcbiAgICBjb21wdXRlckFyci5sZW5ndGggPSAwO1xyXG5cclxuICAgIGNvbnN0IHJhbmRvbVBvc2l0aW9uID0gKG51bSkgPT4ge1xyXG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA5NCkgKyBzaGlwTmFtZUFuZFNpemVDb21wdXRlcltudW1dLnNpemU7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGNvdW50ID0gMDtcclxuXHJcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgMTA7IGkrKyl7XHJcbiAgICAgICAgY29uc3QgbmV3QXJyID0gW107XHJcbiAgICBcclxuICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgMTA7IGorKyl7XHJcbiAgICAgICAgICAgIG5ld0Fyci5wdXNoKGNvdW50KTtcclxuICAgICAgICAgICAgY291bnQrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgY29tcHV0ZXJBcnIucHVzaChuZXdBcnIpO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBjb3VudEFyciA9IDA7XHJcblxyXG4gICAgY29tcHV0ZXJHYW1lQm9hcmRGaWVsZChjb21wdXRlckFycik7XHJcblxyXG4gICAgZm9yKGxldCBiID0gMDsgYiA8IDEwMDA7IGIrKyl7XHJcbiAgICAgICAgZm9yKGxldCB4ID0gMDsgeCA8IHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyLmxlbmd0aDsgeCsrKXtcclxuICAgICAgICAgICAgaWYoc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbeF0ucG9zaXRpb24uZXZlcnkodHJ1ZU9yRmFsc2UpKXtcclxuXHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbeF0ucG9zaXRpb24ubGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbMF0ucG9zaXRpb24ubGVuZ3RoICYmIHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyWzFdLnBvc2l0aW9uLmxlbmd0aCAmJiBzaGlwTmFtZUFuZFNpemVDb21wdXRlclsyXS5wb3NpdGlvbi5sZW5ndGggJiYgc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbM10ucG9zaXRpb24ubGVuZ3RoICYmIHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyWzRdLnBvc2l0aW9uLmxlbmd0aCl7XHJcbiAgICAgICAgICAgIGZvcihsZXQgbyA9IDA7IG8gPCAxMDsgbysrKXtcclxuICAgICAgICAgICAgICAgIGlmKGNvbXB1dGVyQXJyW29dLmZpbHRlcihpdGVtID0+ICBpdGVtID09ICdYJykpe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50QXJyICs9IGNvbXB1dGVyQXJyW29dLmZpbHRlcihpdGVtID0+IGl0ZW0gPT0gJ1gnKS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGNvdW50QXJyKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBjb21wdXRlckFycixcclxuICAgICAgICAgICAgICAgIHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXIubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgaWYoc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbaV0ucG9zaXRpb24ubGVuZ3RoID4gMSl7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gcmFuZG9tUG9zaXRpb24oaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJvdztcclxuICAgICAgICAgICAgICAgICAgICBsZXQgY29sdW1uO1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYodmFsdWUudG9TdHJpbmcoKS5sZW5ndGggPT0gMSl7XHJcbiAgICAgICAgICAgICAgICAgICAgcm93ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSBOdW1iZXIodmFsdWUudG9TdHJpbmcoKS5zcGxpdCgnJylbMF0pO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgcm93ID0gTnVtYmVyKHZhbHVlLnRvU3RyaW5nKCkuc3BsaXQoJycpWzBdKTtcclxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSBOdW1iZXIodmFsdWUudG9TdHJpbmcoKS5zcGxpdCgnJylbMV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgZmluZEluZGV4Q29tcHV0ZXIgPSBjb21wdXRlckFycltyb3ddLmZpbmRJbmRleChpdGVtID0+IGl0ZW0gPT0gdmFsdWUpO1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYoZmluZEluZGV4Q29tcHV0ZXIgPiAwKXtcclxuICAgICAgICAgICAgICAgICAgICBpZihmaW5kSW5kZXhDb21wdXRlciAtIHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW2ldLnNpemUgPj0gMCl7ICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbaV0uc2l6ZTsgaisrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW2ldLnBvc2l0aW9uLnB1c2goY29tcHV0ZXJBcnJbcm93XVtmaW5kSW5kZXhDb21wdXRlciAtIGpdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXB1dGVyQXJyW3Jvd11bZmluZEluZGV4Q29tcHV0ZXIgLSBqXSA9ICdYJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5jb21wdXRlcigpO1xyXG5cclxuY29uc3QgY29wcHlDb21wdXRlckFyciA9IFtdO1xyXG5cclxubGV0IGNvdW50Q29tcG90ZXIgPSAwO1xyXG5cclxuZm9yKGxldCBpID0gMDsgaSA8IDEwOyBpKyspe1xyXG4gICAgY29uc3QgbmV3QXJyID0gW107XHJcblxyXG4gICAgZm9yKGxldCBqID0gMDsgaiA8IDEwOyBqKyspe1xyXG4gICAgICAgIG5ld0Fyci5wdXNoKGNvdW50Q29tcG90ZXIpO1xyXG4gICAgICAgIGNvdW50Q29tcG90ZXIrKztcclxuICAgIH1cclxuICAgIGNvcHB5Q29tcHV0ZXJBcnIucHVzaChuZXdBcnIpO1xyXG59XHJcblxyXG5sZXQgY291bnRDb21wdXRlckNvcHB5ID0gMDtcclxuXHJcbmNvbnN0IGNvbXB1dGVyQXJyVHdvID0gKCkgPT4ge1xyXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbaV0ucG9zaXRpb24ubGVuZ3RoOyBqKyspe1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbGV0IHJvdztcclxuICAgICAgICAgICAgbGV0IGNvbHVtbjtcclxuICAgIFxyXG4gICAgICAgICAgICBpZihzaGlwTmFtZUFuZFNpemVDb21wdXRlcltpXS5wb3NpdGlvbltqXS50b1N0cmluZygpLnNwbGl0KCcnKS5sZW5ndGggPT0gMSl7XHJcbiAgICAgICAgICAgICAgICByb3cgPSAwO1xyXG4gICAgICAgICAgICAgICAgY29sdW1uID0gTnVtYmVyKHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW2ldLnBvc2l0aW9uW2pdLnRvU3RyaW5nKCkuc3BsaXQoJycpWzBdKTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICByb3cgPSBzaGlwTmFtZUFuZFNpemVDb21wdXRlcltpXS5wb3NpdGlvbltqXS50b1N0cmluZygpLnNwbGl0KCcnKVswXTtcclxuICAgICAgICAgICAgICAgIGNvbHVtbiA9IHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyW2ldLnBvc2l0aW9uW2pdLnRvU3RyaW5nKCkuc3BsaXQoJycpWzFdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgY291bnRDb21wdXRlckNvcHB5Kys7XHJcbiAgICBcclxuICAgICAgICAgICAgY29wcHlDb21wdXRlckFycltyb3ddW2NvbHVtbl0gPSAnWCc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5jb21wdXRlckFyclR3bygpO1xyXG5cclxuY29uc29sZS5sb2coY29wcHlDb21wdXRlckFyciwgY291bnRDb21wdXRlckNvcHB5KTtcclxuXHJcblxyXG5jb21wdXRlckdhbWVCb2FyZEZpZWxkKGNvcHB5Q29tcHV0ZXJBcnIpO1xyXG5cclxuY29uc3Qgc2hpcCA9IChib2R5TGVuZ3RoLCB3aGVyZUhpdHMsIHN1bmspID0+IHtcclxuICAgIFxyXG4gICAgcmV0dXJue1xyXG4gICAgICAgIGJvZHlMZW5ndGgsXHJcbiAgICAgICAgd2hlcmVIaXRzLFxyXG4gICAgICAgIHN1bmssXHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IGhpdCA9IChoaXRQb3NpdGlvbikgPT4ge1xyXG4gICAgXHJcbiAgICByZXR1cm57XHJcbiAgICAgICAgaGl0UG9zaXRpb24sXHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IGlzU3VuayA9IChib2R5TGVuZ3RoKSA9PiB7XHJcbiAgICBjb25zdCBoaXRzID0gYm9keUxlbmd0aCAtIHNoaXAoKS5zdW5rO1xyXG5cclxuICAgIGlmKGhpdHMgPT0gMCl7XHJcbiAgICAgICAgcmV0dXJuICdzaGlwIGlzIHN1bmsnO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBoaXRzO1xyXG59XHJcblxyXG5sZXQgZHJhZ2dlZDtcclxuXHJcbmdhbWVCb2FyZEZpZWxkcyhnYW1lRmllbGRzQXJyKTtcclxuY3JlYXRlU2hpcChzaGlwTmFtZUFuZFNpemUpO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdzdGFydFwiLCAoZSkgPT4ge1xyXG4gICAgZHJhZ2dlZCA9IGUudGFyZ2V0O1xyXG5cclxuICAgIGUudGFyZ2V0LnN0eWxlLm9wYWNpdHkgPSAuMztcclxuXHJcbn0sIGZhbHNlKTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnZW5kXCIsIChlKSA9PiB7XHJcbiAgICBlLnRhcmdldC5zdHlsZS5vcGFjaXR5ID0gXCJcIjtcclxuICAgIGUudGFyZ2V0LmRhdGFzZXQucm93ID0gZS50YXJnZXQuZmlyc3RDaGlsZC5kYXRhc2V0LnJvdztcclxuICAgIGUudGFyZ2V0LmRhdGFzZXQuY29sdW1uID0gZS50YXJnZXQuZmlyc3RDaGlsZC5kYXRhc2V0LmNvbHVtbjtcclxufSwgZmFsc2UpO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdvdmVyXCIsIChlKSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbn0sIGZhbHNlKTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnZW50ZXJcIiwgKGUpID0+IHtcclxuICAgIGlmKGUudGFyZ2V0LmNsYXNzTmFtZSA9PSBcImdhbWVGaWVsZFwiKXtcclxuICAgICAgICBlLnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kID0gXCJ5ZWxsb3dcIjtcclxuICAgIH1cclxufSwgZmFsc2UpO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdsZWF2ZVwiLCAoZSkgPT4ge1xyXG5cclxuICAgIGlmIChlLnRhcmdldC5jbGFzc05hbWUgPT0gXCJnYW1lRmllbGRcIil7XHJcbiAgICAgICAgZS50YXJnZXQuc3R5bGUuYmFja2dyb3VuZCA9IFwiXCI7XHJcbiAgICB9XHJcbn0sIGZhbHNlKTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkcm9wXCIsIChlKSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgaWYoZS50YXJnZXQuY2xhc3NOYW1lID09ICdnYW1lRmllbGQnKXtcclxuICAgICAgICBlLnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kID0gXCJcIjtcclxuICAgICAgICBlLnRhcmdldC5hcHBlbmRDaGlsZChkcmFnZ2VkKTtcclxuXHJcbiAgICAgICAgbGV0IHNoaXBJc0dvb2RTaXplID0gZmFsc2U7XHJcbiBcclxuICAgICAgICBsZXQgcmVzdWx0UG9zaXRpb24gPSBlLnRhcmdldC5kYXRhc2V0LnJvdyArIGUudGFyZ2V0LmRhdGFzZXQuY29sdW1uO1xyXG5cclxuICAgICAgICBsZXQgc3RyaW5nVG9JbnQgPSBOdW1iZXIocmVzdWx0UG9zaXRpb24pO1xyXG4gICAgXHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHJlc3VsdFBvc2l0aW9uLnNwbGl0KCcnKS5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgIGlmKHJlc3VsdFBvc2l0aW9uLnNwbGl0KCcnKVswXSA9PSAwKXtcclxuICAgICAgICAgICAgICAgIHJlc3VsdFBvc2l0aW9uID0gcmVzdWx0UG9zaXRpb24uc3BsaXQoJycpWzFdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSAgIFxyXG5cclxuICAgICAgICBjb25zdCBuYW1lU2hpcCA9IGUudGFyZ2V0LmZpcnN0Q2hpbGQuY2xhc3NOYW1lLnNwbGl0KCcgJylbMV07XHJcbiAgICAgICAgbGV0IGxlbmd0aFNoaXA7XHJcblxyXG4gICAgICAgIGxldCBpbmRleE9iajtcclxuICAgICAgICBcclxuICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgc2hpcE5hbWVBbmRTaXplLmxlbmd0aDsgaisrKXtcclxuICAgICAgICAgICAgaWYoc2hpcE5hbWVBbmRTaXplW2pdLm5hbWUgPT0gbmFtZVNoaXApe1xyXG4gICAgICAgICAgICAgICAgbGVuZ3RoU2hpcCA9IHNoaXBOYW1lQW5kU2l6ZVtqXS5zaXplO1xyXG4gICAgICAgICAgICAgICAgaW5kZXhPYmogPSBqXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgZmlyc3RQb3NpdGlvbiA9IHN0cmluZ1RvSW50O1xyXG4gICAgICAgIGNvbnN0IGxhc3RTaGlwUG9zaXRpb24gPSBzdHJpbmdUb0ludCArIGxlbmd0aFNoaXAgLSAxO1xyXG4gICAgICAgIGNvbnN0IHNoaXBBcnJQb3NpdGlvbiA9IFtdO1xyXG5cclxuICAgICAgICBmb3IobGV0IHggPSBmaXJzdFBvc2l0aW9uOyB4IDw9IGxhc3RTaGlwUG9zaXRpb247IHgrKyl7XHJcbiAgICAgICAgICAgIHNoaXBBcnJQb3NpdGlvbi5wdXNoKHgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgaXNUcnVlID0gKGdhbWVGaWVsZHNBcnIsIGZpcnN0UG9zaXRpb24sIGxhc3RTaGlwUG9zaXRpb24sIHNoaXBJc0dvb2RTaXplKSA9PiB7XHJcbiAgICAgICAgICAgIGZvcihsZXQgbiA9IDA7IG4gPCBnYW1lRmllbGRzQXJyLmxlbmd0aDsgbisrKXtcclxuICAgICAgICAgICAgICAgIGlmKGdhbWVGaWVsZHNBcnJbbl0uaW5jbHVkZXMoZmlyc3RQb3NpdGlvbikpe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGdhbWVGaWVsZHNBcnJbbl0uaW5jbHVkZXMobGFzdFNoaXBQb3NpdGlvbikpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGlwSXNHb29kU2l6ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoaXBOYW1lQW5kU2l6ZVtpbmRleE9ial0ubGFuZCA9IHRydWU7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNoaXBJc0dvb2RTaXplO1xyXG4gICAgICAgICAgICAgICAgICAgIH07IFxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNoaXBJc0dvb2RTaXplID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNyZWF0ZVNoaXAoc2hpcE5hbWVBbmRTaXplKTtcclxuXHJcbiAgICAgICAgaWYoIWlzVHJ1ZShnYW1lRmllbGRzQXJyLCBmaXJzdFBvc2l0aW9uLCBsYXN0U2hpcFBvc2l0aW9uLCBzaGlwSXNHb29kU2l6ZSkpe1xyXG4gICAgICAgICAgICBkcmFnZ2VkLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZHJhZ2dlZCk7XHJcbiAgICAgICAgICAgIGUudGFyZ2V0LnN0eWxlLmJhY2tncm91bmQgPSBcIlwiO1xyXG4gICAgICAgICAgICBjcmVhdGVTaGlwKHNoaXBOYW1lQW5kU2l6ZSk7XHJcbiAgICAgICAgICAgIHNoaXBOYW1lQW5kU2l6ZVtpbmRleE9ial0ubGFuZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgZ2FtZUJvYXJkRmllbGRzKGdhbWVGaWVsZHNBcnIpO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBlLnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kID0gXCJcIjtcclxuICAgICAgICAgICAgZHJhZ2dlZC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGRyYWdnZWQpO1xyXG4gICAgICAgICAgICBlLnRhcmdldC5hcHBlbmRDaGlsZChkcmFnZ2VkKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBnYW1lRmllbGRzQXJyLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCBnYW1lRmllbGRzQXJyW2ldLmxlbmd0aDsgaisrKXtcclxuICAgICAgICAgICAgICAgICAgICBpZihnYW1lRmllbGRzQXJyW2ldW2pdID09IGZpcnN0UG9zaXRpb24pe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihnYW1lRmllbGRzQXJyW2ldW2pdID09IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBrID0gMDsgayA8IGxlbmd0aFNoaXA7IGsrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hpcE5hbWVBbmRTaXplW2luZGV4T2JqXS5wb3NpdGlvbi5wdXNoKGdhbWVGaWVsZHNBcnJbaV1baiArIGtdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2ldW2ogKyBrXSA9ICd4JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaSArIDFdW2pdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBwID0gMDsgcCA8IGxlbmd0aFNoaXA7IHArKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpICsgMV1baiArIHBdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtqICsgbGVuZ3RoU2hpcF0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKGdhbWVGaWVsZHNBcnJbaV1bal0gPT0gZ2FtZUZpZWxkc0FyclswXVtqXSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGsgPSAwOyBrIDwgbGVuZ3RoU2hpcDsgaysrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGlwTmFtZUFuZFNpemVbaW5kZXhPYmpdLnBvc2l0aW9uLnB1c2goZ2FtZUZpZWxkc0FycltpXVtqICsga10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaV1baiArIGtdID0gJ3gnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpICsgMV1bal0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IHAgPSAwOyBwIDwgbGVuZ3RoU2hpcDsgcCsrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2kgKyAxXVtqICsgcF0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2ldW2ZpcnN0UG9zaXRpb24gLSAxXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaV1bbGFzdFNoaXBQb3NpdGlvbiArIDFdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihnYW1lRmllbGRzQXJyW2ldW2pdID09IGdhbWVGaWVsZHNBcnJbOV1bal0gJiYgaiAhPSAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgayA9IDA7IGsgPCBsZW5ndGhTaGlwOyBrKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoaXBOYW1lQW5kU2l6ZVtpbmRleE9ial0ucG9zaXRpb24ucHVzaChnYW1lRmllbGRzQXJyW2ldW2ogKyBrXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpXVtqICsga10gPSAneCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IHAgPSAwOyBwIDwgbGVuZ3RoU2hpcDsgcCsrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2kgLSAxXVtqICsgcF0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2ldW2xlbmd0aFNoaXAgKyBqXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaV1baiAtIDFdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihnYW1lRmllbGRzQXJyW2ldW2pdID09IGdhbWVGaWVsZHNBcnJbOV1bal0pe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBrID0gMDsgayA8IGxlbmd0aFNoaXA7IGsrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hpcE5hbWVBbmRTaXplW2luZGV4T2JqXS5wb3NpdGlvbi5wdXNoKGdhbWVGaWVsZHNBcnJbaV1baiArIGtdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2ldW2ogKyBrXSA9ICd4JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgcCA9IDA7IHAgPCBsZW5ndGhTaGlwOyBwKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaSAtIDFdW2ogKyBwXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaV1bbGVuZ3RoU2hpcF0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBrID0gMDsgayA8IGxlbmd0aFNoaXA7IGsrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hpcE5hbWVBbmRTaXplW2luZGV4T2JqXS5wb3NpdGlvbi5wdXNoKGdhbWVGaWVsZHNBcnJbaV1baiArIGtdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2ldW2ogKyBrXSA9ICd4JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaSArIDFdW2pdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpIC0gMV1bal0gPSAneSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRzQXJyW2ldW2ogLSAxXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaV1baiArIGxlbmd0aFNoaXBdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBwID0gMDsgcCA8IGxlbmd0aFNoaXA7IHArKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkc0FycltpICsgMV1baiArIHBdID0gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZHNBcnJbaSAtIDFdW2ogKyBwXSA9ICd5JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkcmFnZ2VkLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZHJhZ2dlZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNyZWF0ZVNoaXAoc2hpcE5hbWVBbmRTaXplKTsgIFxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGlzUG9zaXRpb25UcnVlID0gKHNoaXBOYW1lQW5kU2l6ZSkgPT4ge1xyXG4gICAgICAgIGxldCBjb3VudCA9IDA7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHNoaXBOYW1lQW5kU2l6ZS5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgIGlmKHNoaXBOYW1lQW5kU2l6ZVtpXS5wb3NpdGlvbi5sZW5ndGgpe1xyXG4gICAgICAgICAgICAgICAgY291bnQrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoY291bnQgPT0gNSl7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBnYW1lQm9hcmRGaWVsZHMoZ2FtZUZpZWxkc0Fycik7XHJcblxyXG4gICAgaWYoaXNQb3NpdGlvblRydWUoc2hpcE5hbWVBbmRTaXplKSl7XHJcbiAgICAgICAgc3RhcnRHYW1lKCk7XHJcblxyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxufSwgZmFsc2UpO1xyXG5cclxuY29uc3Qgc3RhcnRHYW1lID0gKCkgPT4ge1xyXG4gICAgY29uc3Qgc2hpcHNDbGFzcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaGlwcycpO1xyXG4gICAgc2hpcHNDbGFzcy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNoaXBzQ2xhc3MpO1xyXG5cclxuICAgIGNvbnN0IGdhbWVib2FyZE1haW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29tcHV0ZXJHYW1lQm9hcmQnKTtcclxuICAgIGNvbnN0IHRlc3RHYW1lQm9hcmQgPSBbLi4uZ2FtZWJvYXJkTWFpbi5jaGlsZE5vZGVzXTtcclxuXHJcbiAgICB0ZXN0R2FtZUJvYXJkLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7ICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncGxheXMnKSl7XHJcbiAgICAgICAgICAgICAgICBsZXQgaXNMZW5naHRUb1plcm8gPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IE51bWJlcihTdHJpbmcoZS50YXJnZXQuZGF0YXNldC5yb3cpICsgU3RyaW5nKGUudGFyZ2V0LmRhdGFzZXQuY29sdW1uKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgc2hpcE5hbWVBbmRTaXplQ29tcHV0ZXJbaV0ucG9zaXRpb24ubGVuZ3RoOyBqKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzaGlwTmFtZUFuZFNpemVDb21wdXRlcltpXS5wb3NpdGlvbltqXSA9PSBpbmRleCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGlwTmFtZUFuZFNpemVDb21wdXRlcltpXS5wb3NpdGlvbi5zcGxpY2UoaiwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnZmllbGQnKTtcclxuICAgICAgICAgICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ3BsYXlzJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBvID0gMDsgbyA8IHNoaXBOYW1lQW5kU2l6ZUNvbXB1dGVyLmxlbmd0aDsgbysrKXtcclxuICAgICAgICAgICAgICAgICAgICBpZihzaGlwTmFtZUFuZFNpemVDb21wdXRlcltvXS5wb3NpdGlvbi5sZW5ndGggPT0gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzTGVuZ2h0VG9aZXJvLnB1c2goJ3RydWUnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoaXNMZW5naHRUb1plcm8ubGVuZ3RoID09IDUpe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdZb3Ugd2luJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvcihsZXQgciA9IDA7IHIgPCAxMDA7IHIrKyl7XHJcbiAgICAgICAgICAgICAgICBjb21wdXRlclJhbmRvbVBsYXlzKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjb21wdXRlclBsYXlzUmFuZG9tLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufVxyXG5cclxuY29uc3QgY29tcHV0ZXJSYW5kb21QbGF5cyA9ICgpID0+IHtcclxuICAgIGZvcihsZXQgZiA9IDA7IGYgPCAxMDAwOyBmKyspe1xyXG4gICAgICAgIGNvbnN0IHJhbmRvbU51bWJlciA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDk5KTtcclxuXHJcbiAgICAgICAgaWYoY29tcHV0ZXJQbGF5c1JhbmRvbS5maW5kSW5kZXgoaXRlbSA9PiBpdGVtID09IHJhbmRvbU51bWJlcikgPiAtMSl7XHJcbiAgICAgICAgICAgIGxldCByb3c7XHJcbiAgICAgICAgICAgIGxldCBjb2x1bW47XHJcbiAgICAgICAgICAgIGxldCBpbmRleCA9IGNvbXB1dGVyUGxheXNSYW5kb20uZmluZEluZGV4KGl0ZW0gPT4gaXRlbSA9PSByYW5kb21OdW1iZXIpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGlmKHJhbmRvbU51bWJlci50b1N0cmluZygpLnNwbGl0KCcnKS5sZW5ndGggPT0gMSl7XHJcbiAgICAgICAgICAgICAgICByb3cgPSAwO1xyXG4gICAgICAgICAgICAgICAgY29sdW1uID0gTnVtYmVyKHJhbmRvbU51bWJlci50b1N0cmluZygpLnNwbGl0KCcnKVswXSk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgcm93ID0gTnVtYmVyKHJhbmRvbU51bWJlci50b1N0cmluZygpLnNwbGl0KCcnKVswXSk7XHJcbiAgICAgICAgICAgICAgICBjb2x1bW4gPSBOdW1iZXIocmFuZG9tTnVtYmVyLnRvU3RyaW5nKCkuc3BsaXQoJycpWzFdKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHNoaXBOYW1lQW5kU2l6ZS5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgc2hpcE5hbWVBbmRTaXplW2ldLnBvc2l0aW9uLmxlbmd0aDsgaisrKXtcclxuICAgICAgICAgICAgICAgICAgICBpZihzaGlwTmFtZUFuZFNpemVbaV0ucG9zaXRpb25bal0gPT0gaW5kZXgpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGlwTmFtZUFuZFNpemVbaV0ucG9zaXRpb24uc3BsaWNlKGosIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wdXRlclBsYXlzUmFuZG9tLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iXSwibmFtZXMiOlsiZ2FtZUZpZWxkc0FyciIsImdhbWVCb2FyZENsYXNzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwidGV4dENvbnRlbnQiLCJpIiwiaiIsImdhbWVGaWVsZCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJkYXRhc2V0Iiwicm93IiwiY29sdW1uIiwiYXBwZW5kQ2hpbGQiLCJzaGlwTmFtZUFuZFNpemUiLCJzaGlwc0NsYXNzIiwibGVuZ3RoIiwibGFuZCIsInNoaXAiLCJpZCIsIm5hbWUiLCJzdHlsZSIsImdyaWRUZW1wbGF0ZUNvbHVtbnMiLCJzaXplIiwid2lkdGgiLCJoZWlnaHQiLCJiYWNrZ3JvdW5kQ29sb3IiLCJkcmFnZ2FibGUiLCJzcXVhcmUiLCJjb21wdXRlckFyciIsImNvbXB1dGVyR2FtZWJvYXJkIiwicm93Q2hvaWNlIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiY29sdW1uQ2hvaWNlIiwiY291bnQiLCJuZXdBcnIiLCJwdXNoIiwicG9zaXRpb24iLCJzaGlwTmFtZUFuZFNpemVDb21wdXRlciIsImNvbXB1dGVyUGxheXNSYW5kb20iLCJwbGF5ZXJJbmRleFBsYXlzIiwidHJ1ZU9yRmFsc2UiLCJpdGVtIiwiY291bnRBcnIiLCJiIiwieCIsImV2ZXJ5IiwibyIsImZpbHRlciIsImNvbnNvbGUiLCJsb2ciLCJ2YWx1ZSIsIm51bSIsInRvU3RyaW5nIiwiTnVtYmVyIiwic3BsaXQiLCJmaW5kSW5kZXhDb21wdXRlciIsImZpbmRJbmRleCIsImNvbXB1dGVyIiwiY29wcHlDb21wdXRlckFyciIsImNvdW50Q29tcG90ZXIiLCJkcmFnZ2VkIiwiY291bnRDb21wdXRlckNvcHB5IiwiY29tcHV0ZXJBcnJUd28iLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInRhcmdldCIsIm9wYWNpdHkiLCJmaXJzdENoaWxkIiwicHJldmVudERlZmF1bHQiLCJjbGFzc05hbWUiLCJiYWNrZ3JvdW5kIiwic2hpcElzR29vZFNpemUiLCJyZXN1bHRQb3NpdGlvbiIsInN0cmluZ1RvSW50IiwibmFtZVNoaXAiLCJsZW5ndGhTaGlwIiwiaW5kZXhPYmoiLCJmaXJzdFBvc2l0aW9uIiwibGFzdFNoaXBQb3NpdGlvbiIsInNoaXBBcnJQb3NpdGlvbiIsImlzVHJ1ZSIsIm4iLCJpbmNsdWRlcyIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsImsiLCJwIiwiaXNQb3NpdGlvblRydWUiLCJzdGFydEdhbWUiLCJjaGlsZE5vZGVzIiwiZm9yRWFjaCIsImNvbnRhaW5zIiwiaXNMZW5naHRUb1plcm8iLCJpbmRleCIsIlN0cmluZyIsInNwbGljZSIsInJlbW92ZSIsInIiLCJjb21wdXRlclJhbmRvbVBsYXlzIiwiZiIsInJhbmRvbU51bWJlciJdLCJzb3VyY2VSb290IjoiIn0=